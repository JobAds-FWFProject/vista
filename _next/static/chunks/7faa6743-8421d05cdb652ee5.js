"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{9751:(e,t,i)=>{i.d(t,{T:()=>K});var r,n=i(2903);i(2124);var a=i(8382),l=i(3335),s=i(7738),o=i(3283),f=i(6969),c=i(2531),d=i(194),u=i(438),b=i(4339),h=i(8954);let p="#b3b3b3",m="#666666",g={disableSimulation:!1,spaceSize:4096,nodeSizeScale:1,linkWidthScale:1,arrowSizeScale:1,renderLinks:!0,curvedLinks:!1,curvedLinkSegments:19,curvedLinkWeight:.8,curvedLinkControlPointDistance:.5,arrowLinks:!0,linkVisibilityDistanceRange:[50,150],linkVisibilityMinTransparency:.25,hoveredNodeRingColor:"white",focusedNodeRingColor:"white",useQuadtree:!1,simulation:{decay:1e3,gravity:0,center:0,repulsion:.1,repulsionTheta:1.7,repulsionQuadtreeLevels:12,linkSpring:1,linkDistance:2,linkDistRandomVariationRange:[1,1.2],repulsionFromMouse:2,friction:.85},showFPSMonitor:!1,pixelRatio:2,scaleNodesOnZoom:!0,disableZoom:!1,fitViewOnInit:!0,fitViewDelay:250,nodeSamplingDistance:150},_=e=>"function"==typeof e,v=e=>Array.isArray(e),y=e=>e instanceof Object,w=e=>e instanceof Object&&"Function"!==e.constructor.name&&"Object"!==e.constructor.name,x=e=>y(e)&&!v(e)&&!_(e)&&!w(e);function S(e,t,i){return _(t)?t(e,i):t}function z(e){var t;let i;if(v(e))i=e;else{let r=(0,s.Ay)(e),n=null==r?void 0:r.rgb();i=[(null==n?void 0:n.r)||0,(null==n?void 0:n.g)||0,(null==n?void 0:n.b)||0,null!=(t=null==r?void 0:r.opacity)?t:1]}return[i[0]/255,i[1]/255,i[2]/255,i[3]]}function F(e,t){let i=new Float32Array;return e({framebuffer:t})(()=>{i=e.read()}),i}class A{constructor(){this.disableSimulation=g.disableSimulation,this.backgroundColor="#222222",this.spaceSize=g.spaceSize,this.nodeColor=p,this.nodeGreyoutOpacity=.1,this.nodeSize=4,this.nodeSizeScale=g.nodeSizeScale,this.renderHighlightedNodeRing=!0,this.highlightedNodeRingColor=void 0,this.renderHoveredNodeRing=!0,this.hoveredNodeRingColor=g.hoveredNodeRingColor,this.focusedNodeRingColor=g.focusedNodeRingColor,this.linkColor=m,this.linkGreyoutOpacity=.1,this.linkWidth=1,this.linkWidthScale=g.linkWidthScale,this.renderLinks=g.renderLinks,this.curvedLinks=g.curvedLinks,this.curvedLinkSegments=g.curvedLinkSegments,this.curvedLinkWeight=g.curvedLinkWeight,this.curvedLinkControlPointDistance=g.curvedLinkControlPointDistance,this.linkArrows=g.arrowLinks,this.linkArrowsSizeScale=g.arrowSizeScale,this.linkVisibilityDistanceRange=g.linkVisibilityDistanceRange,this.linkVisibilityMinTransparency=g.linkVisibilityMinTransparency,this.useQuadtree=g.useQuadtree,this.simulation={decay:g.simulation.decay,gravity:g.simulation.gravity,center:g.simulation.center,repulsion:g.simulation.repulsion,repulsionTheta:g.simulation.repulsionTheta,repulsionQuadtreeLevels:g.simulation.repulsionQuadtreeLevels,linkSpring:g.simulation.linkSpring,linkDistance:g.simulation.linkDistance,linkDistRandomVariationRange:g.simulation.linkDistRandomVariationRange,repulsionFromMouse:g.simulation.repulsionFromMouse,friction:g.simulation.friction,onStart:void 0,onTick:void 0,onEnd:void 0,onPause:void 0,onRestart:void 0},this.events={onClick:void 0,onMouseMove:void 0,onNodeMouseOver:void 0,onNodeMouseOut:void 0,onZoomStart:void 0,onZoom:void 0,onZoomEnd:void 0},this.showFPSMonitor=g.showFPSMonitor,this.pixelRatio=g.pixelRatio,this.scaleNodesOnZoom=g.scaleNodesOnZoom,this.initialZoomLevel=void 0,this.disableZoom=g.disableZoom,this.fitViewOnInit=g.fitViewOnInit,this.fitViewDelay=g.fitViewDelay,this.fitViewByNodesInRect=void 0,this.randomSeed=void 0,this.nodeSamplingDistance=g.nodeSamplingDistance}init(e){Object.keys(e).forEach(t=>{this.deepMergeConfig(this.getConfig(),e,t)})}deepMergeConfig(e,t,i){x(e[i])&&x(t[i])?Object.keys(t[i]).forEach(r=>{this.deepMergeConfig(e[i],t[i],r)}):e[i]=t[i]}getConfig(){return this}}class k{constructor(e,t,i,r,n){this.reglInstance=e,this.config=t,this.store=i,this.data=r,n&&(this.points=n)}}function W(e){return{buffer:e.buffer(new Float32Array([-1,-1,1,-1,-1,1,1,1])),size:2}}function O(e,t){let i=new Float32Array(t*t*2);for(let e=0;e<t;e++)for(let r=0;r<t;r++){let n=e*t*2+2*r;i[n+0]=r,i[n+1]=e}return{buffer:e.buffer(i),size:2}}function H(e){var t;e&&(null==(t=null==e?void 0:e._framebuffer)?void 0:t.framebuffer)&&e.destroy()}function B(e){var t;e&&(null==(t=null==e?void 0:e._buffer)?void 0:t.buffer)&&e.destroy()}var I="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec2 index;void main(){gl_FragColor=vec4(0.0);}",P="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nattribute vec2 quad;varying vec2 index;void main(){index=(quad+1.0)/2.0;gl_Position=vec4(quad,0,1);}";class E extends k{create(){let{reglInstance:e}=this;this.centermassFbo=e.framebuffer({color:e.texture({data:new Float32Array(4).fill(0),shape:[1,1,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){let{reglInstance:e,config:t,store:i,data:r,points:n}=this;this.clearCentermassCommand=e({frag:I,vert:P,framebuffer:this.centermassFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)}}),this.calculateCentermassCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;attribute vec2 indexes;varying vec4 rgba;void main(){vec4 pointPosition=texture2D(position,indexes/pointsTextureSize);rgba=vec4(pointPosition.xy,1.0,0.0);gl_Position=vec4(0.0,0.0,0.0,1.0);gl_PointSize=1.0;}",framebuffer:()=>this.centermassFbo,primitive:"points",count:()=>r.nodes.length,attributes:{indexes:O(e,i.pointsTextureSize)},uniforms:{position:()=>null==n?void 0:n.previousPositionFbo,pointsTextureSize:()=>i.pointsTextureSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.runCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D centermass;uniform float center;uniform float alpha;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 velocity=vec4(0.0);vec4 centermassValues=texture2D(centermass,vec2(0.0));vec2 centermassPosition=centermassValues.xy/centermassValues.b;vec2 distVector=centermassPosition-pointPosition.xy;float dist=sqrt(dot(distVector,distVector));if(dist>0.0){float angle=atan(distVector.y,distVector.x);float addV=alpha*center*dist*0.01;velocity.rg+=addV*vec2(cos(angle),sin(angle));}gl_FragColor=velocity;}",vert:P,framebuffer:()=>null==n?void 0:n.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>null==n?void 0:n.previousPositionFbo,centermass:()=>this.centermassFbo,center:()=>{var e;return null==(e=t.simulation)?void 0:e.center},alpha:()=>i.alpha}})}run(){var e,t,i;null==(e=this.clearCentermassCommand)||e.call(this),null==(t=this.calculateCentermassCommand)||t.call(this),null==(i=this.runCommand)||i.call(this)}destroy(){H(this.centermassFbo)}}class T extends k{initPrograms(){let{reglInstance:e,config:t,store:i,points:r}=this;this.runCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float gravity;uniform float spaceSize;uniform float alpha;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 velocity=vec4(0.0);vec2 centerPosition=vec2(spaceSize/2.0);vec2 distVector=centerPosition-pointPosition.rg;float dist=sqrt(dot(distVector,distVector));if(dist>0.0){float angle=atan(distVector.y,distVector.x);float addV=alpha*gravity*dist*0.1;velocity.rg+=addV*vec2(cos(angle),sin(angle));}gl_FragColor=velocity;}",vert:P,framebuffer:()=>null==r?void 0:r.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>null==r?void 0:r.previousPositionFbo,gravity:()=>{var e;return null==(e=t.simulation)?void 0:e.gravity},spaceSize:()=>i.adjustedSpaceSize,alpha:()=>i.alpha}})}run(){var e;null==(e=this.runCommand)||e.call(this)}}!function(e){e.OUTGOING="outgoing",e.INCOMING="incoming"}(r||(r={}));class M extends k{constructor(){super(...arguments),this.linkFirstIndicesAndAmount=new Float32Array,this.indices=new Float32Array,this.maxPointDegree=0}create(e){let{reglInstance:t,store:{pointsTextureSize:i,linksTextureSize:n},data:a}=this;if(!i||!n)return;this.linkFirstIndicesAndAmount=new Float32Array(i*i*4),this.indices=new Float32Array(n*n*4);let l=new Float32Array(n*n*4),s=new Float32Array(n*n*4),o=e===r.INCOMING?a.groupedSourceToTargetLinks:a.groupedTargetToSourceLinks;this.maxPointDegree=0;let f=0;o.forEach((e,t)=>{this.linkFirstIndicesAndAmount[4*t+0]=f%n,this.linkFirstIndicesAndAmount[4*t+1]=Math.floor(f/n),this.linkFirstIndicesAndAmount[4*t+2]=e.size,e.forEach(e=>{var r,n;this.indices[4*f+0]=e%i,this.indices[4*f+1]=Math.floor(e/i);let o=null!=(r=a.degree[a.getInputIndexBySortedIndex(e)])?r:0,c=null!=(n=a.degree[a.getInputIndexBySortedIndex(t)])?n:0,d=1/Math.min(o,c);d=Math.sqrt(d),l[4*f+0]=o/(o+c),l[4*f+1]=d,s[4*f]=this.store.getRandomFloat(0,1),f+=1}),this.maxPointDegree=Math.max(this.maxPointDegree,e.size)}),this.linkFirstIndicesAndAmountFbo=t.framebuffer({color:t.texture({data:this.linkFirstIndicesAndAmount,shape:[i,i,4],type:"float"}),depth:!1,stencil:!1}),this.indicesFbo=t.framebuffer({color:t.texture({data:this.indices,shape:[n,n,4],type:"float"}),depth:!1,stencil:!1}),this.biasAndStrengthFbo=t.framebuffer({color:t.texture({data:l,shape:[n,n,4],type:"float"}),depth:!1,stencil:!1}),this.randomDistanceFbo=t.framebuffer({color:t.texture({data:s,shape:[n,n,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){let{reglInstance:e,config:t,store:i,points:r}=this;this.runCommand=e({frag:()=>{var e;return e=this.maxPointDegree,`
#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D position;
uniform float linkSpring;
uniform float linkDistance;
uniform vec2 linkDistRandomVariationRange;

uniform sampler2D linkFirstIndicesAndAmount;
uniform sampler2D linkIndices;
uniform sampler2D linkBiasAndStrength;
uniform sampler2D linkRandomDistanceFbo;

uniform float pointsTextureSize;
uniform float linksTextureSize;
uniform float alpha;

varying vec2 index;

const float MAX_LINKS = ${e}.0;

void main() {
  vec4 pointPosition = texture2D(position, index);
  vec4 velocity = vec4(0.0);

  vec4 linkFirstIJAndAmount = texture2D(linkFirstIndicesAndAmount, index);
  float iCount = linkFirstIJAndAmount.r;
  float jCount = linkFirstIJAndAmount.g;
  float linkAmount = linkFirstIJAndAmount.b;
  if (linkAmount > 0.0) {
    for (float i = 0.0; i < MAX_LINKS; i += 1.0) {
      if (i < linkAmount) {
        if (iCount >= linksTextureSize) {
          iCount = 0.0;
          jCount += 1.0;
        }
        vec2 linkTextureIndex = (vec2(iCount, jCount) + 0.5) / linksTextureSize;
        vec4 connectedPointIndex = texture2D(linkIndices, linkTextureIndex);
        vec4 biasAndStrength = texture2D(linkBiasAndStrength, linkTextureIndex);
        vec4 randomMinDistance = texture2D(linkRandomDistanceFbo, linkTextureIndex);
        float bias = biasAndStrength.r;
        float strength = biasAndStrength.g;
        float randomMinLinkDist = randomMinDistance.r * (linkDistRandomVariationRange.g - linkDistRandomVariationRange.r) + linkDistRandomVariationRange.r;
        randomMinLinkDist *= linkDistance;

        iCount += 1.0;

        vec4 connectedPointPosition = texture2D(position, (connectedPointIndex.rg + 0.5) / pointsTextureSize);
        float x = connectedPointPosition.x - (pointPosition.x + velocity.x);
        float y = connectedPointPosition.y - (pointPosition.y + velocity.y);
        float l = sqrt(x * x + y * y);
        l = max(l, randomMinLinkDist * 0.99);
        l = (l - randomMinLinkDist) / l;
        l *= linkSpring * alpha;
        l *= strength;
        l *= bias;
        x *= l;
        y *= l;
        velocity.x += x;
        velocity.y += y;
      }
    }
  }

  gl_FragColor = vec4(velocity.rg, 0.0, 0.0);
}
  `},vert:P,framebuffer:()=>null==r?void 0:r.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>null==r?void 0:r.previousPositionFbo,linkSpring:()=>{var e;return null==(e=t.simulation)?void 0:e.linkSpring},linkDistance:()=>{var e;return null==(e=t.simulation)?void 0:e.linkDistance},linkDistRandomVariationRange:()=>{var e;return null==(e=t.simulation)?void 0:e.linkDistRandomVariationRange},linkFirstIndicesAndAmount:()=>this.linkFirstIndicesAndAmountFbo,linkIndices:()=>this.indicesFbo,linkBiasAndStrength:()=>this.biasAndStrengthFbo,linkRandomDistanceFbo:()=>this.randomDistanceFbo,pointsTextureSize:()=>i.pointsTextureSize,linksTextureSize:()=>i.linksTextureSize,alpha:()=>i.alpha}})}run(){var e;null==(e=this.runCommand)||e.call(this)}destroy(){H(this.linkFirstIndicesAndAmountFbo),H(this.indicesFbo),H(this.biasAndStrengthFbo),H(this.randomDistanceFbo)}}var N="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",L="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;uniform float levelTextureSize;uniform float cellSize;attribute vec2 indexes;varying vec4 rgba;void main(){vec4 pointPosition=texture2D(position,indexes/pointsTextureSize);rgba=vec4(pointPosition.rg,1.0,0.0);float n=floor(pointPosition.x/cellSize);float m=floor(pointPosition.y/cellSize);vec2 levelPosition=2.0*(vec2(n,m)+0.5)/levelTextureSize-1.0;gl_Position=vec4(levelPosition,0.0,1.0);gl_PointSize=1.0;}";class C extends k{constructor(){super(...arguments),this.levelsFbos=new Map,this.quadtreeLevels=0}create(){let{reglInstance:e,store:t}=this;if(!t.pointsTextureSize)return;this.quadtreeLevels=Math.log2(t.adjustedSpaceSize);for(let t=0;t<this.quadtreeLevels;t+=1){let i=Math.pow(2,t+1);this.levelsFbos.set(`level[${t}]`,e.framebuffer({shape:[i,i],colorType:"float",depth:!1,stencil:!1}))}let i=new Float32Array(t.pointsTextureSize*t.pointsTextureSize*4);for(let e=0;e<t.pointsTextureSize*t.pointsTextureSize;++e)i[4*e]=1e-5*t.getRandomFloat(-1,1),i[4*e+1]=1e-5*t.getRandomFloat(-1,1);this.randomValuesFbo=e.framebuffer({color:e.texture({data:i,shape:[t.pointsTextureSize,t.pointsTextureSize,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){let{reglInstance:e,config:t,store:i,data:r,points:n}=this;this.clearLevelsCommand=e({frag:I,vert:P,framebuffer:(e,t)=>t.levelFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)}}),this.calculateLevelsCommand=e({frag:N,vert:L,framebuffer:(e,t)=>t.levelFbo,primitive:"points",count:()=>r.nodes.length,attributes:{indexes:O(e,i.pointsTextureSize)},uniforms:{position:()=>null==n?void 0:n.previousPositionFbo,pointsTextureSize:()=>i.pointsTextureSize,levelTextureSize:(e,t)=>t.levelTextureSize,cellSize:(e,t)=>t.cellSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.forceCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D levelFbo;uniform float level;uniform float levels;uniform float levelTextureSize;uniform float repulsion;uniform float alpha;uniform float spaceSize;uniform float theta;varying vec2 index;const float MAX_LEVELS_NUM=14.0;vec2 calcAdd(vec2 ij,vec2 pp){vec2 add=vec2(0.0);vec4 centermass=texture2D(levelFbo,ij);if(centermass.r>0.0&&centermass.g>0.0&&centermass.b>0.0){vec2 centermassPosition=vec2(centermass.rg/centermass.b);vec2 distVector=pp-centermassPosition;float l=dot(distVector,distVector);float dist=sqrt(l);if(l>0.0){float angle=atan(distVector.y,distVector.x);float c=alpha*repulsion*centermass.b;float distanceMin2=1.0;if(l<distanceMin2)l=sqrt(distanceMin2*l);float addV=c/sqrt(l);add=addV*vec2(cos(angle),sin(angle));}}return add;}void main(){vec4 pointPosition=texture2D(position,index);float x=pointPosition.x;float y=pointPosition.y;float left=0.0;float top=0.0;float right=spaceSize;float bottom=spaceSize;float n_left=0.0;float n_top=0.0;float n_right=0.0;float n_bottom=0.0;float cellSize=0.0;for(float i=0.0;i<MAX_LEVELS_NUM;i+=1.0){if(i<=level){left+=cellSize*n_left;top+=cellSize*n_top;right-=cellSize*n_right;bottom-=cellSize*n_bottom;cellSize=pow(2.0,levels-i-1.0);float dist_left=x-left;n_left=max(0.0,floor(dist_left/cellSize-theta));float dist_top=y-top;n_top=max(0.0,floor(dist_top/cellSize-theta));float dist_right=right-x;n_right=max(0.0,floor(dist_right/cellSize-theta));float dist_bottom=bottom-y;n_bottom=max(0.0,floor(dist_bottom/cellSize-theta));}}vec4 velocity=vec4(vec2(0.0),1.0,0.0);for(float i=0.0;i<12.0;i+=1.0){for(float j=0.0;j<4.0;j+=1.0){float n=left+cellSize*j;float m=top+cellSize*n_top+cellSize*i;if(n<(left+n_left*cellSize)&&m<bottom){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}n=left+cellSize*i;m=top+cellSize*j;if(n<(right-n_right*cellSize)&&m<(top+n_top*cellSize)){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}n=right-n_right*cellSize+cellSize*j;m=top+cellSize*i;if(n<right&&m<(bottom-n_bottom*cellSize)){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}n=left+n_left*cellSize+cellSize*i;m=bottom-n_bottom*cellSize+cellSize*j;if(n<right&&m<bottom){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}}}gl_FragColor=velocity;}",vert:P,framebuffer:()=>null==n?void 0:n.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>null==n?void 0:n.previousPositionFbo,level:(e,t)=>t.level,levels:this.quadtreeLevels,levelFbo:(e,t)=>t.levelFbo,levelTextureSize:(e,t)=>t.levelTextureSize,alpha:()=>i.alpha,repulsion:()=>{var e;return null==(e=t.simulation)?void 0:e.repulsion},spaceSize:()=>i.adjustedSpaceSize,theta:()=>{var e;return null==(e=t.simulation)?void 0:e.repulsionTheta}},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.forceFromItsOwnCentermassCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D levelFbo;uniform sampler2D randomValues;uniform float levelTextureSize;uniform float repulsion;uniform float alpha;varying vec2 index;vec2 calcAdd(vec2 ij,vec2 pp){vec2 add=vec2(0.0);vec4 centermass=texture2D(levelFbo,ij);if(centermass.r>0.0&&centermass.g>0.0&&centermass.b>0.0){vec2 centermassPosition=vec2(centermass.rg/centermass.b);vec2 distVector=pp-centermassPosition;float l=dot(distVector,distVector);float dist=sqrt(l);if(l>0.0){float angle=atan(distVector.y,distVector.x);float c=alpha*repulsion*centermass.b;float distanceMin2=1.0;if(l<distanceMin2)l=sqrt(distanceMin2*l);float addV=c/sqrt(l);add=addV*vec2(cos(angle),sin(angle));}}return add;}void main(){vec4 pointPosition=texture2D(position,index);vec4 random=texture2D(randomValues,index);vec4 velocity=vec4(0.0);velocity.xy+=calcAdd(pointPosition.xy/levelTextureSize,pointPosition.xy);velocity.xy+=velocity.xy*random.rg;gl_FragColor=velocity;}",vert:P,framebuffer:()=>null==n?void 0:n.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>null==n?void 0:n.previousPositionFbo,randomValues:()=>this.randomValuesFbo,levelFbo:(e,t)=>t.levelFbo,levelTextureSize:(e,t)=>t.levelTextureSize,alpha:()=>i.alpha,repulsion:()=>{var e;return null==(e=t.simulation)?void 0:e.repulsion},spaceSize:()=>i.adjustedSpaceSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.clearVelocityCommand=e({frag:I,vert:P,framebuffer:()=>null==n?void 0:n.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)}})}run(){var e,t,i,r,n;let{store:a}=this;for(let i=0;i<this.quadtreeLevels;i+=1){null==(e=this.clearLevelsCommand)||e.call(this,{levelFbo:this.levelsFbos.get(`level[${i}]`)});let r=Math.pow(2,i+1),n=a.adjustedSpaceSize/r;null==(t=this.calculateLevelsCommand)||t.call(this,{levelFbo:this.levelsFbos.get(`level[${i}]`),levelTextureSize:r,cellSize:n})}null==(i=this.clearVelocityCommand)||i.call(this);for(let e=0;e<this.quadtreeLevels;e+=1){let t=Math.pow(2,e+1);null==(r=this.forceCommand)||r.call(this,{levelFbo:this.levelsFbos.get(`level[${e}]`),levelTextureSize:t,level:e}),e===this.quadtreeLevels-1&&(null==(n=this.forceFromItsOwnCentermassCommand)||n.call(this,{levelFbo:this.levelsFbos.get(`level[${e}]`),levelTextureSize:t,level:e}))}}destroy(){H(this.randomValuesFbo),this.levelsFbos.forEach(e=>{H(e)}),this.levelsFbos.clear()}}class V extends k{constructor(){super(...arguments),this.levelsFbos=new Map,this.quadtreeLevels=0}create(){let{reglInstance:e,store:t}=this;if(!t.pointsTextureSize)return;this.quadtreeLevels=Math.log2(t.adjustedSpaceSize);for(let t=0;t<this.quadtreeLevels;t+=1){let i=Math.pow(2,t+1);this.levelsFbos.set(`level[${t}]`,e.framebuffer({color:e.texture({data:new Float32Array(i*i*4),shape:[i,i,4],type:"float"}),depth:!1,stencil:!1}))}let i=new Float32Array(t.pointsTextureSize*t.pointsTextureSize*4);for(let e=0;e<t.pointsTextureSize*t.pointsTextureSize;++e)i[4*e]=1e-5*t.getRandomFloat(-1,1),i[4*e+1]=1e-5*t.getRandomFloat(-1,1);this.randomValuesFbo=e.framebuffer({color:e.texture({data:i,shape:[t.pointsTextureSize,t.pointsTextureSize,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){var e,t;let{reglInstance:i,config:r,store:n,data:a,points:l}=this;this.clearLevelsCommand=i({frag:I,vert:P,framebuffer:(e,t)=>t.levelFbo,primitive:"triangle strip",count:4,attributes:{quad:W(i)}}),this.calculateLevelsCommand=i({frag:N,vert:L,framebuffer:(e,t)=>t.levelFbo,primitive:"points",count:()=>a.nodes.length,attributes:{indexes:O(i,n.pointsTextureSize)},uniforms:{position:()=>null==l?void 0:l.previousPositionFbo,pointsTextureSize:()=>n.pointsTextureSize,levelTextureSize:(e,t)=>t.levelTextureSize,cellSize:(e,t)=>t.cellSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.quadtreeCommand=i({frag:function(e,t){e=Math.min(e,t);let i=t-e,r=`
    float dist = sqrt(l);
    if (dist > 0.0) {
      float c = alpha * repulsion * centermass.b;
      addVelocity += calcAdd(vec2(x, y), l, c);
      addVelocity += addVelocity * random.rg;
    }
  `;return`
#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D position;
uniform sampler2D randomValues;
uniform float spaceSize;
uniform float repulsion;
uniform float theta;
uniform float alpha;
uniform sampler2D level[${t}];
varying vec2 index;

vec2 calcAdd(vec2 xy, float l, float c) {
  float distanceMin2 = 1.0;
  if (l < distanceMin2) l = sqrt(distanceMin2 * l);
  float add = c / l;
  return add * xy;
}

void main() {
  vec4 pointPosition = texture2D(position, index);
  vec4 random = texture2D(randomValues, index);

  float width0 = spaceSize;

  vec2 velocity = vec2(0.0);
  vec2 addVelocity = vec2(0.0);

  ${Array(t).fill(0).map((e,t)=>`float width${t+1} = width${t} / 2.0;`).join("\n")}

  for (float n = 0.0; n < pow(2.0, ${i}.0); n += 1.0) {
    for (float m = 0.0; m < pow(2.0, ${i}.0); m += 1.0) {
      ${function n(a){if(a>=t)return r;{let t=Math.pow(2,a+1),l=Array(a+1-i).fill(0).map((e,t)=>`pow(2.0, ${a-(t+i)}.0) * i${t+i}`).join("+"),s=Array(a+1-i).fill(0).map((e,t)=>`pow(2.0, ${a-(t+i)}.0) * j${t+i}`).join("+");return`
      for (float ij${a} = 0.0; ij${a} < 4.0; ij${a} += 1.0) {
        float i${a} = 0.0;
        float j${a} = 0.0;
        if (ij${a} == 1.0 || ij${a} == 3.0) i${a} = 1.0;
        if (ij${a} == 2.0 || ij${a} == 3.0) j${a} = 1.0;
        float i = pow(2.0, ${e}.0) * n / width${a+1} + ${l};
        float j = pow(2.0, ${e}.0) * m / width${a+1} + ${s};
        float groupPosX = (i + 0.5) / ${t}.0;
        float groupPosY = (j + 0.5) / ${t}.0;
        
        vec4 centermass = texture2D(level[${a}], vec2(groupPosX, groupPosY));
        if (centermass.r > 0.0 && centermass.g > 0.0 && centermass.b > 0.0) {
          float x = centermass.r / centermass.b - pointPosition.r;
          float y = centermass.g / centermass.b - pointPosition.g;
          float l = x * x + y * y;
          if ((width${a+1} * width${a+1}) / theta < l) {
            ${r}
          } else {
            ${n(a+1)}
          }
        }
      }
      `}}(i)}
    }
  }

  velocity -= addVelocity;

  gl_FragColor = vec4(velocity, 0.0, 0.0);
}
`}(null!=(t=null==(e=r.simulation)?void 0:e.repulsionQuadtreeLevels)?t:this.quadtreeLevels,this.quadtreeLevels),vert:P,framebuffer:()=>null==l?void 0:l.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(i)},uniforms:{position:()=>null==l?void 0:l.previousPositionFbo,randomValues:()=>this.randomValuesFbo,spaceSize:()=>n.adjustedSpaceSize,repulsion:()=>{var e;return null==(e=r.simulation)?void 0:e.repulsion},theta:()=>{var e;return null==(e=r.simulation)?void 0:e.repulsionTheta},alpha:()=>n.alpha,...Object.fromEntries(this.levelsFbos)}})}run(){var e,t,i;let{store:r}=this;for(let i=0;i<this.quadtreeLevels;i+=1){null==(e=this.clearLevelsCommand)||e.call(this,{levelFbo:this.levelsFbos.get(`level[${i}]`)});let n=Math.pow(2,i+1),a=r.adjustedSpaceSize/n;null==(t=this.calculateLevelsCommand)||t.call(this,{levelFbo:this.levelsFbos.get(`level[${i}]`),levelTextureSize:n,cellSize:a})}null==(i=this.quadtreeCommand)||i.call(this)}destroy(){H(this.randomValuesFbo),this.levelsFbos.forEach(e=>{H(e)}),this.levelsFbos.clear()}}class D extends k{initPrograms(){let{reglInstance:e,config:t,store:i,points:r}=this;this.runCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float repulsion;uniform vec2 mousePos;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 velocity=vec4(0.0);vec2 mouse=mousePos;vec2 distVector=mouse-pointPosition.rg;float dist=sqrt(dot(distVector,distVector));dist=max(dist,10.0);float angle=atan(distVector.y,distVector.x);float addV=100.0*repulsion/(dist*dist);velocity.rg-=addV*vec2(cos(angle),sin(angle));gl_FragColor=velocity;}",vert:P,framebuffer:()=>null==r?void 0:r.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>null==r?void 0:r.previousPositionFbo,mousePos:()=>i.mousePosition,repulsion:()=>{var e;return null==(e=t.simulation)?void 0:e.repulsionFromMouse}}})}run(){var e;null==(e=this.runCommand)||e.call(this)}}"undefined"!=typeof globalThis||("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);var G={exports:{}};!function(e,t){e.exports=function(){class e{constructor(e,t={}){this.css="#gl-bench {\n  position:absolute;\n  left:0;\n  top:0;\n  z-index:1000;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n}\n\n#gl-bench div {\n  position: relative;\n  display: block;\n  margin: 4px;\n  padding: 0 7px 0 10px;\n  background: #6c6;\n  border-radius: 15px;\n  cursor: pointer;\n  opacity: 0.9;\n}\n\n#gl-bench svg {\n  height: 60px;\n  margin: 0 -1px;\n}\n\n#gl-bench text {\n  font-size: 12px;\n  font-family: Helvetica,Arial,sans-serif;\n  font-weight: 700;\n  dominant-baseline: middle;\n  text-anchor: middle;\n}\n\n#gl-bench .gl-mem {\n  font-size: 9px;\n}\n\n#gl-bench line {\n  stroke-width: 5;\n  stroke: #112211;\n  stroke-linecap: round;\n}\n\n#gl-bench polyline {\n  fill: none;\n  stroke: #112211;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 3.5;\n}\n\n#gl-bench rect {\n  fill: #448844;\n}\n\n#gl-bench .opacity {\n  stroke: #448844;\n}\n",this.svg='<div class="gl-box">\n  <svg viewBox="0 0 55 60">\n    <text x="27" y="56" class="gl-fps">00 FPS</text>\n    <text x="28" y="8" class="gl-mem"></text>\n    <rect x="0" y="14" rx="4" ry="4" width="55" height="32"></rect>\n    <polyline class="gl-chart"></polyline>\n  </svg>\n  <svg viewBox="0 0 14 60" class="gl-cpu-svg">\n    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>\n    <line x1="7" y1="38" x2="7" y2="11" class="gl-cpu" stroke-dasharray="0 27"/>\n    <path d="M5.35 43c-.464 0-.812.377-.812.812v1.16c-.783.1972-1.421.812-1.595 1.624h-1.16c-.435 0-.812.348-.812.812s.348.812.812.812h1.102v1.653H1.812c-.464 0-.812.377-.812.812 0 .464.377.812.812.812h1.131c.1943.783.812 1.392 1.595 1.595v1.131c0 .464.377.812.812.812.464 0 .812-.377.812-.812V53.15h1.653v1.073c0 .464.377.812.812.812.464 0 .812-.377.812-.812v-1.131c.783-.1943 1.392-.812 1.595-1.595h1.131c.464 0 .812-.377.812-.812 0-.464-.377-.812-.812-.812h-1.073V48.22h1.102c.435 0 .812-.348.812-.812s-.348-.812-.812-.812h-1.16c-.1885-.783-.812-1.421-1.595-1.624v-1.131c0-.464-.377-.812-.812-.812-.464 0-.812.377-.812.812v1.073H6.162v-1.073c0-.464-.377-.812-.812-.812zm.58 3.48h2.088c.754 0 1.363.609 1.363 1.363v2.088c0 .754-.609 1.363-1.363 1.363H5.93c-.754 0-1.363-.609-1.363-1.363v-2.088c0-.754.609-1.363 1.363-1.363z"/>\n  </svg>\n  <svg viewBox="0 0 14 60" class="gl-gpu-svg">\n    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>\n    <line x1="7" y1="38" x2="7" y2="11" class="gl-gpu" stroke-dasharray="0 27"/>\n    <path d="M1.94775 43.3772a.736.736 0 10-.00416 1.472c.58535.00231.56465.1288.6348.3197.07015.18975.04933.43585.04933.43585l-.00653.05405v8.671a.736.736 0 101.472 0v-1.4145c.253.09522.52785.1495.81765.1495h5.267c1.2535 0 2.254-.9752 2.254-2.185v-3.105c0-1.2075-1.00625-2.185-2.254-2.185h-5.267c-.28865 0-.5635.05405-.8165.1495.01806-.16445.04209-.598-.1357-1.0787-.22425-.6072-.9499-1.2765-2.0125-1.2765zm2.9095 3.6455c.42435 0 .7659.36225.7659.8119v2.9785c0 .44965-.34155.8119-.7659.8119s-.7659-.36225-.7659-.8119v-2.9785c0-.44965.34155-.8119.7659-.8119zm4.117 0a2.3 2.3 0 012.3 2.3 2.3 2.3 0 01-2.3 2.3 2.3 2.3 0 01-2.3-2.3 2.3 2.3 0 012.3-2.3z"/>\n  </svg>\n</div>',this.paramLogger=()=>{},this.chartLogger=()=>{},this.chartLen=20,this.chartHz=20,this.names=[],this.cpuAccums=[],this.gpuAccums=[],this.activeAccums=[],this.chart=Array(this.chartLen),this.now=()=>performance&&performance.now?performance.now():Date.now(),this.updateUI=()=>{[].forEach.call(this.nodes["gl-gpu-svg"],e=>{e.style.display=this.trackGPU?"inline":"none"})},Object.assign(this,t),this.detected=0,this.finished=[],this.isFramebuffer=0,this.frameId=0;let i,r=0,n,a=e=>{++r<20?i=requestAnimationFrame(a):(this.detected=Math.ceil(1e3*r/(e-n)/70),cancelAnimationFrame(i)),n||(n=e)};if(requestAnimationFrame(a),e){let t,i,r=async(t,i)=>Promise.resolve(setTimeout(()=>{e.getError();let r=this.now()-t;i.forEach((e,t)=>{e&&(this.gpuAccums[t]+=r)})},0)),n=(e,t,i)=>function(){let n=t.now();e.apply(i,arguments),t.trackGPU&&t.finished.push(r(n,t.activeAccums.slice(0)))};["drawArrays","drawElements","drawArraysInstanced","drawBuffers","drawElementsInstanced","drawRangeElements"].forEach(t=>{e[t]&&(e[t]=n(e[t],this,e))}),t=e.getExtension,i=this,e.getExtension=function(){let r=t.apply(e,arguments);return r&&["drawElementsInstancedANGLE","drawBuffersWEBGL"].forEach(e=>{r[e]&&(r[e]=n(r[e],i,r))}),r}}if(!this.withoutUI){var l;let e;this.dom||(this.dom=document.body);let t=document.createElement("div");t.id="gl-bench",this.dom.appendChild(t),this.dom.insertAdjacentHTML("afterbegin",'<style id="gl-bench-style">'+this.css+"</style>"),this.dom=t,this.dom.addEventListener("click",()=>{this.trackGPU=!this.trackGPU,this.updateUI()}),this.paramLogger=((e,t,i)=>{let r=["gl-cpu","gl-gpu","gl-mem","gl-fps","gl-gpu-svg","gl-chart"],n=Object.assign({},r);return r.forEach(e=>n[e]=t.getElementsByClassName(e)),this.nodes=n,(t,r,a,l,s,o,f)=>{n["gl-cpu"][t].style.strokeDasharray=(.27*r).toFixed(0)+" 100",n["gl-gpu"][t].style.strokeDasharray=(.27*a).toFixed(0)+" 100",n["gl-mem"][t].innerHTML=i[t]?i[t]:l?"mem: "+l.toFixed(0)+"mb":"",n["gl-fps"][t].innerHTML=s.toFixed(0)+" FPS",e(i[t],r,a,l,s,o,f)}})(this.paramLogger,this.dom,this.names),this.chartLogger=(l=this.chartLogger,e={"gl-chart":this.dom.getElementsByClassName("gl-chart")},(t,i,r)=>{let n="",a=i.length;for(let e=0;e<a;e++){let t=(r+e+1)%a;void 0!=i[t]&&(n=n+" "+(55*e/(a-1)).toFixed(1)+","+(45-22*i[t]/60/this.detected).toFixed(1))}e["gl-chart"][t].setAttribute("points",n),l(this.names[t],i,r)})}}addUI(e){-1==this.names.indexOf(e)&&(this.names.push(e),this.dom&&(this.dom.insertAdjacentHTML("beforeend",this.svg),this.updateUI()),this.cpuAccums.push(0),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFrame(e){this.frameId++;let t=e||this.now();if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=t;else{let e=t-this.paramTime;if(e>=1e3){let i=this.frameId-this.paramFrame,r=i/e*1e3;for(let t=0;t<this.names.length;t++){let n=this.cpuAccums[t]/e*100,a=this.gpuAccums[t]/e*100,l=performance&&performance.memory?performance.memory.usedJSHeapSize/1048576:0;this.paramLogger(t,n,a,l,r,e,i),this.cpuAccums[t]=0,Promise.all(this.finished).then(()=>{this.gpuAccums[t]=0,this.finished=[]})}this.paramFrame=this.frameId,this.paramTime=t}}if(this.detected&&this.chartFrame){let e=t-this.chartTime,i=this.chartHz*e/1e3;for(;--i>0&&this.detected;){let i=(this.frameId-this.chartFrame)/e*1e3;this.chart[this.circularId%this.chartLen]=i;for(let e=0;e<this.names.length;e++)this.chartLogger(e,this.chart,this.circularId);this.circularId++,this.chartFrame=this.frameId,this.chartTime=t}}else this.chartFrame=this.frameId,this.chartTime=t,this.circularId=0}begin(e){this.updateAccums(e)}end(e){this.updateAccums(e)}updateAccums(e){let t=this.names.indexOf(e);-1==t&&(t=this.names.length,this.addUI(e));let i=this.now(),r=i-this.t0;for(let e=0;e<t+1;e++)this.activeAccums[e]&&(this.cpuAccums[e]+=r);this.activeAccums[t]=!this.activeAccums[t],this.t0=i}}return e}()}(G);var R=G.exports;let q=`
  #gl-bench {
    position:absolute;
    right:0;
    top:0;
    z-index:1000;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  #gl-bench div {
    position: relative;
    display: block;
    margin: 4px;
    padding: 0 7px 0 10px;
    background: #5f69de;
    border-radius: 15px;
    cursor: pointer;
    opacity: 0.9;
  }
  #gl-bench svg {
    height: 60px;
    margin: 0 -1px;
  }
  #gl-bench text {
    font-size: 12px;
    font-family: Helvetica,Arial,sans-serif;
    font-weight: 700;
    dominant-baseline: middle;
    text-anchor: middle;
  }
  #gl-bench .gl-mem {
    font-size: 9px;
  }
  #gl-bench line {
    stroke-width: 5;
    stroke: #112211;
    stroke-linecap: round;
  }
  #gl-bench polyline {
    fill: none;
    stroke: #112211;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 3.5;
  }
  #gl-bench rect {
    fill: #8288e4;
  }
  #gl-bench .opacity {
    stroke: #8288e4;
  }
`;class j{constructor(e){this.destroy();let t=e.getContext("webgl")||e.getContext("experimental-webgl");this.bench=new R(t,{css:q})}begin(){var e;null==(e=this.bench)||e.begin("frame")}end(e){var t,i;null==(t=this.bench)||t.end("frame"),null==(i=this.bench)||i.nextFrame(e)}destroy(){this.bench=void 0,(0,n.A)("#gl-bench").remove()}}class Z{constructor(){this.completeLinks=new Set,this.degree=[],this.groupedSourceToTargetLinks=new Map,this.groupedTargetToSourceLinks=new Map,this._nodes=[],this._links=[],this.idToNodeMap=new Map,this.sortedIndexToInputIndexMap=new Map,this.inputIndexToSortedIndexMap=new Map,this.idToSortedIndexMap=new Map,this.inputIndexToIdMap=new Map,this.idToIndegreeMap=new Map,this.idToOutdegreeMap=new Map}get nodes(){return this._nodes}get links(){return this._links}get linksNumber(){return this.completeLinks.size}setData(e,t){this.idToNodeMap.clear(),this.idToSortedIndexMap.clear(),this.inputIndexToIdMap.clear(),this.idToIndegreeMap.clear(),this.idToOutdegreeMap.clear(),e.forEach((e,t)=>{this.idToNodeMap.set(e.id,e),this.inputIndexToIdMap.set(t,e.id),this.idToIndegreeMap.set(e.id,0),this.idToOutdegreeMap.set(e.id,0)}),this.completeLinks.clear(),t.forEach(e=>{let t=this.idToNodeMap.get(e.source),i=this.idToNodeMap.get(e.target);if(void 0!==t&&void 0!==i){this.completeLinks.add(e);let r=this.idToOutdegreeMap.get(t.id);void 0!==r&&this.idToOutdegreeMap.set(t.id,r+1);let n=this.idToIndegreeMap.get(i.id);void 0!==n&&this.idToIndegreeMap.set(i.id,n+1)}}),this.degree=Array(e.length),e.forEach((e,t)=>{let i=this.idToOutdegreeMap.get(e.id),r=this.idToIndegreeMap.get(e.id);this.degree[t]=(null!=i?i:0)+(null!=r?r:0)}),this.sortedIndexToInputIndexMap.clear(),this.inputIndexToSortedIndexMap.clear(),Object.entries(this.degree).sort((e,t)=>e[1]-t[1]).forEach(([e],t)=>{let i=+e;this.sortedIndexToInputIndexMap.set(t,i),this.inputIndexToSortedIndexMap.set(i,t),this.idToSortedIndexMap.set(this.inputIndexToIdMap.get(i),t)}),this.groupedSourceToTargetLinks.clear(),this.groupedTargetToSourceLinks.clear(),t.forEach(e=>{let t=this.idToSortedIndexMap.get(e.source),i=this.idToSortedIndexMap.get(e.target);if(void 0!==t&&void 0!==i){void 0===this.groupedSourceToTargetLinks.get(t)&&this.groupedSourceToTargetLinks.set(t,new Set);let e=this.groupedSourceToTargetLinks.get(t);null==e||e.add(i),void 0===this.groupedTargetToSourceLinks.get(i)&&this.groupedTargetToSourceLinks.set(i,new Set);let r=this.groupedTargetToSourceLinks.get(i);null==r||r.add(t)}}),this._nodes=e,this._links=t}getNodeById(e){return this.idToNodeMap.get(e)}getNodeByIndex(e){return this._nodes[e]}getSortedIndexByInputIndex(e){return this.inputIndexToSortedIndexMap.get(e)}getInputIndexBySortedIndex(e){return this.sortedIndexToInputIndexMap.get(e)}getSortedIndexById(e){return void 0!==e?this.idToSortedIndexMap.get(e):void 0}getInputIndexById(e){if(void 0===e)return;let t=this.getSortedIndexById(e);if(void 0!==t)return this.getInputIndexBySortedIndex(t)}getAdjacentNodes(e){var t,i;let r=this.getSortedIndexById(e);if(void 0!==r)return[...new Set([...null!=(t=this.groupedSourceToTargetLinks.get(r))?t:[],...null!=(i=this.groupedTargetToSourceLinks.get(r))?i:[]])].map(e=>this.getNodeByIndex(this.getInputIndexBySortedIndex(e)))}}let Y=e=>{let t=(0,o.Ay)().exponent(2).range([0,1]).domain([-1,1]),i=(0,c.A)(0,e).map(t=>-.5+t/e);i.push(.5);let r=Array(2*i.length);return i.forEach((e,i)=>{r[2*i]=[t(2*e),.5],r[2*i+1]=[t(2*e),-.5]}),r};class $ extends k{create(){this.updateColor(),this.updateWidth(),this.updateArrow(),this.updateCurveLineGeometry()}initPrograms(){let{reglInstance:e,config:t,store:i,data:r,points:n}=this,{pointsTextureSize:a}=i,l=[];r.completeLinks.forEach(e=>{let t=r.getSortedIndexById(e.target),i=r.getSortedIndexById(e.source),n=Math.floor(i/a),s=Math.floor(t/a);l.push([i%a,n]),l.push([t%a,s])});let s=e.buffer(l);this.drawCurveCommand=e({vert:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 position,pointA,pointB;attribute vec4 color;attribute float width;attribute float arrow;uniform sampler2D positions;uniform sampler2D particleGreyoutStatus;uniform mat3 transform;uniform float pointsTextureSize;uniform float widthScale;uniform float nodeSizeScale;uniform float arrowSizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float ratio;uniform vec2 linkVisibilityDistanceRange;uniform float linkVisibilityMinTransparency;uniform float greyoutOpacity;uniform bool scaleNodesOnZoom;uniform float curvedWeight;uniform float curvedLinkControlPointDistance;uniform float curvedLinkSegments;varying vec4 rgbaColor;varying vec2 pos;varying float arrowLength;varying float linkWidthArrowWidthRatio;varying float smoothWidthRatio;varying float useArrow;float map(float value,float min1,float max1,float min2,float max2){return min2+(value-min1)*(max2-min2)/(max1-min1);}vec2 conicParametricCurve(vec2 A,vec2 B,vec2 ControlPoint,float t,float w){vec2 divident=(1.0-t)*(1.0-t)*A+2.0*(1.0-t)*t*w*ControlPoint+t*t*B;float divisor=(1.0-t)*(1.0-t)+2.0*(1.0-t)*t*w+t*t;return divident/divisor;}void main(){pos=position;vec2 pointTexturePosA=(pointA+0.5)/pointsTextureSize;vec2 pointTexturePosB=(pointB+0.5)/pointsTextureSize;vec4 greyoutStatusA=texture2D(particleGreyoutStatus,pointTexturePosA);vec4 greyoutStatusB=texture2D(particleGreyoutStatus,pointTexturePosB);vec4 pointPositionA=texture2D(positions,pointTexturePosA);vec4 pointPositionB=texture2D(positions,pointTexturePosB);vec2 a=pointPositionA.xy;vec2 b=pointPositionB.xy;vec2 xBasis=b-a;vec2 yBasis=normalize(vec2(-xBasis.y,xBasis.x));float linkDist=length(xBasis);float h=curvedLinkControlPointDistance;vec2 controlPoint=(a+b)/2.0+yBasis*linkDist*h;float linkDistPx=linkDist*transform[0][0];float linkWidth=width*widthScale;float k=2.0;float arrowWidth=max(5.0,linkWidth*k);arrowWidth*=arrowSizeScale;float arrowWidthPx=arrowWidth/transform[0][0];arrowLength=min(0.3,(0.866*arrowWidthPx*2.0)/linkDist);float smoothWidth=2.0;float arrowExtraWidth=arrowWidth-linkWidth;linkWidth+=smoothWidth/2.0;useArrow=arrow;if(useArrow>0.5){linkWidth+=arrowExtraWidth;}smoothWidthRatio=smoothWidth/linkWidth;linkWidthArrowWidthRatio=arrowExtraWidth/linkWidth;float linkWidthPx=linkWidth/transform[0][0];vec3 rgbColor=color.rgb;float opacity=color.a*max(linkVisibilityMinTransparency,map(linkDistPx,linkVisibilityDistanceRange.g,linkVisibilityDistanceRange.r,0.0,1.0));if(greyoutStatusA.r>0.0||greyoutStatusB.r>0.0){opacity*=greyoutOpacity;}rgbaColor=vec4(rgbColor,opacity);float t=position.x;float w=curvedWeight;float tPrev=t-1.0/curvedLinkSegments;float tNext=t+1.0/curvedLinkSegments;vec2 pointCurr=conicParametricCurve(a,b,controlPoint,t,w);vec2 pointPrev=conicParametricCurve(a,b,controlPoint,max(0.0,tPrev),w);vec2 pointNext=conicParametricCurve(a,b,controlPoint,min(tNext,1.0),w);vec2 xBasisCurved=pointNext-pointPrev;vec2 yBasisCurved=normalize(vec2(-xBasisCurved.y,xBasisCurved.x));pointCurr+=yBasisCurved*linkWidthPx*position.y;vec2 p=2.0*pointCurr/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);gl_Position=vec4(final.rg,0,1);}",frag:"precision highp float;\n#define GLSLIFY 1\nvarying vec4 rgbaColor;varying vec2 pos;varying float arrowLength;varying float linkWidthArrowWidthRatio;varying float smoothWidthRatio;varying float useArrow;float map(float value,float min1,float max1,float min2,float max2){return min2+(value-min1)*(max2-min2)/(max1-min1);}void main(){float opacity=1.0;vec3 color=rgbaColor.rgb;float smoothDelta=smoothWidthRatio/2.0;if(useArrow>0.5){float end_arrow=0.5+arrowLength/2.0;float start_arrow=end_arrow-arrowLength;float arrowWidthDelta=linkWidthArrowWidthRatio/2.0;float linkOpacity=rgbaColor.a*smoothstep(0.5-arrowWidthDelta,0.5-arrowWidthDelta-smoothDelta,abs(pos.y));float arrowOpacity=1.0;if(pos.x>start_arrow&&pos.x<start_arrow+arrowLength){float xmapped=map(pos.x,start_arrow,end_arrow,0.0,1.0);arrowOpacity=rgbaColor.a*smoothstep(xmapped-smoothDelta,xmapped,map(abs(pos.y),0.5,0.0,0.0,1.0));if(linkOpacity!=arrowOpacity){linkOpacity+=arrowOpacity;}}opacity=linkOpacity;}else opacity=rgbaColor.a*smoothstep(0.5,0.5-smoothDelta,abs(pos.y));gl_FragColor=vec4(color,opacity);}",attributes:{position:{buffer:()=>this.curveLineBuffer,divisor:0},pointA:{buffer:()=>s,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:4*Float32Array.BYTES_PER_ELEMENT},pointB:{buffer:()=>s,divisor:1,offset:2*Float32Array.BYTES_PER_ELEMENT,stride:4*Float32Array.BYTES_PER_ELEMENT},color:{buffer:()=>this.colorBuffer,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:4*Float32Array.BYTES_PER_ELEMENT},width:{buffer:()=>this.widthBuffer,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:+Float32Array.BYTES_PER_ELEMENT},arrow:{buffer:()=>this.arrowBuffer,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:+Float32Array.BYTES_PER_ELEMENT}},uniforms:{positions:()=>null==n?void 0:n.currentPositionFbo,particleGreyoutStatus:()=>null==n?void 0:n.greyoutStatusFbo,transform:()=>i.transform,pointsTextureSize:()=>i.pointsTextureSize,nodeSizeScale:()=>t.nodeSizeScale,widthScale:()=>t.linkWidthScale,arrowSizeScale:()=>t.linkArrowsSizeScale,spaceSize:()=>i.adjustedSpaceSize,screenSize:()=>i.screenSize,ratio:()=>t.pixelRatio,linkVisibilityDistanceRange:()=>t.linkVisibilityDistanceRange,linkVisibilityMinTransparency:()=>t.linkVisibilityMinTransparency,greyoutOpacity:()=>t.linkGreyoutOpacity,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,curvedWeight:()=>t.curvedLinkWeight,curvedLinkControlPointDistance:()=>t.curvedLinkControlPointDistance,curvedLinkSegments:()=>{var e;return t.curvedLinks?null!=(e=t.curvedLinkSegments)?e:g.curvedLinkSegments:1}},cull:{enable:!0,face:"back"},blend:{enable:!0,func:{dstRGB:"one minus src alpha",srcRGB:"src alpha",dstAlpha:"one minus src alpha",srcAlpha:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},count:()=>{var e,t;return null!=(t=null==(e=this.curveLineGeometry)?void 0:e.length)?t:0},instances:()=>r.linksNumber,primitive:"triangle strip"})}draw(){var e;this.colorBuffer&&this.widthBuffer&&this.curveLineBuffer&&(null==(e=this.drawCurveCommand)||e.call(this))}updateColor(){let{reglInstance:e,config:t,data:i}=this,r=[];i.completeLinks.forEach(e=>{var i;let n=z(null!=(i=S(e,t.linkColor))?i:m);r.push(n)}),this.colorBuffer=e.buffer(r)}updateWidth(){let{reglInstance:e,config:t,data:i}=this,r=[];i.completeLinks.forEach(e=>{let i=S(e,t.linkWidth);r.push([null!=i?i:1])}),this.widthBuffer=e.buffer(r)}updateArrow(){let{reglInstance:e,config:t,data:i}=this,r=[];i.completeLinks.forEach(e=>{var i;let n=null!=(i=S(e,t.linkArrows))?i:g.arrowLinks;r.push([+!!n])}),this.arrowBuffer=e.buffer(r)}updateCurveLineGeometry(){let{reglInstance:e,config:{curvedLinks:t,curvedLinkSegments:i}}=this;this.curveLineGeometry=Y(t?null!=i?i:g.curvedLinkSegments:1),this.curveLineBuffer=e.buffer(this.curveLineGeometry)}destroy(){B(this.colorBuffer),B(this.widthBuffer),B(this.arrowBuffer),B(this.curveLineBuffer)}}class X extends k{constructor(){super(...arguments),this.trackedPositionsById=new Map}create(){var e,t;let{reglInstance:i,store:r,data:n,config:a}=this,{pointsTextureSize:l,adjustedSpaceSize:s}=r;if(!l)return;let o=n.nodes.length,f=new Float32Array(l*l*4);a.disableSimulation||this.rescaleInitialNodePositions();for(let i=0;i<o;++i){let a=this.data.getSortedIndexByInputIndex(i),l=n.nodes[i];l&&void 0!==a&&(f[4*a+0]=null!=(e=l.x)?e:s*r.getRandomFloat(.495,.505),f[4*a+1]=null!=(t=l.y)?t:s*r.getRandomFloat(.495,.505))}this.currentPositionFbo=i.framebuffer({color:i.texture({data:f,shape:[l,l,4],type:"float"}),depth:!1,stencil:!1}),this.config.disableSimulation||(this.previousPositionFbo=i.framebuffer({color:i.texture({data:f,shape:[l,l,4],type:"float"}),depth:!1,stencil:!1}),this.velocityFbo=i.framebuffer({color:i.texture({data:new Float32Array(l*l*4).fill(0),shape:[l,l,4],type:"float"}),depth:!1,stencil:!1})),this.selectedFbo=i.framebuffer({color:i.texture({data:f,shape:[l,l,4],type:"float"}),depth:!1,stencil:!1}),this.hoveredFbo=i.framebuffer({shape:[2,2],colorType:"float",depth:!1,stencil:!1}),this.updateSize(),this.updateColor(),this.updateGreyoutStatus(),this.updateSampledNodesGrid()}initPrograms(){let{reglInstance:e,config:t,store:i,data:r}=this;t.disableSimulation||(this.updatePositionCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D velocity;uniform float friction;uniform float spaceSize;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 pointVelocity=texture2D(velocity,index);pointVelocity.rg*=friction;pointPosition.rg+=pointVelocity.rg;pointPosition.r=clamp(pointPosition.r,0.0,spaceSize);pointPosition.g=clamp(pointPosition.g,0.0,spaceSize);gl_FragColor=pointPosition;}",vert:P,framebuffer:()=>this.currentPositionFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>this.previousPositionFbo,velocity:()=>this.velocityFbo,friction:()=>{var e;return null==(e=t.simulation)?void 0:e.friction},spaceSize:()=>i.adjustedSpaceSize}})),this.drawCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec2 index;varying vec3 rgbColor;varying float alpha;const float smoothing=0.9;void main(){if(alpha==0.0){discard;}float r=0.0;float delta=0.0;vec2 cxy=2.0*gl_PointCoord-1.0;r=dot(cxy,cxy);float opacity=alpha*(1.0-smoothstep(smoothing,1.0,r));gl_FragColor=vec4(rgbColor,opacity);}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nattribute vec2 indexes;uniform sampler2D positions;uniform sampler2D particleColor;uniform sampler2D particleGreyoutStatus;uniform sampler2D particleSize;uniform float ratio;uniform mat3 transform;uniform float pointsTextureSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float greyoutOpacity;uniform bool scaleNodesOnZoom;uniform float maxPointSize;varying vec2 index;varying vec3 rgbColor;varying float alpha;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*ratio*transform[0][0];}else{pSize=size*ratio*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize*ratio);}void main(){index=indexes;vec4 pointPosition=texture2D(positions,(index+0.5)/pointsTextureSize);vec2 point=pointPosition.rg;vec2 p=2.0*point/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);gl_Position=vec4(final.rg,0,1);vec4 pSize=texture2D(particleSize,(index+0.5)/pointsTextureSize);float size=pSize.r*sizeScale;vec4 pColor=texture2D(particleColor,(index+0.5)/pointsTextureSize);rgbColor=pColor.rgb;gl_PointSize=pointSize(size);alpha=pColor.a;vec4 greyoutStatus=texture2D(particleGreyoutStatus,(index+0.5)/pointsTextureSize);if(greyoutStatus.r>0.0){alpha*=greyoutOpacity;}}",primitive:"points",count:()=>r.nodes.length,attributes:{indexes:O(e,i.pointsTextureSize)},uniforms:{positions:()=>this.currentPositionFbo,particleColor:()=>this.colorFbo,particleGreyoutStatus:()=>this.greyoutStatusFbo,particleSize:()=>this.sizeFbo,ratio:()=>t.pixelRatio,sizeScale:()=>t.nodeSizeScale,pointsTextureSize:()=>i.pointsTextureSize,transform:()=>i.transform,spaceSize:()=>i.adjustedSpaceSize,screenSize:()=>i.screenSize,greyoutOpacity:()=>t.nodeGreyoutOpacity,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,maxPointSize:()=>i.maxPointSize},blend:{enable:!0,func:{dstRGB:"one minus src alpha",srcRGB:"src alpha",dstAlpha:"one minus src alpha",srcAlpha:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1}}),this.findPointsOnAreaSelectionCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D particleSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float ratio;uniform mat3 transform;uniform vec2 selection[2];uniform bool scaleNodesOnZoom;uniform float maxPointSize;varying vec2 index;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*ratio*transform[0][0];}else{pSize=size*ratio*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize*ratio);}void main(){vec4 pointPosition=texture2D(position,index);vec2 p=2.0*pointPosition.rg/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);vec4 pSize=texture2D(particleSize,index);float size=pSize.r*sizeScale;float left=2.0*(selection[0].x-0.5*pointSize(size))/screenSize.x-1.0;float right=2.0*(selection[1].x+0.5*pointSize(size))/screenSize.x-1.0;float top=2.0*(selection[0].y-0.5*pointSize(size))/screenSize.y-1.0;float bottom=2.0*(selection[1].y+0.5*pointSize(size))/screenSize.y-1.0;gl_FragColor=vec4(0.0,0.0,pointPosition.rg);if(final.x>=left&&final.x<=right&&final.y>=top&&final.y<=bottom){gl_FragColor.r=1.0;}}",vert:P,framebuffer:()=>this.selectedFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>this.currentPositionFbo,particleSize:()=>this.sizeFbo,spaceSize:()=>i.adjustedSpaceSize,screenSize:()=>i.screenSize,sizeScale:()=>t.nodeSizeScale,transform:()=>i.transform,ratio:()=>t.pixelRatio,"selection[0]":()=>i.selectedArea[0],"selection[1]":()=>i.selectedArea[1],scaleNodesOnZoom:()=>t.scaleNodesOnZoom,maxPointSize:()=>i.maxPointSize}}),this.clearHoveredFboCommand=e({frag:I,vert:P,framebuffer:this.hoveredFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)}}),this.findHoveredPointCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;uniform sampler2D particleSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float ratio;uniform mat3 transform;uniform vec2 mousePosition;uniform bool scaleNodesOnZoom;uniform float maxPointSize;attribute vec2 indexes;varying vec4 rgba;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*ratio*transform[0][0];}else{pSize=size*ratio*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize*ratio);}float euclideanDistance(float x1,float x2,float y1,float y2){return sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));}void main(){vec4 pointPosition=texture2D(position,(indexes+0.5)/pointsTextureSize);vec2 p=2.0*pointPosition.rg/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);vec4 pSize=texture2D(particleSize,indexes/pointsTextureSize);float size=pSize.r*sizeScale;float pointRadius=0.5*pointSize(size);vec2 pointScreenPosition=(final.xy+1.0)*screenSize/2.0;rgba=vec4(0.0);gl_Position=vec4(0.5,0.5,0.0,1.0);if(euclideanDistance(pointScreenPosition.x,mousePosition.x,pointScreenPosition.y,mousePosition.y)<pointRadius/ratio){float index=indexes.g*pointsTextureSize+indexes.r;rgba=vec4(index,pSize.r,pointPosition.xy);gl_Position=vec4(-0.5,-0.5,0.0,1.0);}gl_PointSize=1.0;}",primitive:"points",count:()=>r.nodes.length,framebuffer:()=>this.hoveredFbo,attributes:{indexes:O(e,i.pointsTextureSize)},uniforms:{position:()=>this.currentPositionFbo,particleSize:()=>this.sizeFbo,ratio:()=>t.pixelRatio,sizeScale:()=>t.nodeSizeScale,pointsTextureSize:()=>i.pointsTextureSize,transform:()=>i.transform,spaceSize:()=>i.adjustedSpaceSize,screenSize:()=>i.screenSize,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,mousePosition:()=>i.screenMousePosition,maxPointSize:()=>i.maxPointSize},depth:{enable:!1,mask:!1}}),this.clearSampledNodesFboCommand=e({frag:I,vert:P,framebuffer:()=>this.sampledNodesFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)}}),this.fillSampledNodesFboCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;uniform float spaceSize;uniform vec2 screenSize;uniform mat3 transform;attribute vec2 indexes;varying vec4 rgba;void main(){vec4 pointPosition=texture2D(position,(indexes+0.5)/pointsTextureSize);vec2 p=2.0*pointPosition.rg/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);vec2 pointScreenPosition=(final.xy+1.0)*screenSize/2.0;float index=indexes.g*pointsTextureSize+indexes.r;rgba=vec4(index,1.0,pointPosition.xy);float i=(pointScreenPosition.x+0.5)/screenSize.x;float j=(pointScreenPosition.y+0.5)/screenSize.y;gl_Position=vec4(2.0*vec2(i,j)-1.0,0.0,1.0);gl_PointSize=1.0;}",primitive:"points",count:()=>r.nodes.length,framebuffer:()=>this.sampledNodesFbo,attributes:{indexes:O(e,i.pointsTextureSize)},uniforms:{position:()=>this.currentPositionFbo,pointsTextureSize:()=>i.pointsTextureSize,transform:()=>i.transform,spaceSize:()=>i.adjustedSpaceSize,screenSize:()=>i.screenSize},depth:{enable:!1,mask:!1}}),this.drawHighlightedCommand=e({frag:"precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;uniform float width;varying vec2 pos;varying float particleOpacity;const float smoothing=1.05;void main(){vec2 cxy=pos;float r=dot(cxy,cxy);float opacity=smoothstep(r,r*smoothing,1.0);float stroke=smoothstep(width,width*smoothing,r);gl_FragColor=vec4(color.rgb,opacity*stroke*color.a*particleOpacity);}",vert:"precision mediump float;\n#define GLSLIFY 1\nattribute vec2 quad;uniform sampler2D positions;uniform sampler2D particleColor;uniform sampler2D particleGreyoutStatus;uniform sampler2D particleSize;uniform mat3 transform;uniform float pointsTextureSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform bool scaleNodesOnZoom;uniform float pointIndex;uniform float maxPointSize;uniform vec4 color;uniform float greyoutOpacity;varying vec2 pos;varying float particleOpacity;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*transform[0][0];}else{pSize=size*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize);}const float relativeRingRadius=1.3;void main(){pos=quad;vec2 ij=vec2(mod(pointIndex,pointsTextureSize),floor(pointIndex/pointsTextureSize))+0.5;vec4 pointPosition=texture2D(positions,ij/pointsTextureSize);vec4 pSize=texture2D(particleSize,ij/pointsTextureSize);vec4 pColor=texture2D(particleColor,ij/pointsTextureSize);particleOpacity=pColor.a;vec4 greyoutStatus=texture2D(particleGreyoutStatus,ij/pointsTextureSize);if(greyoutStatus.r>0.0){particleOpacity*=greyoutOpacity;}float size=(pointSize(pSize.r*sizeScale)*relativeRingRadius)/transform[0][0];float radius=size*0.5;vec2 a=pointPosition.xy;vec2 b=pointPosition.xy+vec2(0.0,radius);vec2 xBasis=b-a;vec2 yBasis=normalize(vec2(-xBasis.y,xBasis.x));vec2 point=a+xBasis*quad.x+yBasis*radius*quad.y;vec2 p=2.0*point/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);gl_Position=vec4(final.rg,0,1);}",attributes:{quad:W(e)},primitive:"triangle strip",count:4,uniforms:{color:e.prop("color"),width:e.prop("width"),pointIndex:e.prop("pointIndex"),positions:()=>this.currentPositionFbo,particleColor:()=>this.colorFbo,particleSize:()=>this.sizeFbo,sizeScale:()=>t.nodeSizeScale,pointsTextureSize:()=>i.pointsTextureSize,transform:()=>i.transform,spaceSize:()=>i.adjustedSpaceSize,screenSize:()=>i.screenSize,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,maxPointSize:()=>i.maxPointSize,particleGreyoutStatus:()=>this.greyoutStatusFbo,greyoutOpacity:()=>t.nodeGreyoutOpacity},blend:{enable:!0,func:{dstRGB:"one minus src alpha",srcRGB:"src alpha",dstAlpha:"one minus src alpha",srcAlpha:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1}}),this.trackPointsCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D trackedIndices;uniform float pointsTextureSize;varying vec2 index;void main(){vec4 trackedPointIndicies=texture2D(trackedIndices,index);if(trackedPointIndicies.r<0.0)discard;vec4 pointPosition=texture2D(position,(trackedPointIndicies.rg+0.5)/pointsTextureSize);gl_FragColor=vec4(pointPosition.rg,1.0,1.0);}",vert:P,framebuffer:()=>this.trackedPositionsFbo,primitive:"triangle strip",count:4,attributes:{quad:W(e)},uniforms:{position:()=>this.currentPositionFbo,trackedIndices:()=>this.trackedIndicesFbo,pointsTextureSize:()=>i.pointsTextureSize}})}updateColor(){let{reglInstance:e,config:t,store:{pointsTextureSize:i},data:r}=this;i&&(this.colorFbo=function(e,t,i,r){var n;if(0===i)return;let a=new Float32Array(i*i*4);for(let t=0;t<e.nodes.length;++t){let i=e.getSortedIndexByInputIndex(t),l=e.nodes[t];if(l&&void 0!==i){let e=z(null!=(n=S(l,r,t))?n:p);a[4*i+0]=e[0],a[4*i+1]=e[1],a[4*i+2]=e[2],a[4*i+3]=e[3]}}let l=t.texture({data:a,width:i,height:i,type:"float"});return t.framebuffer({color:l,depth:!1,stencil:!1})}(r,e,i,t.nodeColor))}updateGreyoutStatus(){let{reglInstance:e,store:t}=this;this.greyoutStatusFbo=function(e,t,i){if(0===i)return;let r=new Float32Array(i*i*4).fill(+!!e);if(e)for(let t of e)r[4*t]=0;let n=t.texture({data:r,width:i,height:i,type:"float"});return t.framebuffer({color:n,depth:!1,stencil:!1})}(t.selectedIndices,e,t.pointsTextureSize)}updateSize(){let{reglInstance:e,config:t,store:{pointsTextureSize:i},data:r}=this;i&&(this.sizeByIndex=new Float32Array(r.nodes.length),this.sizeFbo=function(e,t,i,r,n){if(0===i)return;let a=e.nodes.length,l=new Float32Array(i*i*4);for(let t=0;t<a;++t){let i=e.getSortedIndexByInputIndex(t),a=e.nodes[t];if(a&&void 0!==i){let e=function(e,t,i){let r=S(e,t,i);return null!=r?r:4}(a,r,t);l[4*i]=e,n[t]=e}}let s=t.texture({data:l,width:i,height:i,type:"float"});return t.framebuffer({color:s,depth:!1,stencil:!1})}(r,e,i,t.nodeSize,this.sizeByIndex))}updateSampledNodesGrid(){let{store:{screenSize:e},config:{nodeSamplingDistance:t},reglInstance:i}=this,r=null!=t?t:Math.min(...e)/2,n=Math.ceil(e[0]/r),a=Math.ceil(e[1]/r);H(this.sampledNodesFbo),this.sampledNodesFbo=i.framebuffer({shape:[n,a],depth:!1,stencil:!1,colorType:"float"})}trackPoints(){var e;this.trackedIndicesFbo&&this.trackedPositionsFbo&&(null==(e=this.trackPointsCommand)||e.call(this))}draw(){var e,t,i;let{config:{renderHoveredNodeRing:r,renderHighlightedNodeRing:n},store:a}=this;null==(e=this.drawCommand)||e.call(this),(null!=r?r:n)&&a.hoveredNode&&(null==(t=this.drawHighlightedCommand)||t.call(this,{width:.85,color:a.hoveredNodeRingColor,pointIndex:a.hoveredNode.index})),a.focusedNode&&(null==(i=this.drawHighlightedCommand)||i.call(this,{width:.75,color:a.focusedNodeRingColor,pointIndex:a.focusedNode.index}))}updatePosition(){var e;null==(e=this.updatePositionCommand)||e.call(this),this.swapFbo()}findPointsOnAreaSelection(){var e;null==(e=this.findPointsOnAreaSelectionCommand)||e.call(this)}findHoveredPoint(){var e,t;null==(e=this.clearHoveredFboCommand)||e.call(this),null==(t=this.findHoveredPointCommand)||t.call(this)}getNodeRadiusByIndex(e){var t;return null==(t=this.sizeByIndex)?void 0:t[e]}trackNodesByIds(e){this.trackedIds=e.length?e:void 0,this.trackedPositionsById.clear();let t=e.map(e=>this.data.getSortedIndexById(e)).filter(e=>void 0!==e);H(this.trackedIndicesFbo),this.trackedIndicesFbo=void 0,H(this.trackedPositionsFbo),this.trackedPositionsFbo=void 0,t.length&&(this.trackedIndicesFbo=function(e,t,i){let r=Math.ceil(Math.sqrt(e.length));if(0===r)return;let n=new Float32Array(r*r*4).fill(-1);for(let[i,r]of e.entries())void 0!==r&&(n[4*i]=r%t,n[4*i+1]=Math.floor(r/t),n[4*i+2]=0,n[4*i+3]=0);let a=i.texture({data:n,width:r,height:r,type:"float"});return i.framebuffer({color:a,depth:!1,stencil:!1})}(t,this.store.pointsTextureSize,this.reglInstance),this.trackedPositionsFbo=function(e,t){let i=Math.ceil(Math.sqrt(e.length));return t.framebuffer({shape:[i,i],depth:!1,stencil:!1,colorType:"float"})}(t,this.reglInstance)),this.trackPoints()}getTrackedPositions(){if(!this.trackedIds)return this.trackedPositionsById;let e=F(this.reglInstance,this.trackedPositionsFbo);return this.trackedIds.forEach((t,i)=>{let r=e[4*i],n=e[4*i+1];void 0!==r&&void 0!==n&&this.trackedPositionsById.set(t,[r,n])}),this.trackedPositionsById}getSampledNodePositionsMap(){var e,t,i;let r=new Map;if(!this.sampledNodesFbo)return r;null==(e=this.clearSampledNodesFboCommand)||e.call(this),null==(t=this.fillSampledNodesFboCommand)||t.call(this);let n=F(this.reglInstance,this.sampledNodesFbo);for(let e=0;e<n.length/4;e++){let t=n[4*e],a=!!n[4*e+1],l=n[4*e+2],s=n[4*e+3];if(a&&void 0!==t&&void 0!==l&&void 0!==s){let e=this.data.getInputIndexBySortedIndex(t);if(void 0!==e){let t=null==(i=this.data.getNodeByIndex(e))?void 0:i.id;void 0!==t&&r.set(t,[l,s])}}}return r}destroy(){H(this.currentPositionFbo),H(this.previousPositionFbo),H(this.velocityFbo),H(this.selectedFbo),H(this.colorFbo),H(this.sizeFbo),H(this.greyoutStatusFbo),H(this.hoveredFbo),H(this.trackedIndicesFbo),H(this.trackedPositionsFbo)}swapFbo(){let e=this.previousPositionFbo;this.previousPositionFbo=this.currentPositionFbo,this.currentPositionFbo=e}rescaleInitialNodePositions(){let{nodes:e}=this.data,{spaceSize:t}=this.config;if(0===e.length)return;let i=e.map(e=>e.x).filter(e=>void 0!==e);if(0===i.length)return;let r=e.map(e=>e.y).filter(e=>void 0!==e);if(0===r.length)return;let[n,a]=(0,d.A)(i);if(void 0===n||void 0===a)return;let[l,s]=(0,d.A)(r);if(void 0===l||void 0===s)return;let o=a-n,c=s-l,u=Math.max(o,c),b=(u-o)/2,h=(u-c)/2,p=(0,f.A)().range([0,null!=t?t:g.spaceSize]).domain([n-b,a+b]),m=(0,f.A)().range([0,null!=t?t:g.spaceSize]).domain([l-h,s+h]);e.forEach(e=>{e.x=p(e.x),e.y=m(e.y)})}}class U{constructor(){this.pointsTextureSize=0,this.linksTextureSize=0,this.alpha=1,this.transform=u.vt(),this.backgroundColor=[0,0,0,0],this.screenSize=[0,0],this.mousePosition=[0,0],this.screenMousePosition=[0,0],this.selectedArea=[[0,0],[0,0]],this.isSimulationRunning=!1,this.simulationProgress=0,this.selectedIndices=null,this.maxPointSize=64,this.hoveredNode=void 0,this.focusedNode=void 0,this.adjustedSpaceSize=g.spaceSize,this.hoveredNodeRingColor=[1,1,1,.7],this.focusedNodeRingColor=[1,1,1,.95],this.alphaTarget=0,this.scaleNodeX=(0,f.A)(),this.scaleNodeY=(0,f.A)(),this.random=new b.o8,this.alphaDecay=e=>1-Math.pow(.001,1/e)}addRandomSeed(e){this.random=this.random.clone(e)}getRandomFloat(e,t){return this.random.float(e,t)}adjustSpaceSize(e,t){e>=t?(this.adjustedSpaceSize=t/2,console.warn(`The \`spaceSize\` has been reduced to ${this.adjustedSpaceSize} due to WebGL limits`)):this.adjustedSpaceSize=e}updateScreenSize(e,t){let{adjustedSpaceSize:i}=this;this.screenSize=[e,t],this.scaleNodeX.domain([0,i]).range([(e-i)/2,(e+i)/2]),this.scaleNodeY.domain([i,0]).range([(t-i)/2,(t+i)/2])}scaleX(e){return this.scaleNodeX(e)}scaleY(e){return this.scaleNodeY(e)}setHoveredNodeRingColor(e){let t=z(e);this.hoveredNodeRingColor[0]=t[0],this.hoveredNodeRingColor[1]=t[1],this.hoveredNodeRingColor[2]=t[2]}setFocusedNodeRingColor(e){let t=z(e);this.focusedNodeRingColor[0]=t[0],this.focusedNodeRingColor[1]=t[1],this.focusedNodeRingColor[2]=t[2]}setFocusedNode(e,t){e&&void 0!==t?this.focusedNode={node:e,index:t}:this.focusedNode=void 0}addAlpha(e){return(this.alphaTarget-this.alpha)*this.alphaDecay(e)}}class Q{constructor(e,t){this.eventTransform=h.GS,this.behavior=(0,h.s_)().scaleExtent([.001,1/0]).on("start",e=>{var t,i,r;this.isRunning=!0;let n=!!e.sourceEvent;null==(r=null==(i=null==(t=this.config)?void 0:t.events)?void 0:i.onZoomStart)||r.call(i,e,n)}).on("zoom",e=>{var t,i,r;this.eventTransform=e.transform;let{eventTransform:{x:n,y:a,k:l},store:{transform:s,screenSize:o}}=this,f=o[0],c=o[1];u.Qj(s,f,c),u.Tl(s,s,[n,a]),u.hs(s,s,[l,l]),u.Tl(s,s,[f/2,c/2]),u.hs(s,s,[f/2,c/2]),u.hs(s,s,[1,-1]);let d=!!e.sourceEvent;null==(r=null==(i=null==(t=this.config)?void 0:t.events)?void 0:i.onZoom)||r.call(i,e,d)}).on("end",e=>{var t,i,r;this.isRunning=!1;let n=!!e.sourceEvent;null==(r=null==(i=null==(t=this.config)?void 0:t.events)?void 0:i.onZoomEnd)||r.call(i,e,n)}),this.isRunning=!1,this.store=e,this.config=t}getTransform(e,t,i=.1){if(0===e.length)return this.eventTransform;let{store:{screenSize:r}}=this,n=r[0],a=r[1],l=(0,d.A)(e.map(e=>e[0])),s=(0,d.A)(e.map(e=>e[1]));l[0]=this.store.scaleX(l[0]),l[1]=this.store.scaleX(l[1]),s[0]=this.store.scaleY(s[0]),s[1]=this.store.scaleY(s[1]);let o=n*(1-2*i)/(l[1]-l[0]),f=a*(1-2*i)/(s[0]-s[1]),c=function(e,t,i){return Math.min(Math.max(e,t),i)}(null!=t?t:Math.min(o,f),...this.behavior.scaleExtent()),u=(l[1]+l[0])/2,b=(s[1]+s[0])/2;return h.GS.translate(n/2-u*c,a/2-b*c).scale(c)}getDistanceToPoint(e){let{x:t,y:i,k:r}=this.eventTransform,n=this.getTransform([e],r),a=t-n.x,l=i-n.y;return Math.sqrt(a*a+l*l)}getMiddlePointTransform(e){let{store:{screenSize:t},eventTransform:{x:i,y:r,k:n}}=this,a=t[0],l=t[1],s=this.store.scaleX(e[0]),o=this.store.scaleY(e[1]),f=a/2-((a/2-i)/n+s)/2*1,c=l/2-((l/2-r)/n+o)/2*1;return h.GS.translate(f,c).scale(1)}convertScreenToSpacePosition(e){let{eventTransform:{x:t,y:i,k:r},store:{screenSize:n}}=this,a=n[0],l=n[1],s=[(e[0]-t)/r,l-(e[1]-i)/r];return s[0]-=(a-this.store.adjustedSpaceSize)/2,s[1]-=(l-this.store.adjustedSpaceSize)/2,s}convertSpaceToScreenPosition(e){return[this.eventTransform.applyX(this.store.scaleX(e[0])),this.eventTransform.applyY(this.store.scaleY(e[1]))]}convertSpaceToScreenRadius(e){let{config:{scaleNodesOnZoom:t},store:{maxPointSize:i},eventTransform:{k:r}}=this,n=2*e;return t?n*=r:n*=Math.min(5,Math.max(1,.01*r)),Math.min(n,i)/2}}let J={"3e771157d23b4793771f65d83e6387262ed73d488209157f19a7fa027bddd71b":function(e,t,i){var r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I;return r=e.gl,e.context,e.strings,n=e.next,a=e.current,e.draw,e.elements,e.buffer,e.shader,l=e.attributes,s=e.vao,e.uniforms,o=e.framebuffer,e.extensions,e.timer,e.isBufferArgs,n.blend_color,a.blend_color,n.blend_equation,a.blend_equation,n.blend_func,a.blend_func,n.depth_range,a.depth_range,n.colorMask,a.colorMask,n.polygonOffset_offset,a.polygonOffset_offset,n.sample_coverage,a.sample_coverage,n.stencil_func,a.stencil_func,n.stencil_opFront,a.stencil_opFront,n.stencil_opBack,a.stencil_opBack,n.scissor_box,a.scissor_box,n.viewport,a.viewport,f=n.blend_color,c=a.blend_color,d=n.blend_equation,u=a.blend_equation,b=n.blend_func,h=a.blend_func,p=n.depth_range,m=a.depth_range,g=n.colorMask,_=a.colorMask,v=n.polygonOffset_offset,y=a.polygonOffset_offset,w=n.sample_coverage,x=a.sample_coverage,S=n.stencil_func,z=a.stencil_func,F=n.stencil_opFront,A=a.stencil_opFront,k=n.stencil_opBack,W=a.stencil_opBack,O=n.scissor_box,H=a.scissor_box,B=n.viewport,I=a.viewport,{poll:function(){var e,t,i,l,s,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X;a.dirty=!1,t=n.dither,i=n.blend_enable,l=n.depth_enable,s=n.cull_enable,P=n.polygonOffset_enable,E=n.sample_alpha,T=n.sample_enable,M=n.stencil_enable,N=n.scissor_enable,L=n.depth_func,C=a.depth_func,V=n.depth_mask,D=a.depth_mask,G=n.cull_face,R=a.cull_face,q=n.frontFace,j=a.frontFace,Z=n.lineWidth,Y=a.lineWidth,$=n.stencil_mask,X=a.stencil_mask,(e=o.next)!==o.cur&&(e?r.bindFramebuffer(36160,e.framebuffer):r.bindFramebuffer(36160,null),o.cur=e),t!==a.dither&&(t?r.enable(3024):r.disable(3024),a.dither=t),i!==a.blend_enable&&(i?r.enable(3042):r.disable(3042),a.blend_enable=i),l!==a.depth_enable&&(l?r.enable(2929):r.disable(2929),a.depth_enable=l),s!==a.cull_enable&&(s?r.enable(2884):r.disable(2884),a.cull_enable=s),P!==a.polygonOffset_enable&&(P?r.enable(32823):r.disable(32823),a.polygonOffset_enable=P),E!==a.sample_alpha&&(E?r.enable(32926):r.disable(32926),a.sample_alpha=E),T!==a.sample_enable&&(T?r.enable(32928):r.disable(32928),a.sample_enable=T),M!==a.stencil_enable&&(M?r.enable(2960):r.disable(2960),a.stencil_enable=M),N!==a.scissor_enable&&(N?r.enable(3089):r.disable(3089),a.scissor_enable=N),(f[0]!==c[0]||f[1]!==c[1]||f[2]!==c[2]||f[3]!==c[3])&&(r.blendColor(f[0],f[1],f[2],f[3]),c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3]),(d[0]!==u[0]||d[1]!==u[1])&&(r.blendEquationSeparate(d[0],d[1]),u[0]=d[0],u[1]=d[1]),(b[0]!==h[0]||b[1]!==h[1]||b[2]!==h[2]||b[3]!==h[3])&&(r.blendFuncSeparate(b[0],b[1],b[2],b[3]),h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3]),L!==C&&(r.depthFunc(L),a.depth_func=L),(p[0]!==m[0]||p[1]!==m[1])&&(r.depthRange(p[0],p[1]),m[0]=p[0],m[1]=p[1]),V!==D&&(r.depthMask(V),a.depth_mask=V),(g[0]!==_[0]||g[1]!==_[1]||g[2]!==_[2]||g[3]!==_[3])&&(r.colorMask(g[0],g[1],g[2],g[3]),_[0]=g[0],_[1]=g[1],_[2]=g[2],_[3]=g[3]),G!==R&&(r.cullFace(G),a.cull_face=G),q!==j&&(r.frontFace(q),a.frontFace=q),Z!==Y&&(r.lineWidth(Z),a.lineWidth=Z),(v[0]!==y[0]||v[1]!==y[1])&&(r.polygonOffset(v[0],v[1]),y[0]=v[0],y[1]=v[1]),(w[0]!==x[0]||w[1]!==x[1])&&(r.sampleCoverage(w[0],w[1]),x[0]=w[0],x[1]=w[1]),$!==X&&(r.stencilMask($),a.stencil_mask=$),(S[0]!==z[0]||S[1]!==z[1]||S[2]!==z[2])&&(r.stencilFunc(S[0],S[1],S[2]),z[0]=S[0],z[1]=S[1],z[2]=S[2]),(F[0]!==A[0]||F[1]!==A[1]||F[2]!==A[2]||F[3]!==A[3])&&(r.stencilOpSeparate(F[0],F[1],F[2],F[3]),A[0]=F[0],A[1]=F[1],A[2]=F[2],A[3]=F[3]),(k[0]!==W[0]||k[1]!==W[1]||k[2]!==W[2]||k[3]!==W[3])&&(r.stencilOpSeparate(k[0],k[1],k[2],k[3]),W[0]=k[0],W[1]=k[1],W[2]=k[2],W[3]=k[3]),(O[0]!==H[0]||O[1]!==H[1]||O[2]!==H[2]||O[3]!==H[3])&&(r.scissor(O[0],O[1],O[2],O[3]),H[0]=O[0],H[1]=O[1],H[2]=O[2],H[3]=O[3]),(B[0]!==I[0]||B[1]!==I[1]||B[2]!==I[2]||B[3]!==I[3])&&(r.viewport(B[0],B[1],B[2],B[3]),I[0]=B[0],I[1]=B[1],I[2]=B[2],I[3]=B[3])},refresh:function(){a.dirty=!1,E=n.dither,T=n.blend_enable,M=n.depth_enable,N=n.cull_enable,L=n.polygonOffset_enable,C=n.sample_alpha,V=n.sample_enable,D=n.stencil_enable,G=n.scissor_enable,R=n.depth_func,a.depth_func,q=n.depth_mask,a.depth_mask,j=n.cull_face,a.cull_face,Z=n.frontFace,a.frontFace,Y=n.lineWidth,a.lineWidth,$=n.stencil_mask,a.stencil_mask,(e=o.next)?r.bindFramebuffer(36160,e.framebuffer):r.bindFramebuffer(36160,null),o.cur=e,P=0;for(var e,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X=0;X<i;++X)(P=l[X]).buffer?(r.enableVertexAttribArray(X),r.bindBuffer(34962,P.buffer.buffer),r.vertexAttribPointer(X,P.size,P.type,P.normalized,P.stride,P.offset)):(r.disableVertexAttribArray(X),r.vertexAttrib4f(X,P.x,P.y,P.z,P.w),P.buffer=null);for(var X=0;X<i;++X)t.vertexAttribDivisorANGLE(X,l[X].divisor);s.currentVAO=null,s.setVAO(s.targetVAO),E?r.enable(3024):r.disable(3024),a.dither=E,T?r.enable(3042):r.disable(3042),a.blend_enable=T,M?r.enable(2929):r.disable(2929),a.depth_enable=M,N?r.enable(2884):r.disable(2884),a.cull_enable=N,L?r.enable(32823):r.disable(32823),a.polygonOffset_enable=L,C?r.enable(32926):r.disable(32926),a.sample_alpha=C,V?r.enable(32928):r.disable(32928),a.sample_enable=V,D?r.enable(2960):r.disable(2960),a.stencil_enable=D,G?r.enable(3089):r.disable(3089),a.scissor_enable=G,r.blendColor(f[0],f[1],f[2],f[3]),c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],r.blendEquationSeparate(d[0],d[1]),u[0]=d[0],u[1]=d[1],r.blendFuncSeparate(b[0],b[1],b[2],b[3]),h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3],r.depthFunc(R),a.depth_func=R,r.depthRange(p[0],p[1]),m[0]=p[0],m[1]=p[1],r.depthMask(q),a.depth_mask=q,r.colorMask(g[0],g[1],g[2],g[3]),_[0]=g[0],_[1]=g[1],_[2]=g[2],_[3]=g[3],r.cullFace(j),a.cull_face=j,r.frontFace(Z),a.frontFace=Z,r.lineWidth(Y),a.lineWidth=Y,r.polygonOffset(v[0],v[1]),y[0]=v[0],y[1]=v[1],r.sampleCoverage(w[0],w[1]),x[0]=w[0],x[1]=w[1],r.stencilMask($),a.stencil_mask=$,r.stencilFunc(S[0],S[1],S[2]),z[0]=S[0],z[1]=S[1],z[2]=S[2],r.stencilOpSeparate(F[0],F[1],F[2],F[3]),A[0]=F[0],A[1]=F[1],A[2]=F[2],A[3]=F[3],r.stencilOpSeparate(k[0],k[1],k[2],k[3]),W[0]=k[0],W[1]=k[1],W[2]=k[2],W[3]=k[3],r.scissor(O[0],O[1],O[2],O[3]),H[0]=O[0],H[1]=O[1],H[2]=O[2],H[3]=O[3],r.viewport(B[0],B[1],B[2],B[3]),I[0]=B[0],I[1]=B[1],I[2]=B[2],I[3]=B[3]}}},cbf700f001fff25b649fba9c37fa0dc6631c1cdee318ad49473d28ec10dcee81:function(e,t,i,r,n,a,l,s){var o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D;return o=e.gl,f=e.context,e.strings,c=e.next,d=e.current,e.draw,e.elements,e.buffer,u=e.shader,e.attributes,b=e.vao,e.uniforms,h=e.framebuffer,p=e.extensions,e.timer,e.isBufferArgs,m=c.blend_color,g=d.blend_color,_=c.blend_equation,v=d.blend_equation,y=c.blend_func,w=d.blend_func,x=c.depth_range,S=d.depth_range,z=c.colorMask,F=d.colorMask,A=c.polygonOffset_offset,k=d.polygonOffset_offset,W=c.sample_coverage,O=d.sample_coverage,H=c.stencil_func,B=d.stencil_func,I=c.stencil_opFront,P=d.stencil_opFront,E=c.stencil_opBack,T=d.stencil_opBack,M=c.scissor_box,N=d.scissor_box,L=c.viewport,C=d.viewport,V={},D={},{draw:function(e){var r,n,a,l,s,M,L,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR;p.angle_instanced_arrays,r=e.framebuffer,n=h.getFramebuffer(r),a=h.next,h.next=n,l=f.framebufferWidth,f.framebufferWidth=n?n.width:f.drawingBufferWidth,s=f.framebufferHeight,f.framebufferHeight=n?n.height:f.drawingBufferHeight,n!==h.cur&&(n?o.bindFramebuffer(36160,n.framebuffer):o.bindFramebuffer(36160,null),h.cur=n),d.dirty&&((J=c.dither)!==d.dither&&(J?o.enable(3024):o.disable(3024),d.dither=J),(K=c.blend_enable)!==d.blend_enable&&(K?o.enable(3042):o.disable(3042),d.blend_enable=K),ee=m[0],et=m[1],ei=m[2],er=m[3],(ee!==g[0]||et!==g[1]||ei!==g[2]||er!==g[3])&&(o.blendColor(ee,et,ei,er),g[0]=ee,g[1]=et,g[2]=ei,g[3]=er),en=_[0],ea=_[1],(en!==v[0]||ea!==v[1])&&(o.blendEquationSeparate(en,ea),v[0]=en,v[1]=ea),el=y[0],es=y[1],eo=y[2],ef=y[3],(el!==w[0]||es!==w[1]||eo!==w[2]||ef!==w[3])&&(o.blendFuncSeparate(el,es,eo,ef),w[0]=el,w[1]=es,w[2]=eo,w[3]=ef),(ec=c.depth_enable)!==d.depth_enable&&(ec?o.enable(2929):o.disable(2929),d.depth_enable=ec),(ed=c.depth_func)!==d.depth_func&&(o.depthFunc(ed),d.depth_func=ed),eu=x[0],eb=x[1],(eu!==S[0]||eb!==S[1])&&(o.depthRange(eu,eb),S[0]=eu,S[1]=eb),(eh=c.depth_mask)!==d.depth_mask&&(o.depthMask(eh),d.depth_mask=eh),ep=z[0],em=z[1],eg=z[2],e_=z[3],(ep!==F[0]||em!==F[1]||eg!==F[2]||e_!==F[3])&&(o.colorMask(ep,em,eg,e_),F[0]=ep,F[1]=em,F[2]=eg,F[3]=e_),(ev=c.cull_enable)!==d.cull_enable&&(ev?o.enable(2884):o.disable(2884),d.cull_enable=ev),(ey=c.cull_face)!==d.cull_face&&(o.cullFace(ey),d.cull_face=ey),(ew=c.frontFace)!==d.frontFace&&(o.frontFace(ew),d.frontFace=ew),(ex=c.lineWidth)!==d.lineWidth&&(o.lineWidth(ex),d.lineWidth=ex),(eS=c.polygonOffset_enable)!==d.polygonOffset_enable&&(eS?o.enable(32823):o.disable(32823),d.polygonOffset_enable=eS),ez=A[0],eF=A[1],(ez!==k[0]||eF!==k[1])&&(o.polygonOffset(ez,eF),k[0]=ez,k[1]=eF),(eA=c.sample_alpha)!==d.sample_alpha&&(eA?o.enable(32926):o.disable(32926),d.sample_alpha=eA),(ek=c.sample_enable)!==d.sample_enable&&(ek?o.enable(32928):o.disable(32928),d.sample_enable=ek),eW=W[0],eO=W[1],(eW!==O[0]||eO!==O[1])&&(o.sampleCoverage(eW,eO),O[0]=eW,O[1]=eO),(eH=c.stencil_enable)!==d.stencil_enable&&(eH?o.enable(2960):o.disable(2960),d.stencil_enable=eH),(eB=c.stencil_mask)!==d.stencil_mask&&(o.stencilMask(eB),d.stencil_mask=eB),eI=H[0],eP=H[1],eE=H[2],(eI!==B[0]||eP!==B[1]||eE!==B[2])&&(o.stencilFunc(eI,eP,eE),B[0]=eI,B[1]=eP,B[2]=eE),eT=I[0],eM=I[1],eN=I[2],eL=I[3],(eT!==P[0]||eM!==P[1]||eN!==P[2]||eL!==P[3])&&(o.stencilOpSeparate(eT,eM,eN,eL),P[0]=eT,P[1]=eM,P[2]=eN,P[3]=eL),eC=E[0],eV=E[1],eD=E[2],eG=E[3],(eC!==T[0]||eV!==T[1]||eD!==T[2]||eG!==T[3])&&(o.stencilOpSeparate(eC,eV,eD,eG),T[0]=eC,T[1]=eV,T[2]=eD,T[3]=eG),(eR=c.scissor_enable)!==d.scissor_enable&&(eR?o.enable(3089):o.disable(3089),d.scissor_enable=eR)),M=f.framebufferWidth,L=f.framebufferHeight,D=f.viewportWidth,f.viewportWidth=M,G=f.viewportHeight,f.viewportHeight=L,o.viewport(0,0,M,L),C[0]=0,C[1]=0,C[2]=M,C[3]=L,R=f.framebufferWidth,q=f.framebufferHeight,o.scissor(0,0,R,q),N[0]=0,N[1]=0,N[2]=R,N[3]=q,(j=d.profile)&&(Z=performance.now(),t.count++),Y=u.frag,$=u.vert,X=u.program($,Y),o.useProgram(X.program),b.setVAO(null),(Q=V[U=X.id])?Q.call(this,e):(Q=V[U]=i(X)).call(this,e),d.dirty=!0,b.setVAO(null),h.next=a,f.framebufferWidth=l,f.framebufferHeight=s,f.viewportWidth=D,f.viewportHeight=G,j&&(t.cpuTime+=performance.now()-Z)},scope:function(e,i,s){var o,c,u,b,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B;o=e.framebuffer,c=h.getFramebuffer(o),u=h.next,h.next=c,b=f.framebufferWidth,f.framebufferWidth=c?c.width:f.drawingBufferWidth,p=f.framebufferHeight,f.framebufferHeight=c?c.height:f.drawingBufferHeight,m=f.framebufferWidth,g=f.framebufferHeight,_=f.viewportWidth,f.viewportWidth=m,v=f.viewportHeight,f.viewportHeight=g,y=L[0],L[0]=r,w=L[1],L[1]=n,x=L[2],L[2]=m,S=L[3],L[3]=g,z=f.framebufferWidth,F=f.framebufferHeight,A=M[0],M[0]=a,k=M[1],M[1]=l,W=M[2],M[2]=z,O=M[3],M[3]=F,(H=d.profile)&&(B=performance.now(),t.count++),d.dirty=!0,i(f,e,s),h.next=u,f.framebufferWidth=b,f.framebufferHeight=p,f.viewportWidth=_,f.viewportHeight=v,L[0]=y,L[1]=w,L[2]=x,L[3]=S,M[0]=A,M[1]=k,M[2]=W,M[3]=O,H&&(t.cpuTime+=performance.now()-B),d.dirty=!0},batch:function(e,i){var r,n,a,l,f,h,M,N,L,C,V,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO;p.angle_instanced_arrays,d.dirty&&((N=c.dither)!==d.dither&&(N?o.enable(3024):o.disable(3024),d.dither=N),(L=c.blend_enable)!==d.blend_enable&&(L?o.enable(3042):o.disable(3042),d.blend_enable=L),C=m[0],V=m[1],G=m[2],R=m[3],(C!==g[0]||V!==g[1]||G!==g[2]||R!==g[3])&&(o.blendColor(C,V,G,R),g[0]=C,g[1]=V,g[2]=G,g[3]=R),q=_[0],j=_[1],(q!==v[0]||j!==v[1])&&(o.blendEquationSeparate(q,j),v[0]=q,v[1]=j),Z=y[0],Y=y[1],$=y[2],X=y[3],(Z!==w[0]||Y!==w[1]||$!==w[2]||X!==w[3])&&(o.blendFuncSeparate(Z,Y,$,X),w[0]=Z,w[1]=Y,w[2]=$,w[3]=X),(U=c.depth_enable)!==d.depth_enable&&(U?o.enable(2929):o.disable(2929),d.depth_enable=U),(Q=c.depth_func)!==d.depth_func&&(o.depthFunc(Q),d.depth_func=Q),J=x[0],K=x[1],(J!==S[0]||K!==S[1])&&(o.depthRange(J,K),S[0]=J,S[1]=K),(ee=c.depth_mask)!==d.depth_mask&&(o.depthMask(ee),d.depth_mask=ee),et=z[0],ei=z[1],er=z[2],en=z[3],(et!==F[0]||ei!==F[1]||er!==F[2]||en!==F[3])&&(o.colorMask(et,ei,er,en),F[0]=et,F[1]=ei,F[2]=er,F[3]=en),(ea=c.cull_enable)!==d.cull_enable&&(ea?o.enable(2884):o.disable(2884),d.cull_enable=ea),(el=c.cull_face)!==d.cull_face&&(o.cullFace(el),d.cull_face=el),(es=c.frontFace)!==d.frontFace&&(o.frontFace(es),d.frontFace=es),(eo=c.lineWidth)!==d.lineWidth&&(o.lineWidth(eo),d.lineWidth=eo),(ef=c.polygonOffset_enable)!==d.polygonOffset_enable&&(ef?o.enable(32823):o.disable(32823),d.polygonOffset_enable=ef),ec=A[0],ed=A[1],(ec!==k[0]||ed!==k[1])&&(o.polygonOffset(ec,ed),k[0]=ec,k[1]=ed),(eu=c.sample_alpha)!==d.sample_alpha&&(eu?o.enable(32926):o.disable(32926),d.sample_alpha=eu),(eb=c.sample_enable)!==d.sample_enable&&(eb?o.enable(32928):o.disable(32928),d.sample_enable=eb),eh=W[0],ep=W[1],(eh!==O[0]||ep!==O[1])&&(o.sampleCoverage(eh,ep),O[0]=eh,O[1]=ep),(em=c.stencil_enable)!==d.stencil_enable&&(em?o.enable(2960):o.disable(2960),d.stencil_enable=em),(eg=c.stencil_mask)!==d.stencil_mask&&(o.stencilMask(eg),d.stencil_mask=eg),e_=H[0],ev=H[1],ey=H[2],(e_!==B[0]||ev!==B[1]||ey!==B[2])&&(o.stencilFunc(e_,ev,ey),B[0]=e_,B[1]=ev,B[2]=ey),ew=I[0],ex=I[1],eS=I[2],ez=I[3],(ew!==P[0]||ex!==P[1]||eS!==P[2]||ez!==P[3])&&(o.stencilOpSeparate(ew,ex,eS,ez),P[0]=ew,P[1]=ex,P[2]=eS,P[3]=ez),eF=E[0],eA=E[1],ek=E[2],eW=E[3],(eF!==T[0]||eA!==T[1]||ek!==T[2]||eW!==T[3])&&(o.stencilOpSeparate(eF,eA,ek,eW),T[0]=eF,T[1]=eA,T[2]=ek,T[3]=eW),(eO=c.scissor_enable)!==d.scissor_enable&&(eO?o.enable(3089):o.disable(3089),d.scissor_enable=eO)),(r=d.profile)&&(n=performance.now(),t.count+=i),a=u.frag,l=u.vert,f=u.program(l,a),o.useProgram(f.program),b.setVAO(null),(M=D[h=f.id])?M.call(this,e,i):(M=D[h]=s(f)).call(this,e,i),d.dirty=!0,b.setVAO(null),r&&(t.cpuTime+=performance.now()-n)}}},"8fad2284703471df7c0e0d0a7b96d983e8c53f6d707dd55d5921c1eab71f6623":function(e,t,i,r){var n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N;return n=e.gl,a=e.context,e.strings,l=e.next,s=e.current,e.draw,e.elements,e.buffer,o=e.shader,e.attributes,f=e.vao,e.uniforms,c=e.framebuffer,d=e.extensions,e.timer,e.isBufferArgs,u=l.blend_color,b=s.blend_color,h=l.blend_equation,p=s.blend_equation,m=l.blend_func,g=s.blend_func,_=l.depth_range,v=s.depth_range,y=l.colorMask,w=s.colorMask,x=l.polygonOffset_offset,S=s.polygonOffset_offset,z=l.sample_coverage,F=s.sample_coverage,A=l.stencil_func,k=s.stencil_func,W=l.stencil_opFront,O=s.stencil_opFront,H=l.stencil_opBack,B=s.stencil_opBack,I=l.scissor_box,P=s.scissor_box,E=l.viewport,T=s.viewport,M={},N={},{draw:function(e){var r,a,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG;d.angle_instanced_arrays,(r=c.next)!==c.cur&&(r?n.bindFramebuffer(36160,r.framebuffer):n.bindFramebuffer(36160,null),c.cur=r),s.dirty&&((R=l.dither)!==s.dither&&(R?n.enable(3024):n.disable(3024),s.dither=R),(q=l.blend_enable)!==s.blend_enable&&(q?n.enable(3042):n.disable(3042),s.blend_enable=q),j=u[0],Z=u[1],Y=u[2],$=u[3],(j!==b[0]||Z!==b[1]||Y!==b[2]||$!==b[3])&&(n.blendColor(j,Z,Y,$),b[0]=j,b[1]=Z,b[2]=Y,b[3]=$),X=h[0],U=h[1],(X!==p[0]||U!==p[1])&&(n.blendEquationSeparate(X,U),p[0]=X,p[1]=U),Q=m[0],J=m[1],K=m[2],ee=m[3],(Q!==g[0]||J!==g[1]||K!==g[2]||ee!==g[3])&&(n.blendFuncSeparate(Q,J,K,ee),g[0]=Q,g[1]=J,g[2]=K,g[3]=ee),(et=l.depth_enable)!==s.depth_enable&&(et?n.enable(2929):n.disable(2929),s.depth_enable=et),(ei=l.depth_func)!==s.depth_func&&(n.depthFunc(ei),s.depth_func=ei),er=_[0],en=_[1],(er!==v[0]||en!==v[1])&&(n.depthRange(er,en),v[0]=er,v[1]=en),(ea=l.depth_mask)!==s.depth_mask&&(n.depthMask(ea),s.depth_mask=ea),el=y[0],es=y[1],eo=y[2],ef=y[3],(el!==w[0]||es!==w[1]||eo!==w[2]||ef!==w[3])&&(n.colorMask(el,es,eo,ef),w[0]=el,w[1]=es,w[2]=eo,w[3]=ef),(ec=l.cull_enable)!==s.cull_enable&&(ec?n.enable(2884):n.disable(2884),s.cull_enable=ec),(ed=l.cull_face)!==s.cull_face&&(n.cullFace(ed),s.cull_face=ed),(eu=l.frontFace)!==s.frontFace&&(n.frontFace(eu),s.frontFace=eu),(eb=l.lineWidth)!==s.lineWidth&&(n.lineWidth(eb),s.lineWidth=eb),(eh=l.polygonOffset_enable)!==s.polygonOffset_enable&&(eh?n.enable(32823):n.disable(32823),s.polygonOffset_enable=eh),ep=x[0],em=x[1],(ep!==S[0]||em!==S[1])&&(n.polygonOffset(ep,em),S[0]=ep,S[1]=em),(eg=l.sample_alpha)!==s.sample_alpha&&(eg?n.enable(32926):n.disable(32926),s.sample_alpha=eg),(e_=l.sample_enable)!==s.sample_enable&&(e_?n.enable(32928):n.disable(32928),s.sample_enable=e_),ev=z[0],ey=z[1],(ev!==F[0]||ey!==F[1])&&(n.sampleCoverage(ev,ey),F[0]=ev,F[1]=ey),(ew=l.stencil_enable)!==s.stencil_enable&&(ew?n.enable(2960):n.disable(2960),s.stencil_enable=ew),(ex=l.stencil_mask)!==s.stencil_mask&&(n.stencilMask(ex),s.stencil_mask=ex),eS=A[0],ez=A[1],eF=A[2],(eS!==k[0]||ez!==k[1]||eF!==k[2])&&(n.stencilFunc(eS,ez,eF),k[0]=eS,k[1]=ez,k[2]=eF),eA=W[0],ek=W[1],eW=W[2],eO=W[3],(eA!==O[0]||ek!==O[1]||eW!==O[2]||eO!==O[3])&&(n.stencilOpSeparate(eA,ek,eW,eO),O[0]=eA,O[1]=ek,O[2]=eW,O[3]=eO),eH=H[0],eB=H[1],eI=H[2],eP=H[3],(eH!==B[0]||eB!==B[1]||eI!==B[2]||eP!==B[3])&&(n.stencilOpSeparate(eH,eB,eI,eP),B[0]=eH,B[1]=eB,B[2]=eI,B[3]=eP),(eE=l.scissor_enable)!==s.scissor_enable&&(eE?n.enable(3089):n.disable(3089),s.scissor_enable=eE),eT=I[0],eM=I[1],eN=I[2],eL=I[3],(eT!==P[0]||eM!==P[1]||eN!==P[2]||eL!==P[3])&&(n.scissor(eT,eM,eN,eL),P[0]=eT,P[1]=eM,P[2]=eN,P[3]=eL),eC=E[0],eV=E[1],eD=E[2],eG=E[3],(eC!==T[0]||eV!==T[1]||eD!==T[2]||eG!==T[3])&&(n.viewport(eC,eV,eD,eG),T[0]=eC,T[1]=eV,T[2]=eD,T[3]=eG),s.dirty=!1),(a=s.profile)&&(N=performance.now(),t.count++),L=o.frag,C=o.vert,V=o.program(C,L),n.useProgram(V.program),f.setVAO(null),(G=M[D=V.id])?G.call(this,e):(G=M[D]=i(V)).call(this,e),f.setVAO(null),a&&(t.cpuTime+=performance.now()-N)},scope:function(e,i,r){var n,l;(n=s.profile)&&(l=performance.now(),t.count++),i(a,e,r),n&&(t.cpuTime+=performance.now()-l)},batch:function(e,i){var a,M,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR;d.angle_instanced_arrays,(a=c.next)!==c.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),c.cur=a),s.dirty&&((q=l.dither)!==s.dither&&(q?n.enable(3024):n.disable(3024),s.dither=q),(j=l.blend_enable)!==s.blend_enable&&(j?n.enable(3042):n.disable(3042),s.blend_enable=j),Z=u[0],Y=u[1],$=u[2],X=u[3],(Z!==b[0]||Y!==b[1]||$!==b[2]||X!==b[3])&&(n.blendColor(Z,Y,$,X),b[0]=Z,b[1]=Y,b[2]=$,b[3]=X),U=h[0],Q=h[1],(U!==p[0]||Q!==p[1])&&(n.blendEquationSeparate(U,Q),p[0]=U,p[1]=Q),J=m[0],K=m[1],ee=m[2],et=m[3],(J!==g[0]||K!==g[1]||ee!==g[2]||et!==g[3])&&(n.blendFuncSeparate(J,K,ee,et),g[0]=J,g[1]=K,g[2]=ee,g[3]=et),(ei=l.depth_enable)!==s.depth_enable&&(ei?n.enable(2929):n.disable(2929),s.depth_enable=ei),(er=l.depth_func)!==s.depth_func&&(n.depthFunc(er),s.depth_func=er),en=_[0],ea=_[1],(en!==v[0]||ea!==v[1])&&(n.depthRange(en,ea),v[0]=en,v[1]=ea),(el=l.depth_mask)!==s.depth_mask&&(n.depthMask(el),s.depth_mask=el),es=y[0],eo=y[1],ef=y[2],ec=y[3],(es!==w[0]||eo!==w[1]||ef!==w[2]||ec!==w[3])&&(n.colorMask(es,eo,ef,ec),w[0]=es,w[1]=eo,w[2]=ef,w[3]=ec),(ed=l.cull_enable)!==s.cull_enable&&(ed?n.enable(2884):n.disable(2884),s.cull_enable=ed),(eu=l.cull_face)!==s.cull_face&&(n.cullFace(eu),s.cull_face=eu),(eb=l.frontFace)!==s.frontFace&&(n.frontFace(eb),s.frontFace=eb),(eh=l.lineWidth)!==s.lineWidth&&(n.lineWidth(eh),s.lineWidth=eh),(ep=l.polygonOffset_enable)!==s.polygonOffset_enable&&(ep?n.enable(32823):n.disable(32823),s.polygonOffset_enable=ep),em=x[0],eg=x[1],(em!==S[0]||eg!==S[1])&&(n.polygonOffset(em,eg),S[0]=em,S[1]=eg),(e_=l.sample_alpha)!==s.sample_alpha&&(e_?n.enable(32926):n.disable(32926),s.sample_alpha=e_),(ev=l.sample_enable)!==s.sample_enable&&(ev?n.enable(32928):n.disable(32928),s.sample_enable=ev),ey=z[0],ew=z[1],(ey!==F[0]||ew!==F[1])&&(n.sampleCoverage(ey,ew),F[0]=ey,F[1]=ew),(ex=l.stencil_enable)!==s.stencil_enable&&(ex?n.enable(2960):n.disable(2960),s.stencil_enable=ex),(eS=l.stencil_mask)!==s.stencil_mask&&(n.stencilMask(eS),s.stencil_mask=eS),ez=A[0],eF=A[1],eA=A[2],(ez!==k[0]||eF!==k[1]||eA!==k[2])&&(n.stencilFunc(ez,eF,eA),k[0]=ez,k[1]=eF,k[2]=eA),ek=W[0],eW=W[1],eO=W[2],eH=W[3],(ek!==O[0]||eW!==O[1]||eO!==O[2]||eH!==O[3])&&(n.stencilOpSeparate(ek,eW,eO,eH),O[0]=ek,O[1]=eW,O[2]=eO,O[3]=eH),eB=H[0],eI=H[1],eP=H[2],eE=H[3],(eB!==B[0]||eI!==B[1]||eP!==B[2]||eE!==B[3])&&(n.stencilOpSeparate(eB,eI,eP,eE),B[0]=eB,B[1]=eI,B[2]=eP,B[3]=eE),(eT=l.scissor_enable)!==s.scissor_enable&&(eT?n.enable(3089):n.disable(3089),s.scissor_enable=eT),eM=I[0],eN=I[1],eL=I[2],eC=I[3],(eM!==P[0]||eN!==P[1]||eL!==P[2]||eC!==P[3])&&(n.scissor(eM,eN,eL,eC),P[0]=eM,P[1]=eN,P[2]=eL,P[3]=eC),eV=E[0],eD=E[1],eG=E[2],eR=E[3],(eV!==T[0]||eD!==T[1]||eG!==T[2]||eR!==T[3])&&(n.viewport(eV,eD,eG,eR),T[0]=eV,T[1]=eD,T[2]=eG,T[3]=eR),s.dirty=!1),(M=s.profile)&&(L=performance.now(),t.count+=i),C=o.frag,V=o.vert,D=o.program(V,C),n.useProgram(D.program),f.setVAO(null),(R=N[G=D.id])?R.call(this,e,i):(R=N[G]=r(D)).call(this,e,i),f.setVAO(null),M&&(t.cpuTime+=performance.now()-L)}}},"4324c38222f7aa6bd758c48eca3adf24490a6794a7ca19259ad8654aba832843":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A){var k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo;return k=e.gl,W=e.context,e.strings,O=e.next,H=e.current,B=e.draw,I=e.elements,e.buffer,P=e.shader,E=e.attributes,T=e.vao,M=e.uniforms,N=e.framebuffer,L=e.extensions,e.timer,e.isBufferArgs,C=O.blend_color,V=H.blend_color,D=O.blend_equation,G=H.blend_equation,R=O.blend_func,q=H.blend_func,j=O.depth_range,Z=H.depth_range,Y=O.colorMask,$=H.colorMask,X=O.polygonOffset_offset,U=H.polygonOffset_offset,Q=O.sample_coverage,J=H.sample_coverage,K=O.stencil_func,ee=H.stencil_func,et=O.stencil_opFront,ei=H.stencil_opFront,er=O.stencil_opBack,en=H.stencil_opBack,ea=O.scissor_box,el=H.scissor_box,es=O.viewport,eo=H.viewport,{draw:function(e){var h,p,m,g,_,v,y,w,x,S,z,F,A,P,M,ea,es,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5;L.angle_instanced_arrays,h=i.call(this,W,e,0),p=N.getFramebuffer(h),m=N.next,N.next=p,g=W.framebufferWidth,W.framebufferWidth=p?p.width:W.drawingBufferWidth,_=W.framebufferHeight,W.framebufferHeight=p?p.height:W.drawingBufferHeight,p!==N.cur&&(p?k.bindFramebuffer(36160,p.framebuffer):k.bindFramebuffer(36160,null),N.cur=p),H.dirty&&((eg=O.dither)!==H.dither&&(eg?k.enable(3024):k.disable(3024),H.dither=eg),(e_=O.blend_enable)!==H.blend_enable&&(e_?k.enable(3042):k.disable(3042),H.blend_enable=e_),ev=C[0],ey=C[1],ew=C[2],ex=C[3],(ev!==V[0]||ey!==V[1]||ew!==V[2]||ex!==V[3])&&(k.blendColor(ev,ey,ew,ex),V[0]=ev,V[1]=ey,V[2]=ew,V[3]=ex),eS=D[0],ez=D[1],(eS!==G[0]||ez!==G[1])&&(k.blendEquationSeparate(eS,ez),G[0]=eS,G[1]=ez),eF=R[0],eA=R[1],ek=R[2],eW=R[3],(eF!==q[0]||eA!==q[1]||ek!==q[2]||eW!==q[3])&&(k.blendFuncSeparate(eF,eA,ek,eW),q[0]=eF,q[1]=eA,q[2]=ek,q[3]=eW),(eO=O.depth_enable)!==H.depth_enable&&(eO?k.enable(2929):k.disable(2929),H.depth_enable=eO),(eH=O.depth_func)!==H.depth_func&&(k.depthFunc(eH),H.depth_func=eH),eB=j[0],eI=j[1],(eB!==Z[0]||eI!==Z[1])&&(k.depthRange(eB,eI),Z[0]=eB,Z[1]=eI),(eP=O.depth_mask)!==H.depth_mask&&(k.depthMask(eP),H.depth_mask=eP),eE=Y[0],eT=Y[1],eM=Y[2],eN=Y[3],(eE!==$[0]||eT!==$[1]||eM!==$[2]||eN!==$[3])&&(k.colorMask(eE,eT,eM,eN),$[0]=eE,$[1]=eT,$[2]=eM,$[3]=eN),(eL=O.cull_enable)!==H.cull_enable&&(eL?k.enable(2884):k.disable(2884),H.cull_enable=eL),(eC=O.cull_face)!==H.cull_face&&(k.cullFace(eC),H.cull_face=eC),(eV=O.frontFace)!==H.frontFace&&(k.frontFace(eV),H.frontFace=eV),(eD=O.lineWidth)!==H.lineWidth&&(k.lineWidth(eD),H.lineWidth=eD),(eG=O.polygonOffset_enable)!==H.polygonOffset_enable&&(eG?k.enable(32823):k.disable(32823),H.polygonOffset_enable=eG),eR=X[0],eq=X[1],(eR!==U[0]||eq!==U[1])&&(k.polygonOffset(eR,eq),U[0]=eR,U[1]=eq),(ej=O.sample_alpha)!==H.sample_alpha&&(ej?k.enable(32926):k.disable(32926),H.sample_alpha=ej),(eZ=O.sample_enable)!==H.sample_enable&&(eZ?k.enable(32928):k.disable(32928),H.sample_enable=eZ),eY=Q[0],e$=Q[1],(eY!==J[0]||e$!==J[1])&&(k.sampleCoverage(eY,e$),J[0]=eY,J[1]=e$),(eX=O.stencil_enable)!==H.stencil_enable&&(eX?k.enable(2960):k.disable(2960),H.stencil_enable=eX),(eU=O.stencil_mask)!==H.stencil_mask&&(k.stencilMask(eU),H.stencil_mask=eU),eQ=K[0],eJ=K[1],eK=K[2],(eQ!==ee[0]||eJ!==ee[1]||eK!==ee[2])&&(k.stencilFunc(eQ,eJ,eK),ee[0]=eQ,ee[1]=eJ,ee[2]=eK),e0=et[0],e2=et[1],e1=et[2],e3=et[3],(e0!==ei[0]||e2!==ei[1]||e1!==ei[2]||e3!==ei[3])&&(k.stencilOpSeparate(e0,e2,e1,e3),ei[0]=e0,ei[1]=e2,ei[2]=e1,ei[3]=e3),e4=er[0],e6=er[1],e9=er[2],e8=er[3],(e4!==en[0]||e6!==en[1]||e9!==en[2]||e8!==en[3])&&(k.stencilOpSeparate(e4,e6,e9,e8),en[0]=e4,en[1]=e6,en[2]=e9,en[3]=e8),(e5=O.scissor_enable)!==H.scissor_enable&&(e5?k.enable(3089):k.disable(3089),H.scissor_enable=e5)),v=W.framebufferWidth,y=W.framebufferHeight,w=W.viewportWidth,W.viewportWidth=v,x=W.viewportHeight,W.viewportHeight=y,k.viewport(0,0,v,y),eo[0]=0,eo[1]=0,eo[2]=v,eo[3]=y,S=W.framebufferWidth,z=W.framebufferHeight,k.scissor(0,0,S,z),el[0]=0,el[1]=0,el[2]=S,el[3]=z,(F=H.profile)&&(A=performance.now(),t.count++),k.useProgram(r.program),P=L.angle_instanced_arrays,T.setVAO(null),(ea=E[M=a.location]).buffer||k.enableVertexAttribArray(M),(5126!==ea.type||2!==ea.size||ea.buffer!==n||!1!==ea.normalized||0!==ea.offset||0!==ea.stride)&&(k.bindBuffer(34962,n.buffer),k.vertexAttribPointer(M,2,5126,!1,0,0),ea.type=5126,ea.size=2,ea.buffer=n,ea.normalized=!1,ea.offset=0,ea.stride=0),0!==ea.divisor&&(P.vertexAttribDivisorANGLE(M,0),ea.divisor=0),es=s.call(this,W,e,0),k.uniform1f(l.location,es),(ef=f.call(this,W,e,0))&&"framebuffer"===ef._reglType&&(ef=ef.color[0]),ec=ef._texture,k.uniform1i(o.location,ec.bind()),ed=d.call(this,W,e,0),k.uniform1f(c.location,ed),(eu=b.call(this,W,e,0))&&"framebuffer"===eu._reglType&&(eu=eu.color[0]),eb=eu._texture,k.uniform1i(u.location,eb.bind()),(eh=B.elements)?k.bindBuffer(34963,eh.buffer.buffer):T.currentVAO&&(eh=I.getElements(T.currentVAO.elements))&&k.bindBuffer(34963,eh.buffer.buffer),ep=B.offset,(em=B.instances)>0?eh?P.drawElementsInstancedANGLE(5,4,eh.type,ep<<(eh.type-5121>>1),em):P.drawArraysInstancedANGLE(5,ep,4,em):em<0&&(eh?k.drawElements(5,4,eh.type,ep<<(eh.type-5121>>1)):k.drawArrays(5,ep,4)),H.dirty=!0,T.setVAO(null),N.next=m,W.framebufferWidth=g,W.framebufferHeight=_,W.viewportWidth=w,W.viewportHeight=x,F&&(t.cpuTime+=performance.now()-A),ec.unbind(),eb.unbind()},scope:function(e,r,a){var l,o,c,u,k,O,I,E,T,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,el,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew;l=i.call(this,W,e,a),o=N.getFramebuffer(l),c=N.next,N.next=o,u=W.framebufferWidth,W.framebufferWidth=o?o.width:W.drawingBufferWidth,k=W.framebufferHeight,W.framebufferHeight=o?o.height:W.drawingBufferHeight,O=W.framebufferWidth,I=W.framebufferHeight,E=W.viewportWidth,W.viewportWidth=O,T=W.viewportHeight,W.viewportHeight=I,L=es[0],es[0]=h,C=es[1],es[1]=p,V=es[2],es[2]=O,D=es[3],es[3]=I,G=W.framebufferWidth,R=W.framebufferHeight,q=ea[0],ea[0]=m,j=ea[1],ea[1]=g,Z=ea[2],ea[2]=G,Y=ea[3],ea[3]=R,($=H.profile)&&(X=performance.now(),t.count++),U=B.count,B.count=_,Q=B.primitive,B.primitive=v,J=f.call(this,W,e,a),K=M[y],M[y]=J,ee=b.call(this,W,e,a),et=M[w],M[w]=ee,ei=s.call(this,W,e,a),er=M[x],M[x]=ei,en=d.call(this,W,e,a),el=M[S],M[S]=en,eo=z.state,z.state=1,ef=z.x,z.x=0,ec=z.y,z.y=0,ed=z.z,z.z=0,eu=z.w,z.w=0,eb=z.buffer,z.buffer=n,eh=z.size,z.size=2,ep=z.normalized,z.normalized=!1,em=z.type,z.type=5126,eg=z.offset,z.offset=0,e_=z.stride,z.stride=0,ev=z.divisor,z.divisor=0,ey=P.vert,P.vert=F,ew=P.frag,P.frag=A,H.dirty=!0,r(W,e,a),N.next=c,W.framebufferWidth=u,W.framebufferHeight=k,W.viewportWidth=E,W.viewportHeight=T,es[0]=L,es[1]=C,es[2]=V,es[3]=D,ea[0]=q,ea[1]=j,ea[2]=Z,ea[3]=Y,$&&(t.cpuTime+=performance.now()-X),B.count=U,B.primitive=Q,M[y]=K,M[w]=et,M[x]=er,M[S]=el,z.state=eo,z.x=ef,z.y=ec,z.z=ed,z.w=eu,z.buffer=eb,z.size=eh,z.normalized=ep,z.type=em,z.offset=eg,z.stride=e_,z.divisor=ev,P.vert=ey,P.frag=ew,H.dirty=!0},batch:function(e,h){var p,m,g,_,v,y,w,x,S,z,F,A,P,M,ea,es,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt;for(L.angle_instanced_arrays,p=i.call(this,W,e,0),m=N.getFramebuffer(p),g=N.next,N.next=m,_=W.framebufferWidth,W.framebufferWidth=m?m.width:W.drawingBufferWidth,v=W.framebufferHeight,W.framebufferHeight=m?m.height:W.drawingBufferHeight,m!==N.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),N.cur=m),H.dirty&&((ef=O.dither)!==H.dither&&(ef?k.enable(3024):k.disable(3024),H.dither=ef),(ec=O.blend_enable)!==H.blend_enable&&(ec?k.enable(3042):k.disable(3042),H.blend_enable=ec),ed=C[0],eu=C[1],eb=C[2],eh=C[3],(ed!==V[0]||eu!==V[1]||eb!==V[2]||eh!==V[3])&&(k.blendColor(ed,eu,eb,eh),V[0]=ed,V[1]=eu,V[2]=eb,V[3]=eh),ep=D[0],em=D[1],(ep!==G[0]||em!==G[1])&&(k.blendEquationSeparate(ep,em),G[0]=ep,G[1]=em),eg=R[0],e_=R[1],ev=R[2],ey=R[3],(eg!==q[0]||e_!==q[1]||ev!==q[2]||ey!==q[3])&&(k.blendFuncSeparate(eg,e_,ev,ey),q[0]=eg,q[1]=e_,q[2]=ev,q[3]=ey),(ew=O.depth_enable)!==H.depth_enable&&(ew?k.enable(2929):k.disable(2929),H.depth_enable=ew),(ex=O.depth_func)!==H.depth_func&&(k.depthFunc(ex),H.depth_func=ex),eS=j[0],ez=j[1],(eS!==Z[0]||ez!==Z[1])&&(k.depthRange(eS,ez),Z[0]=eS,Z[1]=ez),(eF=O.depth_mask)!==H.depth_mask&&(k.depthMask(eF),H.depth_mask=eF),eA=Y[0],ek=Y[1],eW=Y[2],eO=Y[3],(eA!==$[0]||ek!==$[1]||eW!==$[2]||eO!==$[3])&&(k.colorMask(eA,ek,eW,eO),$[0]=eA,$[1]=ek,$[2]=eW,$[3]=eO),(eH=O.cull_enable)!==H.cull_enable&&(eH?k.enable(2884):k.disable(2884),H.cull_enable=eH),(eB=O.cull_face)!==H.cull_face&&(k.cullFace(eB),H.cull_face=eB),(eI=O.frontFace)!==H.frontFace&&(k.frontFace(eI),H.frontFace=eI),(eP=O.lineWidth)!==H.lineWidth&&(k.lineWidth(eP),H.lineWidth=eP),(eE=O.polygonOffset_enable)!==H.polygonOffset_enable&&(eE?k.enable(32823):k.disable(32823),H.polygonOffset_enable=eE),eT=X[0],eM=X[1],(eT!==U[0]||eM!==U[1])&&(k.polygonOffset(eT,eM),U[0]=eT,U[1]=eM),(eN=O.sample_alpha)!==H.sample_alpha&&(eN?k.enable(32926):k.disable(32926),H.sample_alpha=eN),(eL=O.sample_enable)!==H.sample_enable&&(eL?k.enable(32928):k.disable(32928),H.sample_enable=eL),eC=Q[0],eV=Q[1],(eC!==J[0]||eV!==J[1])&&(k.sampleCoverage(eC,eV),J[0]=eC,J[1]=eV),(eD=O.stencil_enable)!==H.stencil_enable&&(eD?k.enable(2960):k.disable(2960),H.stencil_enable=eD),(eG=O.stencil_mask)!==H.stencil_mask&&(k.stencilMask(eG),H.stencil_mask=eG),eR=K[0],eq=K[1],ej=K[2],(eR!==ee[0]||eq!==ee[1]||ej!==ee[2])&&(k.stencilFunc(eR,eq,ej),ee[0]=eR,ee[1]=eq,ee[2]=ej),eZ=et[0],eY=et[1],e$=et[2],eX=et[3],(eZ!==ei[0]||eY!==ei[1]||e$!==ei[2]||eX!==ei[3])&&(k.stencilOpSeparate(eZ,eY,e$,eX),ei[0]=eZ,ei[1]=eY,ei[2]=e$,ei[3]=eX),eU=er[0],eQ=er[1],eJ=er[2],eK=er[3],(eU!==en[0]||eQ!==en[1]||eJ!==en[2]||eK!==en[3])&&(k.stencilOpSeparate(eU,eQ,eJ,eK),en[0]=eU,en[1]=eQ,en[2]=eJ,en[3]=eK),(e0=O.scissor_enable)!==H.scissor_enable&&(e0?k.enable(3089):k.disable(3089),H.scissor_enable=e0)),y=W.framebufferWidth,w=W.framebufferHeight,x=W.viewportWidth,W.viewportWidth=y,S=W.viewportHeight,W.viewportHeight=w,k.viewport(0,0,y,w),eo[0]=0,eo[1]=0,eo[2]=y,eo[3]=w,z=W.framebufferWidth,F=W.framebufferHeight,k.scissor(0,0,z,F),el[0]=0,el[1]=0,el[2]=z,el[3]=F,(A=H.profile)&&(P=performance.now(),t.count+=h),k.useProgram(r.program),M=L.angle_instanced_arrays,T.setVAO(null),(e1=E[e2=a.location]).buffer||k.enableVertexAttribArray(e2),(5126!==e1.type||2!==e1.size||e1.buffer!==n||!1!==e1.normalized||0!==e1.offset||0!==e1.stride)&&(k.bindBuffer(34962,n.buffer),k.vertexAttribPointer(e2,2,5126,!1,0,0),e1.type=5126,e1.size=2,e1.buffer=n,e1.normalized=!1,e1.offset=0,e1.stride=0),0!==e1.divisor&&(M.vertexAttribDivisorANGLE(e2,0),e1.divisor=0),e3=s.call(this,W,es,ea),k.uniform1f(l.location,e3),(e4=f.call(this,W,es,ea))&&"framebuffer"===e4._reglType&&(e4=e4.color[0]),e6=e4._texture,k.uniform1i(o.location,e6.bind()),e9=d.call(this,W,es,ea),k.uniform1f(c.location,e9),(e8=b.call(this,W,es,ea))&&"framebuffer"===e8._reglType&&(e8=e8.color[0]),e5=e8._texture,k.uniform1i(u.location,e5.bind()),(e7=B.elements)?k.bindBuffer(34963,e7.buffer.buffer):T.currentVAO&&(e7=I.getElements(T.currentVAO.elements))&&k.bindBuffer(34963,e7.buffer.buffer),te=B.offset,tt=B.instances,ea=0;ea<h;++ea)es=e[ea],tt>0?e7?M.drawElementsInstancedANGLE(5,4,e7.type,te<<(e7.type-5121>>1),tt):M.drawArraysInstancedANGLE(5,te,4,tt):tt<0&&(e7?k.drawElements(5,4,e7.type,te<<(e7.type-5121>>1)):k.drawArrays(5,te,4));e6.unbind(),e5.unbind(),H.dirty=!0,T.setVAO(null),N.next=g,W.framebufferWidth=_,W.framebufferHeight=v,W.viewportWidth=x,W.viewportHeight=S,A&&(t.cpuTime+=performance.now()-P)}}},"938b883103cfb116eacc46c77dd09ff2ea4342f4f2480e4fa8393a27b4dad686":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef){var ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY;return ec=e.gl,ed=e.context,e.strings,eu=e.next,eb=e.current,eh=e.draw,ep=e.elements,e.buffer,em=e.shader,eg=e.attributes,e_=e.vao,ev=e.uniforms,ey=e.framebuffer,ew=e.extensions,e.timer,e.isBufferArgs,ex=eu.blend_color,eS=eb.blend_color,ez=eu.blend_equation,eF=eb.blend_equation,eA=eu.blend_func,ek=eb.blend_func,eW=eu.depth_range,eO=eb.depth_range,eH=eu.colorMask,eB=eb.colorMask,eI=eu.polygonOffset_offset,eP=eb.polygonOffset_offset,eE=eu.sample_coverage,eT=eb.sample_coverage,eM=eu.stencil_func,eN=eb.stencil_func,eL=eu.stencil_opFront,eC=eb.stencil_opFront,eV=eu.stencil_opBack,eD=eb.stencil_opBack,eG=eu.scissor_box,eR=eb.scissor_box,eq=eu.viewport,ej=eb.viewport,eZ=new Float32Array(9),eY=new Float32Array(9),{draw:function(e){var T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,em,ev,ez,eA,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS;ew.angle_instanced_arrays,(T=ey.next)!==ey.cur&&(T?ec.bindFramebuffer(36160,T.framebuffer):ec.bindFramebuffer(36160,null),ey.cur=T),eb.dirty&&((em=eu.dither)!==eb.dither&&(em?ec.enable(3024):ec.disable(3024),eb.dither=em),ev=ex[0],ez=ex[1],eA=ex[2],eY=ex[3],(ev!==eS[0]||ez!==eS[1]||eA!==eS[2]||eY!==eS[3])&&(ec.blendColor(ev,ez,eA,eY),eS[0]=ev,eS[1]=ez,eS[2]=eA,eS[3]=eY),(e$=eu.depth_func)!==eb.depth_func&&(ec.depthFunc(e$),eb.depth_func=e$),eX=eW[0],eU=eW[1],(eX!==eO[0]||eU!==eO[1])&&(ec.depthRange(eX,eU),eO[0]=eX,eO[1]=eU),eQ=eH[0],eJ=eH[1],eK=eH[2],e0=eH[3],(eQ!==eB[0]||eJ!==eB[1]||eK!==eB[2]||e0!==eB[3])&&(ec.colorMask(eQ,eJ,eK,e0),eB[0]=eQ,eB[1]=eJ,eB[2]=eK,eB[3]=e0),(e2=eu.cull_enable)!==eb.cull_enable&&(e2?ec.enable(2884):ec.disable(2884),eb.cull_enable=e2),(e1=eu.cull_face)!==eb.cull_face&&(ec.cullFace(e1),eb.cull_face=e1),(e3=eu.frontFace)!==eb.frontFace&&(ec.frontFace(e3),eb.frontFace=e3),(e4=eu.lineWidth)!==eb.lineWidth&&(ec.lineWidth(e4),eb.lineWidth=e4),(e6=eu.polygonOffset_enable)!==eb.polygonOffset_enable&&(e6?ec.enable(32823):ec.disable(32823),eb.polygonOffset_enable=e6),e9=eI[0],e8=eI[1],(e9!==eP[0]||e8!==eP[1])&&(ec.polygonOffset(e9,e8),eP[0]=e9,eP[1]=e8),(e5=eu.sample_alpha)!==eb.sample_alpha&&(e5?ec.enable(32926):ec.disable(32926),eb.sample_alpha=e5),(e7=eu.sample_enable)!==eb.sample_enable&&(e7?ec.enable(32928):ec.disable(32928),eb.sample_enable=e7),te=eE[0],tt=eE[1],(te!==eT[0]||tt!==eT[1])&&(ec.sampleCoverage(te,tt),eT[0]=te,eT[1]=tt),(ti=eu.stencil_enable)!==eb.stencil_enable&&(ti?ec.enable(2960):ec.disable(2960),eb.stencil_enable=ti),(tr=eu.stencil_mask)!==eb.stencil_mask&&(ec.stencilMask(tr),eb.stencil_mask=tr),tn=eM[0],ta=eM[1],tl=eM[2],(tn!==eN[0]||ta!==eN[1]||tl!==eN[2])&&(ec.stencilFunc(tn,ta,tl),eN[0]=tn,eN[1]=ta,eN[2]=tl),ts=eL[0],to=eL[1],tf=eL[2],tc=eL[3],(ts!==eC[0]||to!==eC[1]||tf!==eC[2]||tc!==eC[3])&&(ec.stencilOpSeparate(ts,to,tf,tc),eC[0]=ts,eC[1]=to,eC[2]=tf,eC[3]=tc),td=eV[0],tu=eV[1],tb=eV[2],th=eV[3],(td!==eD[0]||tu!==eD[1]||tb!==eD[2]||th!==eD[3])&&(ec.stencilOpSeparate(td,tu,tb,th),eD[0]=td,eD[1]=tu,eD[2]=tb,eD[3]=th),(tp=eu.scissor_enable)!==eb.scissor_enable&&(tp?ec.enable(3089):ec.disable(3089),eb.scissor_enable=tp),tm=eG[0],tg=eG[1],t_=eG[2],tv=eG[3],(tm!==eR[0]||tg!==eR[1]||t_!==eR[2]||tv!==eR[3])&&(ec.scissor(tm,tg,t_,tv),eR[0]=tm,eR[1]=tg,eR[2]=t_,eR[3]=tv),ty=eq[0],tw=eq[1],tx=eq[2],tS=eq[3],(ty!==ej[0]||tw!==ej[1]||tx!==ej[2]||tS!==ej[3])&&(ec.viewport(ty,tw,tx,tS),ej[0]=ty,ej[1]=tw,ej[2]=tx,ej[3]=tS)),i?ec.enable(3042):ec.disable(3042),eb.blend_enable=i,ec.blendEquationSeparate(32774,32774),eF[0]=32774,eF[1]=32774,ec.blendFuncSeparate(770,771,1,771),ek[0]=770,ek[1]=771,ek[2]=1,ek[3]=771,r?ec.enable(2929):ec.disable(2929),eb.depth_enable=r,ec.depthMask(n),eb.depth_mask=n,(M=eb.profile)&&(N=performance.now(),t.count++),ec.useProgram(a.program),L=ew.angle_instanced_arrays,e_.setVAO(null),(V=eg[C=s.location]).buffer||ec.enableVertexAttribArray(C),(5126!==V.type||2!==V.size||V.buffer!==l||!1!==V.normalized||0!==V.offset||0!==V.stride)&&(ec.bindBuffer(34962,l.buffer),ec.vertexAttribPointer(C,2,5126,!1,0,0),V.type=5126,V.size=2,V.buffer=l,V.normalized=!1,V.offset=0,V.stride=0),0!==V.divisor&&(L.vertexAttribDivisorANGLE(C,0),V.divisor=0),D=f.call(this,ed,e,0),ec.uniform1f(o.location,D),G=d.call(this,ed,e,0),ec.uniform1f(c.location,G),(R=b.call(this,ed,e,0))&&"framebuffer"===R._reglType&&(R=R.color[0]),q=R._texture,ec.uniform1i(u.location,q.bind()),(j=p.call(this,ed,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),Z=j._texture,ec.uniform1i(h.location,Z.bind()),(Y=g.call(this,ed,e,0))&&"framebuffer"===Y._reglType&&(Y=Y.color[0]),$=Y._texture,ec.uniform1i(m.location,$.bind()),X=v.call(this,ed,e,0),ec.uniform1f(_.location,X),(U=w.call(this,ed,e,0))&&"framebuffer"===U._reglType&&(U=U.color[0]),Q=U._texture,ec.uniform1i(y.location,Q.bind()),J=S.call(this,ed,e,0),ec.uniform1f(x.location,J),K=F.call(this,ed,e,0),ec.uniform1i(z.location,K),et=(ee=k.call(this,ed,e,0))[0],ei=ee[1],ec.uniform2f(A.location,et,ei),er=O.call(this,ed,e,0),ec.uniform1f(W.location,er),en=B.call(this,ed,e,0),ec.uniform1f(H.location,en),ea=P.call(this,ed,e,0),ec.uniformMatrix3fv(I.location,!1,Array.isArray(ea)||ea instanceof Float32Array?ea:(eZ[0]=ea[0],eZ[1]=ea[1],eZ[2]=ea[2],eZ[3]=ea[3],eZ[4]=ea[4],eZ[5]=ea[5],eZ[6]=ea[6],eZ[7]=ea[7],eZ[8]=ea[8],eZ)),(el=eh.elements)?ec.bindBuffer(34963,el.buffer.buffer):e_.currentVAO&&(el=ep.getElements(e_.currentVAO.elements))&&ec.bindBuffer(34963,el.buffer.buffer),es=eh.offset,(eo=E.call(this,ed,e,0))&&((ef=eh.instances)>0?el?L.drawElementsInstancedANGLE(0,eo,el.type,es<<(el.type-5121>>1),ef):L.drawArraysInstancedANGLE(0,es,eo,ef):ef<0&&(el?ec.drawElements(0,eo,el.type,es<<(el.type-5121>>1)):ec.drawArrays(0,es,eo)),eb.dirty=!0,e_.setVAO(null),M&&(t.cpuTime+=performance.now()-N),q.unbind(),Z.unbind(),$.unbind(),Q.unbind())},scope:function(e,i,r){var n,a,s,o,c,u,h,m,_,y,x,z,A,W,H,I,es,eo,ef,ec,ep,eg,e_,ey,ew,ex,eS,eF,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ;n=eu.blend_enable,eu.blend_enable=T,a=ez[0],ez[0]=M,s=ez[1],ez[1]=N,o=eA[0],eA[0]=L,c=eA[1],eA[1]=C,u=eA[2],eA[2]=V,h=eA[3],eA[3]=D,m=eu.depth_enable,eu.depth_enable=G,_=eu.depth_mask,eu.depth_mask=R,(y=eb.profile)&&(x=performance.now(),t.count++),z=E.call(this,ed,e,r),A=eh.count,eh.count=z,W=eh.primitive,eh.primitive=q,H=w.call(this,ed,e,r),I=ev[j],ev[j]=H,es=b.call(this,ed,e,r),eo=ev[Z],ev[Z]=es,ef=p.call(this,ed,e,r),ec=ev[Y],ev[Y]=ef,ep=g.call(this,ed,e,r),eg=ev[$],ev[$]=ep,e_=S.call(this,ed,e,r),ey=ev[X],ev[X]=e_,ew=O.call(this,ed,e,r),ex=ev[U],ev[U]=ew,eS=v.call(this,ed,e,r),eF=ev[Q],ev[Q]=eS,ek=P.call(this,ed,e,r),eW=ev[J],ev[J]=ek,eO=B.call(this,ed,e,r),eH=ev[K],ev[K]=eO,eB=k.call(this,ed,e,r),eI=ev[ee],ev[ee]=eB,eP=f.call(this,ed,e,r),eE=ev[et],ev[et]=eP,eT=F.call(this,ed,e,r),eM=ev[ei],ev[ei]=eT,eN=d.call(this,ed,e,r),eL=ev[er],ev[er]=eN,eC=en.state,en.state=1,eV=en.x,en.x=0,eD=en.y,en.y=0,eG=en.z,en.z=0,eR=en.w,en.w=0,eq=en.buffer,en.buffer=l,ej=en.size,en.size=2,eZ=en.normalized,en.normalized=!1,eY=en.type,en.type=5126,e$=en.offset,en.offset=0,eX=en.stride,en.stride=0,eU=en.divisor,en.divisor=0,eQ=em.vert,em.vert=ea,eJ=em.frag,em.frag=el,eb.dirty=!0,i(ed,e,r),eu.blend_enable=n,ez[0]=a,ez[1]=s,eA[0]=o,eA[1]=c,eA[2]=u,eA[3]=h,eu.depth_enable=m,eu.depth_mask=_,y&&(t.cpuTime+=performance.now()-x),eh.count=A,eh.primitive=W,ev[j]=I,ev[Z]=eo,ev[Y]=ec,ev[$]=eg,ev[X]=ey,ev[U]=ex,ev[Q]=eF,ev[J]=eW,ev[K]=eH,ev[ee]=eI,ev[et]=eE,ev[ei]=eM,ev[er]=eL,en.state=eC,en.x=eV,en.y=eD,en.z=eG,en.w=eR,en.buffer=eq,en.size=ej,en.normalized=eZ,en.type=eY,en.offset=e$,en.stride=eX,en.divisor=eU,em.vert=eQ,em.frag=eJ,eb.dirty=!0},batch:function(e,i){var r,n,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,em,ev,ez,eA,eZ,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS,tz,tF,tA;for(ew.angle_instanced_arrays,(r=ey.next)!==ey.cur&&(r?ec.bindFramebuffer(36160,r.framebuffer):ec.bindFramebuffer(36160,null),ey.cur=r),eb.dirty&&((C=eu.dither)!==eb.dither&&(C?ec.enable(3024):ec.disable(3024),eb.dither=C),V=ex[0],D=ex[1],G=ex[2],R=ex[3],(V!==eS[0]||D!==eS[1]||G!==eS[2]||R!==eS[3])&&(ec.blendColor(V,D,G,R),eS[0]=V,eS[1]=D,eS[2]=G,eS[3]=R),(q=eu.depth_func)!==eb.depth_func&&(ec.depthFunc(q),eb.depth_func=q),j=eW[0],Z=eW[1],(j!==eO[0]||Z!==eO[1])&&(ec.depthRange(j,Z),eO[0]=j,eO[1]=Z),Y=eH[0],$=eH[1],X=eH[2],U=eH[3],(Y!==eB[0]||$!==eB[1]||X!==eB[2]||U!==eB[3])&&(ec.colorMask(Y,$,X,U),eB[0]=Y,eB[1]=$,eB[2]=X,eB[3]=U),(Q=eu.cull_enable)!==eb.cull_enable&&(Q?ec.enable(2884):ec.disable(2884),eb.cull_enable=Q),(J=eu.cull_face)!==eb.cull_face&&(ec.cullFace(J),eb.cull_face=J),(K=eu.frontFace)!==eb.frontFace&&(ec.frontFace(K),eb.frontFace=K),(ee=eu.lineWidth)!==eb.lineWidth&&(ec.lineWidth(ee),eb.lineWidth=ee),(et=eu.polygonOffset_enable)!==eb.polygonOffset_enable&&(et?ec.enable(32823):ec.disable(32823),eb.polygonOffset_enable=et),ei=eI[0],er=eI[1],(ei!==eP[0]||er!==eP[1])&&(ec.polygonOffset(ei,er),eP[0]=ei,eP[1]=er),(en=eu.sample_alpha)!==eb.sample_alpha&&(en?ec.enable(32926):ec.disable(32926),eb.sample_alpha=en),(ea=eu.sample_enable)!==eb.sample_enable&&(ea?ec.enable(32928):ec.disable(32928),eb.sample_enable=ea),el=eE[0],em=eE[1],(el!==eT[0]||em!==eT[1])&&(ec.sampleCoverage(el,em),eT[0]=el,eT[1]=em),(ev=eu.stencil_enable)!==eb.stencil_enable&&(ev?ec.enable(2960):ec.disable(2960),eb.stencil_enable=ev),(ez=eu.stencil_mask)!==eb.stencil_mask&&(ec.stencilMask(ez),eb.stencil_mask=ez),eA=eM[0],eZ=eM[1],e$=eM[2],(eA!==eN[0]||eZ!==eN[1]||e$!==eN[2])&&(ec.stencilFunc(eA,eZ,e$),eN[0]=eA,eN[1]=eZ,eN[2]=e$),eX=eL[0],eU=eL[1],eQ=eL[2],eJ=eL[3],(eX!==eC[0]||eU!==eC[1]||eQ!==eC[2]||eJ!==eC[3])&&(ec.stencilOpSeparate(eX,eU,eQ,eJ),eC[0]=eX,eC[1]=eU,eC[2]=eQ,eC[3]=eJ),eK=eV[0],e0=eV[1],e2=eV[2],e1=eV[3],(eK!==eD[0]||e0!==eD[1]||e2!==eD[2]||e1!==eD[3])&&(ec.stencilOpSeparate(eK,e0,e2,e1),eD[0]=eK,eD[1]=e0,eD[2]=e2,eD[3]=e1),(e3=eu.scissor_enable)!==eb.scissor_enable&&(e3?ec.enable(3089):ec.disable(3089),eb.scissor_enable=e3),e4=eG[0],e6=eG[1],e9=eG[2],e8=eG[3],(e4!==eR[0]||e6!==eR[1]||e9!==eR[2]||e8!==eR[3])&&(ec.scissor(e4,e6,e9,e8),eR[0]=e4,eR[1]=e6,eR[2]=e9,eR[3]=e8),e5=eq[0],e7=eq[1],te=eq[2],tt=eq[3],(e5!==ej[0]||e7!==ej[1]||te!==ej[2]||tt!==ej[3])&&(ec.viewport(e5,e7,te,tt),ej[0]=e5,ej[1]=e7,ej[2]=te,ej[3]=tt)),es?ec.enable(3042):ec.disable(3042),eb.blend_enable=es,ec.blendEquationSeparate(32774,32774),eF[0]=32774,eF[1]=32774,ec.blendFuncSeparate(770,771,1,771),ek[0]=770,ek[1]=771,ek[2]=1,ek[3]=771,eo?ec.enable(2929):ec.disable(2929),eb.depth_enable=eo,ec.depthMask(ef),eb.depth_mask=ef,(n=eb.profile)&&(T=performance.now(),t.count+=i),ec.useProgram(a.program),M=ew.angle_instanced_arrays,e_.setVAO(null),(tr=eg[ti=s.location]).buffer||ec.enableVertexAttribArray(ti),(5126!==tr.type||2!==tr.size||tr.buffer!==l||!1!==tr.normalized||0!==tr.offset||0!==tr.stride)&&(ec.bindBuffer(34962,l.buffer),ec.vertexAttribPointer(ti,2,5126,!1,0,0),tr.type=5126,tr.size=2,tr.buffer=l,tr.normalized=!1,tr.offset=0,tr.stride=0),0!==tr.divisor&&(M.vertexAttribDivisorANGLE(ti,0),tr.divisor=0),tn=f.call(this,ed,L,N),ec.uniform1f(o.location,tn),ta=d.call(this,ed,L,N),ec.uniform1f(c.location,ta),(tl=b.call(this,ed,L,N))&&"framebuffer"===tl._reglType&&(tl=tl.color[0]),ts=tl._texture,ec.uniform1i(u.location,ts.bind()),(to=p.call(this,ed,L,N))&&"framebuffer"===to._reglType&&(to=to.color[0]),tf=to._texture,ec.uniform1i(h.location,tf.bind()),(tc=g.call(this,ed,L,N))&&"framebuffer"===tc._reglType&&(tc=tc.color[0]),td=tc._texture,ec.uniform1i(m.location,td.bind()),tu=v.call(this,ed,L,N),ec.uniform1f(_.location,tu),(tb=w.call(this,ed,L,N))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]),th=tb._texture,ec.uniform1i(y.location,th.bind()),tp=S.call(this,ed,L,N),ec.uniform1f(x.location,tp),tm=F.call(this,ed,L,N),ec.uniform1i(z.location,tm),t_=(tg=k.call(this,ed,L,N))[0],tv=tg[1],ec.uniform2f(A.location,t_,tv),ty=O.call(this,ed,L,N),ec.uniform1f(W.location,ty),tw=B.call(this,ed,L,N),ec.uniform1f(H.location,tw),tx=P.call(this,ed,L,N),ec.uniformMatrix3fv(I.location,!1,Array.isArray(tx)||tx instanceof Float32Array?tx:(eY[0]=tx[0],eY[1]=tx[1],eY[2]=tx[2],eY[3]=tx[3],eY[4]=tx[4],eY[5]=tx[5],eY[6]=tx[6],eY[7]=tx[7],eY[8]=tx[8],eY)),(tS=eh.elements)?ec.bindBuffer(34963,tS.buffer.buffer):e_.currentVAO&&(tS=ep.getElements(e_.currentVAO.elements))&&ec.bindBuffer(34963,tS.buffer.buffer),tz=eh.offset,tF=E.call(this,ed,L,N),tA=eh.instances,N=0;N<i;++N)L=e[N],tF&&(tA>0?tS?M.drawElementsInstancedANGLE(0,tF,tS.type,tz<<(tS.type-5121>>1),tA):M.drawArraysInstancedANGLE(0,tz,tF,tA):tA<0&&(tS?ec.drawElements(0,tF,tS.type,tz<<(tS.type-5121>>1)):ec.drawArrays(0,tz,tF)));ts.unbind(),tf.unbind(),td.unbind(),th.unbind(),eb.dirty=!0,e_.setVAO(null),n&&(t.cpuTime+=performance.now()-T)}}},d4e6917d633ef08caab467b393ac4c3f800c4c7b3ab0efd4f7f5b82c281cafb1:function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y){var $,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB;return $=e.gl,X=e.context,e.strings,U=e.next,Q=e.current,J=e.draw,K=e.elements,e.buffer,ee=e.shader,et=e.attributes,ei=e.vao,er=e.uniforms,en=e.framebuffer,ea=e.extensions,e.timer,e.isBufferArgs,el=U.blend_color,es=Q.blend_color,eo=U.blend_equation,ef=Q.blend_equation,ec=U.blend_func,ed=Q.blend_func,eu=U.depth_range,eb=Q.depth_range,eh=U.colorMask,ep=Q.colorMask,em=U.polygonOffset_offset,eg=Q.polygonOffset_offset,e_=U.sample_coverage,ev=Q.sample_coverage,ey=U.stencil_func,ew=Q.stencil_func,ex=U.stencil_opFront,eS=Q.stencil_opFront,ez=U.stencil_opBack,eF=Q.stencil_opBack,eA=U.scissor_box,ek=Q.scissor_box,eW=U.viewport,eO=Q.viewport,eH=new Float32Array(9),eB=new Float32Array(9),{draw:function(e){var W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,ee,er,eA,eW,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS,tz,tF,tA;ea.angle_instanced_arrays,W=i.call(this,X,e,0),O=en.getFramebuffer(W),H=en.next,en.next=O,B=X.framebufferWidth,X.framebufferWidth=O?O.width:X.drawingBufferWidth,I=X.framebufferHeight,X.framebufferHeight=O?O.height:X.drawingBufferHeight,O!==en.cur&&(O?$.bindFramebuffer(36160,O.framebuffer):$.bindFramebuffer(36160,null),en.cur=O),Q.dirty&&((ej=U.dither)!==Q.dither&&(ej?$.enable(3024):$.disable(3024),Q.dither=ej),(eZ=U.blend_enable)!==Q.blend_enable&&(eZ?$.enable(3042):$.disable(3042),Q.blend_enable=eZ),eY=el[0],e$=el[1],eX=el[2],eU=el[3],(eY!==es[0]||e$!==es[1]||eX!==es[2]||eU!==es[3])&&($.blendColor(eY,e$,eX,eU),es[0]=eY,es[1]=e$,es[2]=eX,es[3]=eU),eQ=eo[0],eJ=eo[1],(eQ!==ef[0]||eJ!==ef[1])&&($.blendEquationSeparate(eQ,eJ),ef[0]=eQ,ef[1]=eJ),eK=ec[0],e0=ec[1],e2=ec[2],e1=ec[3],(eK!==ed[0]||e0!==ed[1]||e2!==ed[2]||e1!==ed[3])&&($.blendFuncSeparate(eK,e0,e2,e1),ed[0]=eK,ed[1]=e0,ed[2]=e2,ed[3]=e1),(e3=U.depth_enable)!==Q.depth_enable&&(e3?$.enable(2929):$.disable(2929),Q.depth_enable=e3),(e4=U.depth_func)!==Q.depth_func&&($.depthFunc(e4),Q.depth_func=e4),e6=eu[0],e9=eu[1],(e6!==eb[0]||e9!==eb[1])&&($.depthRange(e6,e9),eb[0]=e6,eb[1]=e9),(e8=U.depth_mask)!==Q.depth_mask&&($.depthMask(e8),Q.depth_mask=e8),e5=eh[0],e7=eh[1],te=eh[2],tt=eh[3],(e5!==ep[0]||e7!==ep[1]||te!==ep[2]||tt!==ep[3])&&($.colorMask(e5,e7,te,tt),ep[0]=e5,ep[1]=e7,ep[2]=te,ep[3]=tt),(ti=U.cull_enable)!==Q.cull_enable&&(ti?$.enable(2884):$.disable(2884),Q.cull_enable=ti),(tr=U.cull_face)!==Q.cull_face&&($.cullFace(tr),Q.cull_face=tr),(tn=U.frontFace)!==Q.frontFace&&($.frontFace(tn),Q.frontFace=tn),(ta=U.lineWidth)!==Q.lineWidth&&($.lineWidth(ta),Q.lineWidth=ta),(tl=U.polygonOffset_enable)!==Q.polygonOffset_enable&&(tl?$.enable(32823):$.disable(32823),Q.polygonOffset_enable=tl),ts=em[0],to=em[1],(ts!==eg[0]||to!==eg[1])&&($.polygonOffset(ts,to),eg[0]=ts,eg[1]=to),(tf=U.sample_alpha)!==Q.sample_alpha&&(tf?$.enable(32926):$.disable(32926),Q.sample_alpha=tf),(tc=U.sample_enable)!==Q.sample_enable&&(tc?$.enable(32928):$.disable(32928),Q.sample_enable=tc),td=e_[0],tu=e_[1],(td!==ev[0]||tu!==ev[1])&&($.sampleCoverage(td,tu),ev[0]=td,ev[1]=tu),(tb=U.stencil_enable)!==Q.stencil_enable&&(tb?$.enable(2960):$.disable(2960),Q.stencil_enable=tb),(th=U.stencil_mask)!==Q.stencil_mask&&($.stencilMask(th),Q.stencil_mask=th),tp=ey[0],tm=ey[1],tg=ey[2],(tp!==ew[0]||tm!==ew[1]||tg!==ew[2])&&($.stencilFunc(tp,tm,tg),ew[0]=tp,ew[1]=tm,ew[2]=tg),t_=ex[0],tv=ex[1],ty=ex[2],tw=ex[3],(t_!==eS[0]||tv!==eS[1]||ty!==eS[2]||tw!==eS[3])&&($.stencilOpSeparate(t_,tv,ty,tw),eS[0]=t_,eS[1]=tv,eS[2]=ty,eS[3]=tw),tx=ez[0],tS=ez[1],tz=ez[2],tF=ez[3],(tx!==eF[0]||tS!==eF[1]||tz!==eF[2]||tF!==eF[3])&&($.stencilOpSeparate(tx,tS,tz,tF),eF[0]=tx,eF[1]=tS,eF[2]=tz,eF[3]=tF),(tA=U.scissor_enable)!==Q.scissor_enable&&(tA?$.enable(3089):$.disable(3089),Q.scissor_enable=tA)),P=X.framebufferWidth,E=X.framebufferHeight,T=X.viewportWidth,X.viewportWidth=P,M=X.viewportHeight,X.viewportHeight=E,$.viewport(0,0,P,E),eO[0]=0,eO[1]=0,eO[2]=P,eO[3]=E,N=X.framebufferWidth,L=X.framebufferHeight,$.scissor(0,0,N,L),ek[0]=0,ek[1]=0,ek[2]=N,ek[3]=L,(C=Q.profile)&&(V=performance.now(),t.count++),$.useProgram(r.program),D=ea.angle_instanced_arrays,ei.setVAO(null),(R=et[G=a.location]).buffer||$.enableVertexAttribArray(G),(5126!==R.type||2!==R.size||R.buffer!==n||!1!==R.normalized||0!==R.offset||0!==R.stride)&&($.bindBuffer(34962,n.buffer),$.vertexAttribPointer(G,2,5126,!1,0,0),R.type=5126,R.size=2,R.buffer=n,R.normalized=!1,R.offset=0,R.stride=0),0!==R.divisor&&(D.vertexAttribDivisorANGLE(G,0),R.divisor=0),q=s.call(this,X,e,0),$.uniform1f(l.location,q),(j=f.call(this,X,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),Z=j._texture,$.uniform1i(o.location,Z.bind()),(Y=d.call(this,X,e,0))&&"framebuffer"===Y._reglType&&(Y=Y.color[0]),ee=Y._texture,$.uniform1i(c.location,ee.bind()),er=b.call(this,X,e,0),$.uniform1f(u.location,er),eA=p.call(this,X,e,0),$.uniform1i(h.location,eA),eB=(eW=g.call(this,X,e,0))[0],eI=eW[1],$.uniform2f(m.location,eB,eI),eE=(eP=v.call(this,X,e,0))[0],eT=eP[1],$.uniform2f(_.location,eE,eT),eN=(eM=w.call(this,X,e,0))[0],eL=eM[1],$.uniform2f(y.location,eN,eL),eC=S.call(this,X,e,0),$.uniform1f(x.location,eC),eV=F.call(this,X,e,0),$.uniform1f(z.location,eV),eD=k.call(this,X,e,0),$.uniformMatrix3fv(A.location,!1,Array.isArray(eD)||eD instanceof Float32Array?eD:(eH[0]=eD[0],eH[1]=eD[1],eH[2]=eD[2],eH[3]=eD[3],eH[4]=eD[4],eH[5]=eD[5],eH[6]=eD[6],eH[7]=eD[7],eH[8]=eD[8],eH)),(eG=J.elements)?$.bindBuffer(34963,eG.buffer.buffer):ei.currentVAO&&(eG=K.getElements(ei.currentVAO.elements))&&$.bindBuffer(34963,eG.buffer.buffer),eR=J.offset,(eq=J.instances)>0?eG?D.drawElementsInstancedANGLE(5,4,eG.type,eR<<(eG.type-5121>>1),eq):D.drawArraysInstancedANGLE(5,eR,4,eq):eq<0&&(eG?$.drawElements(5,4,eG.type,eR<<(eG.type-5121>>1)):$.drawArrays(5,eR,4)),Q.dirty=!0,ei.setVAO(null),en.next=H,X.framebufferWidth=B,X.framebufferHeight=I,X.viewportWidth=T,X.viewportHeight=M,C&&(t.cpuTime+=performance.now()-V),Z.unbind(),ee.unbind()},scope:function(e,r,a){var l,o,c,u,h,m,_,y,x,z,A,$,U,K,et,ei,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,ek,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX;l=i.call(this,X,e,a),o=en.getFramebuffer(l),c=en.next,en.next=o,u=X.framebufferWidth,X.framebufferWidth=o?o.width:X.drawingBufferWidth,h=X.framebufferHeight,X.framebufferHeight=o?o.height:X.drawingBufferHeight,m=X.framebufferWidth,_=X.framebufferHeight,y=X.viewportWidth,X.viewportWidth=m,x=X.viewportHeight,X.viewportHeight=_,z=eW[0],eW[0]=W,A=eW[1],eW[1]=O,$=eW[2],eW[2]=m,U=eW[3],eW[3]=_,K=X.framebufferWidth,et=X.framebufferHeight,ei=eA[0],eA[0]=H,ea=eA[1],eA[1]=B,el=eA[2],eA[2]=K,es=eA[3],eA[3]=et,(eo=Q.profile)&&(ef=performance.now(),t.count++),ec=J.count,J.count=I,ed=J.primitive,J.primitive=P,eu=d.call(this,X,e,a),eb=er[E],er[E]=eu,eh=f.call(this,X,e,a),ep=er[T],er[T]=eh,em=F.call(this,X,e,a),eg=er[M],er[M]=em,e_=g.call(this,X,e,a),ev=er[N],er[N]=e_,ey=S.call(this,X,e,a),ew=er[L],er[L]=ey,ex=k.call(this,X,e,a),eS=er[C],er[C]=ex,ez=b.call(this,X,e,a),eF=er[V],er[V]=ez,ek=v.call(this,X,e,a),eO=er[D],er[D]=ek,eH=w.call(this,X,e,a),eB=er[G],er[G]=eH,eI=p.call(this,X,e,a),eP=er[R],er[R]=eI,eE=s.call(this,X,e,a),eT=er[q],er[q]=eE,eM=j.state,j.state=1,eN=j.x,j.x=0,eL=j.y,j.y=0,eC=j.z,j.z=0,eV=j.w,j.w=0,eD=j.buffer,j.buffer=n,eG=j.size,j.size=2,eR=j.normalized,j.normalized=!1,eq=j.type,j.type=5126,ej=j.offset,j.offset=0,eZ=j.stride,j.stride=0,eY=j.divisor,j.divisor=0,e$=ee.vert,ee.vert=Z,eX=ee.frag,ee.frag=Y,Q.dirty=!0,r(X,e,a),en.next=c,X.framebufferWidth=u,X.framebufferHeight=h,X.viewportWidth=y,X.viewportHeight=x,eW[0]=z,eW[1]=A,eW[2]=$,eW[3]=U,eA[0]=ei,eA[1]=ea,eA[2]=el,eA[3]=es,eo&&(t.cpuTime+=performance.now()-ef),J.count=ec,J.primitive=ed,er[E]=eb,er[T]=ep,er[M]=eg,er[N]=ev,er[L]=ew,er[C]=eS,er[V]=eF,er[D]=eO,er[G]=eB,er[R]=eP,er[q]=eT,j.state=eM,j.x=eN,j.y=eL,j.z=eC,j.w=eV,j.buffer=eD,j.size=eG,j.normalized=eR,j.type=eq,j.offset=ej,j.stride=eZ,j.divisor=eY,ee.vert=e$,ee.frag=eX,Q.dirty=!0},batch:function(e,W){var O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,ee,er,eA,eW,eH,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS,tz,tF,tA,tk,tW,tO;for(ea.angle_instanced_arrays,O=i.call(this,X,e,0),H=en.getFramebuffer(O),B=en.next,en.next=H,I=X.framebufferWidth,X.framebufferWidth=H?H.width:X.drawingBufferWidth,P=X.framebufferHeight,X.framebufferHeight=H?H.height:X.drawingBufferHeight,H!==en.cur&&(H?$.bindFramebuffer(36160,H.framebuffer):$.bindFramebuffer(36160,null),en.cur=H),Q.dirty&&((j=U.dither)!==Q.dither&&(j?$.enable(3024):$.disable(3024),Q.dither=j),(Z=U.blend_enable)!==Q.blend_enable&&(Z?$.enable(3042):$.disable(3042),Q.blend_enable=Z),Y=el[0],ee=el[1],er=el[2],eA=el[3],(Y!==es[0]||ee!==es[1]||er!==es[2]||eA!==es[3])&&($.blendColor(Y,ee,er,eA),es[0]=Y,es[1]=ee,es[2]=er,es[3]=eA),eW=eo[0],eH=eo[1],(eW!==ef[0]||eH!==ef[1])&&($.blendEquationSeparate(eW,eH),ef[0]=eW,ef[1]=eH),eI=ec[0],eP=ec[1],eE=ec[2],eT=ec[3],(eI!==ed[0]||eP!==ed[1]||eE!==ed[2]||eT!==ed[3])&&($.blendFuncSeparate(eI,eP,eE,eT),ed[0]=eI,ed[1]=eP,ed[2]=eE,ed[3]=eT),(eM=U.depth_enable)!==Q.depth_enable&&(eM?$.enable(2929):$.disable(2929),Q.depth_enable=eM),(eN=U.depth_func)!==Q.depth_func&&($.depthFunc(eN),Q.depth_func=eN),eL=eu[0],eC=eu[1],(eL!==eb[0]||eC!==eb[1])&&($.depthRange(eL,eC),eb[0]=eL,eb[1]=eC),(eV=U.depth_mask)!==Q.depth_mask&&($.depthMask(eV),Q.depth_mask=eV),eD=eh[0],eG=eh[1],eR=eh[2],eq=eh[3],(eD!==ep[0]||eG!==ep[1]||eR!==ep[2]||eq!==ep[3])&&($.colorMask(eD,eG,eR,eq),ep[0]=eD,ep[1]=eG,ep[2]=eR,ep[3]=eq),(ej=U.cull_enable)!==Q.cull_enable&&(ej?$.enable(2884):$.disable(2884),Q.cull_enable=ej),(eZ=U.cull_face)!==Q.cull_face&&($.cullFace(eZ),Q.cull_face=eZ),(eY=U.frontFace)!==Q.frontFace&&($.frontFace(eY),Q.frontFace=eY),(e$=U.lineWidth)!==Q.lineWidth&&($.lineWidth(e$),Q.lineWidth=e$),(eX=U.polygonOffset_enable)!==Q.polygonOffset_enable&&(eX?$.enable(32823):$.disable(32823),Q.polygonOffset_enable=eX),eU=em[0],eQ=em[1],(eU!==eg[0]||eQ!==eg[1])&&($.polygonOffset(eU,eQ),eg[0]=eU,eg[1]=eQ),(eJ=U.sample_alpha)!==Q.sample_alpha&&(eJ?$.enable(32926):$.disable(32926),Q.sample_alpha=eJ),(eK=U.sample_enable)!==Q.sample_enable&&(eK?$.enable(32928):$.disable(32928),Q.sample_enable=eK),e0=e_[0],e2=e_[1],(e0!==ev[0]||e2!==ev[1])&&($.sampleCoverage(e0,e2),ev[0]=e0,ev[1]=e2),(e1=U.stencil_enable)!==Q.stencil_enable&&(e1?$.enable(2960):$.disable(2960),Q.stencil_enable=e1),(e3=U.stencil_mask)!==Q.stencil_mask&&($.stencilMask(e3),Q.stencil_mask=e3),e4=ey[0],e6=ey[1],e9=ey[2],(e4!==ew[0]||e6!==ew[1]||e9!==ew[2])&&($.stencilFunc(e4,e6,e9),ew[0]=e4,ew[1]=e6,ew[2]=e9),e8=ex[0],e5=ex[1],e7=ex[2],te=ex[3],(e8!==eS[0]||e5!==eS[1]||e7!==eS[2]||te!==eS[3])&&($.stencilOpSeparate(e8,e5,e7,te),eS[0]=e8,eS[1]=e5,eS[2]=e7,eS[3]=te),tt=ez[0],ti=ez[1],tr=ez[2],tn=ez[3],(tt!==eF[0]||ti!==eF[1]||tr!==eF[2]||tn!==eF[3])&&($.stencilOpSeparate(tt,ti,tr,tn),eF[0]=tt,eF[1]=ti,eF[2]=tr,eF[3]=tn),(ta=U.scissor_enable)!==Q.scissor_enable&&(ta?$.enable(3089):$.disable(3089),Q.scissor_enable=ta)),E=X.framebufferWidth,T=X.framebufferHeight,M=X.viewportWidth,X.viewportWidth=E,N=X.viewportHeight,X.viewportHeight=T,$.viewport(0,0,E,T),eO[0]=0,eO[1]=0,eO[2]=E,eO[3]=T,L=X.framebufferWidth,C=X.framebufferHeight,$.scissor(0,0,L,C),ek[0]=0,ek[1]=0,ek[2]=L,ek[3]=C,(V=Q.profile)&&(D=performance.now(),t.count+=W),$.useProgram(r.program),G=ea.angle_instanced_arrays,ei.setVAO(null),(ts=et[tl=a.location]).buffer||$.enableVertexAttribArray(tl),(5126!==ts.type||2!==ts.size||ts.buffer!==n||!1!==ts.normalized||0!==ts.offset||0!==ts.stride)&&($.bindBuffer(34962,n.buffer),$.vertexAttribPointer(tl,2,5126,!1,0,0),ts.type=5126,ts.size=2,ts.buffer=n,ts.normalized=!1,ts.offset=0,ts.stride=0),0!==ts.divisor&&(G.vertexAttribDivisorANGLE(tl,0),ts.divisor=0),to=s.call(this,X,q,R),$.uniform1f(l.location,to),(tf=f.call(this,X,q,R))&&"framebuffer"===tf._reglType&&(tf=tf.color[0]),tc=tf._texture,$.uniform1i(o.location,tc.bind()),(td=d.call(this,X,q,R))&&"framebuffer"===td._reglType&&(td=td.color[0]),tu=td._texture,$.uniform1i(c.location,tu.bind()),tb=b.call(this,X,q,R),$.uniform1f(u.location,tb),th=p.call(this,X,q,R),$.uniform1i(h.location,th),tm=(tp=g.call(this,X,q,R))[0],tg=tp[1],$.uniform2f(m.location,tm,tg),tv=(t_=v.call(this,X,q,R))[0],ty=t_[1],$.uniform2f(_.location,tv,ty),tx=(tw=w.call(this,X,q,R))[0],tS=tw[1],$.uniform2f(y.location,tx,tS),tz=S.call(this,X,q,R),$.uniform1f(x.location,tz),tF=F.call(this,X,q,R),$.uniform1f(z.location,tF),tA=k.call(this,X,q,R),$.uniformMatrix3fv(A.location,!1,Array.isArray(tA)||tA instanceof Float32Array?tA:(eB[0]=tA[0],eB[1]=tA[1],eB[2]=tA[2],eB[3]=tA[3],eB[4]=tA[4],eB[5]=tA[5],eB[6]=tA[6],eB[7]=tA[7],eB[8]=tA[8],eB)),(tk=J.elements)?$.bindBuffer(34963,tk.buffer.buffer):ei.currentVAO&&(tk=K.getElements(ei.currentVAO.elements))&&$.bindBuffer(34963,tk.buffer.buffer),tW=J.offset,tO=J.instances,R=0;R<W;++R)q=e[R],tO>0?tk?G.drawElementsInstancedANGLE(5,4,tk.type,tW<<(tk.type-5121>>1),tO):G.drawArraysInstancedANGLE(5,tW,4,tO):tO<0&&(tk?$.drawElements(5,4,tk.type,tW<<(tk.type-5121>>1)):$.drawArrays(5,tW,4));tc.unbind(),tu.unbind(),Q.dirty=!0,ei.setVAO(null),en.next=B,X.framebufferWidth=I,X.framebufferHeight=P,X.viewportWidth=M,X.viewportHeight=N,V&&(t.cpuTime+=performance.now()-D)}}},"4b1048018d132017f70c93d90fb6866b8a15897d22afb4f95c53227794027ed2":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h){var p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X;return p=e.gl,m=e.context,e.strings,g=e.next,_=e.current,v=e.draw,y=e.elements,e.buffer,w=e.shader,x=e.attributes,S=e.vao,e.uniforms,z=e.framebuffer,F=e.extensions,e.timer,e.isBufferArgs,A=g.blend_color,k=_.blend_color,W=g.blend_equation,O=_.blend_equation,H=g.blend_func,B=_.blend_func,I=g.depth_range,P=_.depth_range,E=g.colorMask,T=_.colorMask,M=g.polygonOffset_offset,N=_.polygonOffset_offset,L=g.sample_coverage,C=_.sample_coverage,V=g.stencil_func,D=_.stencil_func,G=g.stencil_opFront,R=_.stencil_opFront,q=g.stencil_opBack,j=_.stencil_opBack,Z=g.scissor_box,Y=_.scissor_box,$=g.viewport,X=_.viewport,{draw:function(e){var l,s,o,f,c,d,u,b,h,w,Z,$,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ;F.angle_instanced_arrays,l=z.next,z.next=i,s=m.framebufferWidth,m.framebufferWidth=i.width,o=m.framebufferHeight,m.framebufferHeight=i.height,i!==z.cur&&(i?p.bindFramebuffer(36160,i.framebuffer):p.bindFramebuffer(36160,null),z.cur=i),_.dirty&&((et=g.dither)!==_.dither&&(et?p.enable(3024):p.disable(3024),_.dither=et),(ei=g.blend_enable)!==_.blend_enable&&(ei?p.enable(3042):p.disable(3042),_.blend_enable=ei),er=A[0],en=A[1],ea=A[2],el=A[3],(er!==k[0]||en!==k[1]||ea!==k[2]||el!==k[3])&&(p.blendColor(er,en,ea,el),k[0]=er,k[1]=en,k[2]=ea,k[3]=el),es=W[0],eo=W[1],(es!==O[0]||eo!==O[1])&&(p.blendEquationSeparate(es,eo),O[0]=es,O[1]=eo),ef=H[0],ec=H[1],ed=H[2],eu=H[3],(ef!==B[0]||ec!==B[1]||ed!==B[2]||eu!==B[3])&&(p.blendFuncSeparate(ef,ec,ed,eu),B[0]=ef,B[1]=ec,B[2]=ed,B[3]=eu),(eb=g.depth_enable)!==_.depth_enable&&(eb?p.enable(2929):p.disable(2929),_.depth_enable=eb),(eh=g.depth_func)!==_.depth_func&&(p.depthFunc(eh),_.depth_func=eh),ep=I[0],em=I[1],(ep!==P[0]||em!==P[1])&&(p.depthRange(ep,em),P[0]=ep,P[1]=em),(eg=g.depth_mask)!==_.depth_mask&&(p.depthMask(eg),_.depth_mask=eg),e_=E[0],ev=E[1],ey=E[2],ew=E[3],(e_!==T[0]||ev!==T[1]||ey!==T[2]||ew!==T[3])&&(p.colorMask(e_,ev,ey,ew),T[0]=e_,T[1]=ev,T[2]=ey,T[3]=ew),(ex=g.cull_enable)!==_.cull_enable&&(ex?p.enable(2884):p.disable(2884),_.cull_enable=ex),(eS=g.cull_face)!==_.cull_face&&(p.cullFace(eS),_.cull_face=eS),(ez=g.frontFace)!==_.frontFace&&(p.frontFace(ez),_.frontFace=ez),(eF=g.lineWidth)!==_.lineWidth&&(p.lineWidth(eF),_.lineWidth=eF),(eA=g.polygonOffset_enable)!==_.polygonOffset_enable&&(eA?p.enable(32823):p.disable(32823),_.polygonOffset_enable=eA),ek=M[0],eW=M[1],(ek!==N[0]||eW!==N[1])&&(p.polygonOffset(ek,eW),N[0]=ek,N[1]=eW),(eO=g.sample_alpha)!==_.sample_alpha&&(eO?p.enable(32926):p.disable(32926),_.sample_alpha=eO),(eH=g.sample_enable)!==_.sample_enable&&(eH?p.enable(32928):p.disable(32928),_.sample_enable=eH),eB=L[0],eI=L[1],(eB!==C[0]||eI!==C[1])&&(p.sampleCoverage(eB,eI),C[0]=eB,C[1]=eI),(eP=g.stencil_enable)!==_.stencil_enable&&(eP?p.enable(2960):p.disable(2960),_.stencil_enable=eP),(eE=g.stencil_mask)!==_.stencil_mask&&(p.stencilMask(eE),_.stencil_mask=eE),eT=V[0],eM=V[1],eN=V[2],(eT!==D[0]||eM!==D[1]||eN!==D[2])&&(p.stencilFunc(eT,eM,eN),D[0]=eT,D[1]=eM,D[2]=eN),eL=G[0],eC=G[1],eV=G[2],eD=G[3],(eL!==R[0]||eC!==R[1]||eV!==R[2]||eD!==R[3])&&(p.stencilOpSeparate(eL,eC,eV,eD),R[0]=eL,R[1]=eC,R[2]=eV,R[3]=eD),eG=q[0],eR=q[1],eq=q[2],ej=q[3],(eG!==j[0]||eR!==j[1]||eq!==j[2]||ej!==j[3])&&(p.stencilOpSeparate(eG,eR,eq,ej),j[0]=eG,j[1]=eR,j[2]=eq,j[3]=ej),(eZ=g.scissor_enable)!==_.scissor_enable&&(eZ?p.enable(3089):p.disable(3089),_.scissor_enable=eZ)),f=m.framebufferWidth,c=m.framebufferHeight,d=m.viewportWidth,m.viewportWidth=f,u=m.viewportHeight,m.viewportHeight=c,p.viewport(0,0,f,c),X[0]=0,X[1]=0,X[2]=f,X[3]=c,b=m.framebufferWidth,h=m.framebufferHeight,p.scissor(0,0,b,h),Y[0]=0,Y[1]=0,Y[2]=b,Y[3]=h,(w=_.profile)&&(Z=performance.now(),t.count++),p.useProgram(r.program),$=F.angle_instanced_arrays,S.setVAO(null),(Q=x[U=a.location]).buffer||p.enableVertexAttribArray(U),(5126!==Q.type||2!==Q.size||Q.buffer!==n||!1!==Q.normalized||0!==Q.offset||0!==Q.stride)&&(p.bindBuffer(34962,n.buffer),p.vertexAttribPointer(U,2,5126,!1,0,0),Q.type=5126,Q.size=2,Q.buffer=n,Q.normalized=!1,Q.offset=0,Q.stride=0),0!==Q.divisor&&($.vertexAttribDivisorANGLE(U,0),Q.divisor=0),(J=v.elements)?p.bindBuffer(34963,J.buffer.buffer):S.currentVAO&&(J=y.getElements(S.currentVAO.elements))&&p.bindBuffer(34963,J.buffer.buffer),K=v.offset,(ee=v.instances)>0?J?$.drawElementsInstancedANGLE(5,4,J.type,K<<(J.type-5121>>1),ee):$.drawArraysInstancedANGLE(5,K,4,ee):ee<0&&(J?p.drawElements(5,4,J.type,K<<(J.type-5121>>1)):p.drawArrays(5,K,4)),_.dirty=!0,S.setVAO(null),z.next=l,m.framebufferWidth=s,m.framebufferHeight=o,m.viewportWidth=d,m.viewportHeight=u,w&&(t.cpuTime+=performance.now()-Z)},scope:function(e,r,a){var p,g,y,x,S,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Y,X,U,Q,J,K,ee,et,ei;p=z.next,z.next=i,g=m.framebufferWidth,m.framebufferWidth=i.width,y=m.framebufferHeight,m.framebufferHeight=i.height,x=m.framebufferWidth,S=m.framebufferHeight,F=m.viewportWidth,m.viewportWidth=x,A=m.viewportHeight,m.viewportHeight=S,k=$[0],$[0]=l,W=$[1],$[1]=s,O=$[2],$[2]=x,H=$[3],$[3]=S,B=m.framebufferWidth,I=m.framebufferHeight,P=Z[0],Z[0]=o,E=Z[1],Z[1]=f,T=Z[2],Z[2]=B,M=Z[3],Z[3]=I,(N=_.profile)&&(L=performance.now(),t.count++),C=v.count,v.count=c,V=v.primitive,v.primitive=d,D=u.state,u.state=1,G=u.x,u.x=0,R=u.y,u.y=0,q=u.z,u.z=0,j=u.w,u.w=0,Y=u.buffer,u.buffer=n,X=u.size,u.size=2,U=u.normalized,u.normalized=!1,Q=u.type,u.type=5126,J=u.offset,u.offset=0,K=u.stride,u.stride=0,ee=u.divisor,u.divisor=0,et=w.vert,w.vert=b,ei=w.frag,w.frag=h,_.dirty=!0,r(m,e,a),z.next=p,m.framebufferWidth=g,m.framebufferHeight=y,m.viewportWidth=F,m.viewportHeight=A,$[0]=k,$[1]=W,$[2]=O,$[3]=H,Z[0]=P,Z[1]=E,Z[2]=T,Z[3]=M,N&&(t.cpuTime+=performance.now()-L),v.count=C,v.primitive=V,u.state=D,u.x=G,u.y=R,u.z=q,u.w=j,u.buffer=Y,u.size=X,u.normalized=U,u.type=Q,u.offset=J,u.stride=K,u.divisor=ee,w.vert=et,w.frag=ei,_.dirty=!0},batch:function(e,l){var s,o,f,c,d,u,b,h,w,Z,$,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$;for(F.angle_instanced_arrays,s=z.next,z.next=i,o=m.framebufferWidth,m.framebufferWidth=i.width,f=m.framebufferHeight,m.framebufferHeight=i.height,i!==z.cur&&(i?p.bindFramebuffer(36160,i.framebuffer):p.bindFramebuffer(36160,null),z.cur=i),_.dirty&&((J=g.dither)!==_.dither&&(J?p.enable(3024):p.disable(3024),_.dither=J),(K=g.blend_enable)!==_.blend_enable&&(K?p.enable(3042):p.disable(3042),_.blend_enable=K),ee=A[0],et=A[1],ei=A[2],er=A[3],(ee!==k[0]||et!==k[1]||ei!==k[2]||er!==k[3])&&(p.blendColor(ee,et,ei,er),k[0]=ee,k[1]=et,k[2]=ei,k[3]=er),en=W[0],ea=W[1],(en!==O[0]||ea!==O[1])&&(p.blendEquationSeparate(en,ea),O[0]=en,O[1]=ea),el=H[0],es=H[1],eo=H[2],ef=H[3],(el!==B[0]||es!==B[1]||eo!==B[2]||ef!==B[3])&&(p.blendFuncSeparate(el,es,eo,ef),B[0]=el,B[1]=es,B[2]=eo,B[3]=ef),(ec=g.depth_enable)!==_.depth_enable&&(ec?p.enable(2929):p.disable(2929),_.depth_enable=ec),(ed=g.depth_func)!==_.depth_func&&(p.depthFunc(ed),_.depth_func=ed),eu=I[0],eb=I[1],(eu!==P[0]||eb!==P[1])&&(p.depthRange(eu,eb),P[0]=eu,P[1]=eb),(eh=g.depth_mask)!==_.depth_mask&&(p.depthMask(eh),_.depth_mask=eh),ep=E[0],em=E[1],eg=E[2],e_=E[3],(ep!==T[0]||em!==T[1]||eg!==T[2]||e_!==T[3])&&(p.colorMask(ep,em,eg,e_),T[0]=ep,T[1]=em,T[2]=eg,T[3]=e_),(ev=g.cull_enable)!==_.cull_enable&&(ev?p.enable(2884):p.disable(2884),_.cull_enable=ev),(ey=g.cull_face)!==_.cull_face&&(p.cullFace(ey),_.cull_face=ey),(ew=g.frontFace)!==_.frontFace&&(p.frontFace(ew),_.frontFace=ew),(ex=g.lineWidth)!==_.lineWidth&&(p.lineWidth(ex),_.lineWidth=ex),(eS=g.polygonOffset_enable)!==_.polygonOffset_enable&&(eS?p.enable(32823):p.disable(32823),_.polygonOffset_enable=eS),ez=M[0],eF=M[1],(ez!==N[0]||eF!==N[1])&&(p.polygonOffset(ez,eF),N[0]=ez,N[1]=eF),(eA=g.sample_alpha)!==_.sample_alpha&&(eA?p.enable(32926):p.disable(32926),_.sample_alpha=eA),(ek=g.sample_enable)!==_.sample_enable&&(ek?p.enable(32928):p.disable(32928),_.sample_enable=ek),eW=L[0],eO=L[1],(eW!==C[0]||eO!==C[1])&&(p.sampleCoverage(eW,eO),C[0]=eW,C[1]=eO),(eH=g.stencil_enable)!==_.stencil_enable&&(eH?p.enable(2960):p.disable(2960),_.stencil_enable=eH),(eB=g.stencil_mask)!==_.stencil_mask&&(p.stencilMask(eB),_.stencil_mask=eB),eI=V[0],eP=V[1],eE=V[2],(eI!==D[0]||eP!==D[1]||eE!==D[2])&&(p.stencilFunc(eI,eP,eE),D[0]=eI,D[1]=eP,D[2]=eE),eT=G[0],eM=G[1],eN=G[2],eL=G[3],(eT!==R[0]||eM!==R[1]||eN!==R[2]||eL!==R[3])&&(p.stencilOpSeparate(eT,eM,eN,eL),R[0]=eT,R[1]=eM,R[2]=eN,R[3]=eL),eC=q[0],eV=q[1],eD=q[2],eG=q[3],(eC!==j[0]||eV!==j[1]||eD!==j[2]||eG!==j[3])&&(p.stencilOpSeparate(eC,eV,eD,eG),j[0]=eC,j[1]=eV,j[2]=eD,j[3]=eG),(eR=g.scissor_enable)!==_.scissor_enable&&(eR?p.enable(3089):p.disable(3089),_.scissor_enable=eR)),c=m.framebufferWidth,d=m.framebufferHeight,u=m.viewportWidth,m.viewportWidth=c,b=m.viewportHeight,m.viewportHeight=d,p.viewport(0,0,c,d),X[0]=0,X[1]=0,X[2]=c,X[3]=d,h=m.framebufferWidth,w=m.framebufferHeight,p.scissor(0,0,h,w),Y[0]=0,Y[1]=0,Y[2]=h,Y[3]=w,(Z=_.profile)&&($=performance.now(),t.count+=l),p.useProgram(r.program),U=F.angle_instanced_arrays,S.setVAO(null),(ej=x[eq=a.location]).buffer||p.enableVertexAttribArray(eq),(5126!==ej.type||2!==ej.size||ej.buffer!==n||!1!==ej.normalized||0!==ej.offset||0!==ej.stride)&&(p.bindBuffer(34962,n.buffer),p.vertexAttribPointer(eq,2,5126,!1,0,0),ej.type=5126,ej.size=2,ej.buffer=n,ej.normalized=!1,ej.offset=0,ej.stride=0),0!==ej.divisor&&(U.vertexAttribDivisorANGLE(eq,0),ej.divisor=0),(eZ=v.elements)?p.bindBuffer(34963,eZ.buffer.buffer):S.currentVAO&&(eZ=y.getElements(S.currentVAO.elements))&&p.bindBuffer(34963,eZ.buffer.buffer),eY=v.offset,e$=v.instances,Q=0;Q<l;++Q)e[Q],e$>0?eZ?U.drawElementsInstancedANGLE(5,4,eZ.type,eY<<(eZ.type-5121>>1),e$):U.drawArraysInstancedANGLE(5,eY,4,e$):e$<0&&(eZ?p.drawElements(5,4,eZ.type,eY<<(eZ.type-5121>>1)):p.drawArrays(5,eY,4));_.dirty=!0,S.setVAO(null),z.next=s,m.framebufferWidth=o,m.framebufferHeight=f,m.viewportWidth=u,m.viewportHeight=b,Z&&(t.cpuTime+=performance.now()-$)}}},dc78818e05e5bdb719097afd9459427ce9cec77af6efb5a73a4259e754167213:function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K){var ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN;return ee=e.gl,et=e.context,e.strings,ei=e.next,er=e.current,en=e.draw,ea=e.elements,e.buffer,el=e.shader,es=e.attributes,eo=e.vao,ef=e.uniforms,ec=e.framebuffer,ed=e.extensions,e.timer,e.isBufferArgs,eu=ei.blend_color,eb=er.blend_color,eh=ei.blend_equation,ep=er.blend_equation,em=ei.blend_func,eg=er.blend_func,e_=ei.depth_range,ev=er.depth_range,ey=ei.colorMask,ew=er.colorMask,ex=ei.polygonOffset_offset,eS=er.polygonOffset_offset,ez=ei.sample_coverage,eF=er.sample_coverage,eA=ei.stencil_func,ek=er.stencil_func,eW=ei.stencil_opFront,eO=er.stencil_opFront,eH=ei.stencil_opBack,eB=er.stencil_opBack,eI=ei.scissor_box,eP=er.scissor_box,eE=ei.viewport,eT=er.viewport,eM=new Float32Array(9),eN=new Float32Array(9),{draw:function(e){var B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,el,ef,eI,eE,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS,tz,tF,tA;ed.angle_instanced_arrays,B=i.call(this,et,e,0),I=ec.getFramebuffer(B),P=ec.next,ec.next=I,E=et.framebufferWidth,et.framebufferWidth=I?I.width:et.drawingBufferWidth,T=et.framebufferHeight,et.framebufferHeight=I?I.height:et.drawingBufferHeight,I!==ec.cur&&(I?ee.bindFramebuffer(36160,I.framebuffer):ee.bindFramebuffer(36160,null),ec.cur=I),er.dirty&&((eY=ei.dither)!==er.dither&&(eY?ee.enable(3024):ee.disable(3024),er.dither=eY),(e$=ei.blend_enable)!==er.blend_enable&&(e$?ee.enable(3042):ee.disable(3042),er.blend_enable=e$),eX=eu[0],eU=eu[1],eQ=eu[2],eJ=eu[3],(eX!==eb[0]||eU!==eb[1]||eQ!==eb[2]||eJ!==eb[3])&&(ee.blendColor(eX,eU,eQ,eJ),eb[0]=eX,eb[1]=eU,eb[2]=eQ,eb[3]=eJ),eK=eh[0],e0=eh[1],(eK!==ep[0]||e0!==ep[1])&&(ee.blendEquationSeparate(eK,e0),ep[0]=eK,ep[1]=e0),e2=em[0],e1=em[1],e3=em[2],e4=em[3],(e2!==eg[0]||e1!==eg[1]||e3!==eg[2]||e4!==eg[3])&&(ee.blendFuncSeparate(e2,e1,e3,e4),eg[0]=e2,eg[1]=e1,eg[2]=e3,eg[3]=e4),(e6=ei.depth_func)!==er.depth_func&&(ee.depthFunc(e6),er.depth_func=e6),e9=e_[0],e8=e_[1],(e9!==ev[0]||e8!==ev[1])&&(ee.depthRange(e9,e8),ev[0]=e9,ev[1]=e8),e5=ey[0],e7=ey[1],te=ey[2],tt=ey[3],(e5!==ew[0]||e7!==ew[1]||te!==ew[2]||tt!==ew[3])&&(ee.colorMask(e5,e7,te,tt),ew[0]=e5,ew[1]=e7,ew[2]=te,ew[3]=tt),(ti=ei.cull_enable)!==er.cull_enable&&(ti?ee.enable(2884):ee.disable(2884),er.cull_enable=ti),(tr=ei.cull_face)!==er.cull_face&&(ee.cullFace(tr),er.cull_face=tr),(tn=ei.frontFace)!==er.frontFace&&(ee.frontFace(tn),er.frontFace=tn),(ta=ei.lineWidth)!==er.lineWidth&&(ee.lineWidth(ta),er.lineWidth=ta),(tl=ei.polygonOffset_enable)!==er.polygonOffset_enable&&(tl?ee.enable(32823):ee.disable(32823),er.polygonOffset_enable=tl),ts=ex[0],to=ex[1],(ts!==eS[0]||to!==eS[1])&&(ee.polygonOffset(ts,to),eS[0]=ts,eS[1]=to),(tf=ei.sample_alpha)!==er.sample_alpha&&(tf?ee.enable(32926):ee.disable(32926),er.sample_alpha=tf),(tc=ei.sample_enable)!==er.sample_enable&&(tc?ee.enable(32928):ee.disable(32928),er.sample_enable=tc),td=ez[0],tu=ez[1],(td!==eF[0]||tu!==eF[1])&&(ee.sampleCoverage(td,tu),eF[0]=td,eF[1]=tu),(tb=ei.stencil_enable)!==er.stencil_enable&&(tb?ee.enable(2960):ee.disable(2960),er.stencil_enable=tb),(th=ei.stencil_mask)!==er.stencil_mask&&(ee.stencilMask(th),er.stencil_mask=th),tp=eA[0],tm=eA[1],tg=eA[2],(tp!==ek[0]||tm!==ek[1]||tg!==ek[2])&&(ee.stencilFunc(tp,tm,tg),ek[0]=tp,ek[1]=tm,ek[2]=tg),t_=eW[0],tv=eW[1],ty=eW[2],tw=eW[3],(t_!==eO[0]||tv!==eO[1]||ty!==eO[2]||tw!==eO[3])&&(ee.stencilOpSeparate(t_,tv,ty,tw),eO[0]=t_,eO[1]=tv,eO[2]=ty,eO[3]=tw),tx=eH[0],tS=eH[1],tz=eH[2],tF=eH[3],(tx!==eB[0]||tS!==eB[1]||tz!==eB[2]||tF!==eB[3])&&(ee.stencilOpSeparate(tx,tS,tz,tF),eB[0]=tx,eB[1]=tS,eB[2]=tz,eB[3]=tF),(tA=ei.scissor_enable)!==er.scissor_enable&&(tA?ee.enable(3089):ee.disable(3089),er.scissor_enable=tA)),M=et.framebufferWidth,N=et.framebufferHeight,L=et.viewportWidth,et.viewportWidth=M,C=et.viewportHeight,et.viewportHeight=N,ee.viewport(0,0,M,N),eT[0]=0,eT[1]=0,eT[2]=M,eT[3]=N,r?ee.enable(2929):ee.disable(2929),er.depth_enable=r,ee.depthMask(n),er.depth_mask=n,V=et.framebufferWidth,D=et.framebufferHeight,ee.scissor(0,0,V,D),eP[0]=0,eP[1]=0,eP[2]=V,eP[3]=D,(G=er.profile)&&(R=performance.now(),t.count++),ee.useProgram(a.program),q=ed.angle_instanced_arrays,eo.setVAO(null),(Z=es[j=s.location]).buffer||ee.enableVertexAttribArray(j),(5126!==Z.type||2!==Z.size||Z.buffer!==l||!1!==Z.normalized||0!==Z.offset||0!==Z.stride)&&(ee.bindBuffer(34962,l.buffer),ee.vertexAttribPointer(j,2,5126,!1,0,0),Z.type=5126,Z.size=2,Z.buffer=l,Z.normalized=!1,Z.offset=0,Z.stride=0),0!==Z.divisor&&(q.vertexAttribDivisorANGLE(j,0),Z.divisor=0),Y=f.call(this,et,e,0),ee.uniform1f(o.location,Y),X=($=d.call(this,et,e,0))[0],U=$[1],ee.uniform2f(c.location,X,U),(Q=b.call(this,et,e,0))&&"framebuffer"===Q._reglType&&(Q=Q.color[0]),J=Q._texture,ee.uniform1i(u.location,J.bind()),K=p.call(this,et,e,0),ee.uniform1f(h.location,K),(el=g.call(this,et,e,0))&&"framebuffer"===el._reglType&&(el=el.color[0]),ef=el._texture,ee.uniform1i(m.location,ef.bind()),eI=v.call(this,et,e,0),ee.uniform1f(_.location,eI),eE=w.call(this,et,e,0),ee.uniform1i(y.location,eE),eL=(eN=S.call(this,et,e,0))[0],eC=eN[1],ee.uniform2f(x.location,eL,eC),eV=F.call(this,et,e,0),ee.uniform1f(z.location,eV),eD=k.call(this,et,e,0),ee.uniform1f(A.location,eD),eG=O.call(this,et,e,0),ee.uniformMatrix3fv(W.location,!1,Array.isArray(eG)||eG instanceof Float32Array?eG:(eM[0]=eG[0],eM[1]=eG[1],eM[2]=eG[2],eM[3]=eG[3],eM[4]=eG[4],eM[5]=eG[5],eM[6]=eG[6],eM[7]=eG[7],eM[8]=eG[8],eM)),(eR=en.elements)?ee.bindBuffer(34963,eR.buffer.buffer):eo.currentVAO&&(eR=ea.getElements(eo.currentVAO.elements))&&ee.bindBuffer(34963,eR.buffer.buffer),eq=en.offset,(ej=H.call(this,et,e,0))&&((eZ=en.instances)>0?eR?q.drawElementsInstancedANGLE(0,ej,eR.type,eq<<(eR.type-5121>>1),eZ):q.drawArraysInstancedANGLE(0,eq,ej,eZ):eZ<0&&(eR?ee.drawElements(0,ej,eR.type,eq<<(eR.type-5121>>1)):ee.drawArrays(0,eq,ej)),er.dirty=!0,eo.setVAO(null),ec.next=P,et.framebufferWidth=E,et.framebufferHeight=T,et.viewportWidth=L,et.viewportHeight=C,G&&(t.cpuTime+=performance.now()-R),J.unbind(),ef.unbind())},scope:function(e,r,n){var a,s,o,c,u,h,m,_,y,x,z,A,W,J,K,ee,ea,es,eo,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eP,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2;a=i.call(this,et,e,n),s=ec.getFramebuffer(a),o=ec.next,ec.next=s,c=et.framebufferWidth,et.framebufferWidth=s?s.width:et.drawingBufferWidth,u=et.framebufferHeight,et.framebufferHeight=s?s.height:et.drawingBufferHeight,h=et.framebufferWidth,m=et.framebufferHeight,_=et.viewportWidth,et.viewportWidth=h,y=et.viewportHeight,et.viewportHeight=m,x=eE[0],eE[0]=B,z=eE[1],eE[1]=I,A=eE[2],eE[2]=h,W=eE[3],eE[3]=m,J=ei.depth_enable,ei.depth_enable=P,K=ei.depth_mask,ei.depth_mask=E,ee=et.framebufferWidth,ea=et.framebufferHeight,es=eI[0],eI[0]=T,eo=eI[1],eI[1]=M,ed=eI[2],eI[2]=ee,eu=eI[3],eI[3]=ea,(eb=er.profile)&&(eh=performance.now(),t.count++),ep=H.call(this,et,e,n),em=en.count,en.count=ep,eg=en.primitive,en.primitive=N,e_=g.call(this,et,e,n),ev=ef[L],ef[L]=e_,ey=b.call(this,et,e,n),ew=ef[C],ef[C]=ey,ex=v.call(this,et,e,n),eS=ef[V],ef[V]=ex,ez=F.call(this,et,e,n),eF=ef[D],ef[D]=ez,eA=p.call(this,et,e,n),ek=ef[G],ef[G]=eA,eW=O.call(this,et,e,n),eO=ef[R],ef[R]=eW,eH=k.call(this,et,e,n),eB=ef[q],ef[q]=eH,eP=S.call(this,et,e,n),eT=ef[j],ef[j]=eP,eM=w.call(this,et,e,n),eN=ef[Z],ef[Z]=eM,eL=d.call(this,et,e,n),eC=ef[Y],ef[Y]=eL,eV=f.call(this,et,e,n),eD=ef[$],ef[$]=eV,eG=X.state,X.state=1,eR=X.x,X.x=0,eq=X.y,X.y=0,ej=X.z,X.z=0,eZ=X.w,X.w=0,eY=X.buffer,X.buffer=l,e$=X.size,X.size=2,eX=X.normalized,X.normalized=!1,eU=X.type,X.type=5126,eQ=X.offset,X.offset=0,eJ=X.stride,X.stride=0,eK=X.divisor,X.divisor=0,e0=el.vert,el.vert=U,e2=el.frag,el.frag=Q,er.dirty=!0,r(et,e,n),ec.next=o,et.framebufferWidth=c,et.framebufferHeight=u,et.viewportWidth=_,et.viewportHeight=y,eE[0]=x,eE[1]=z,eE[2]=A,eE[3]=W,ei.depth_enable=J,ei.depth_mask=K,eI[0]=es,eI[1]=eo,eI[2]=ed,eI[3]=eu,eb&&(t.cpuTime+=performance.now()-eh),en.count=em,en.primitive=eg,ef[L]=ev,ef[C]=ew,ef[V]=eS,ef[D]=eF,ef[G]=ek,ef[R]=eO,ef[q]=eB,ef[j]=eT,ef[Z]=eN,ef[Y]=eC,ef[$]=eD,X.state=eG,X.x=eR,X.y=eq,X.z=ej,X.w=eZ,X.buffer=eY,X.size=e$,X.normalized=eX,X.type=eU,X.offset=eQ,X.stride=eJ,X.divisor=eK,el.vert=e0,el.frag=e2,er.dirty=!0},batch:function(e,r){var n,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,el,ef,eI,eE,eM,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS,tz,tF,tA,tk,tW,tO;for(ed.angle_instanced_arrays,n=i.call(this,et,e,0),B=ec.getFramebuffer(n),I=ec.next,ec.next=B,P=et.framebufferWidth,et.framebufferWidth=B?B.width:et.drawingBufferWidth,E=et.framebufferHeight,et.framebufferHeight=B?B.height:et.drawingBufferHeight,B!==ec.cur&&(B?ee.bindFramebuffer(36160,B.framebuffer):ee.bindFramebuffer(36160,null),ec.cur=B),er.dirty&&((Z=ei.dither)!==er.dither&&(Z?ee.enable(3024):ee.disable(3024),er.dither=Z),(Y=ei.blend_enable)!==er.blend_enable&&(Y?ee.enable(3042):ee.disable(3042),er.blend_enable=Y),$=eu[0],X=eu[1],U=eu[2],Q=eu[3],($!==eb[0]||X!==eb[1]||U!==eb[2]||Q!==eb[3])&&(ee.blendColor($,X,U,Q),eb[0]=$,eb[1]=X,eb[2]=U,eb[3]=Q),el=eh[0],ef=eh[1],(el!==ep[0]||ef!==ep[1])&&(ee.blendEquationSeparate(el,ef),ep[0]=el,ep[1]=ef),eI=em[0],eE=em[1],eM=em[2],eL=em[3],(eI!==eg[0]||eE!==eg[1]||eM!==eg[2]||eL!==eg[3])&&(ee.blendFuncSeparate(eI,eE,eM,eL),eg[0]=eI,eg[1]=eE,eg[2]=eM,eg[3]=eL),(eC=ei.depth_func)!==er.depth_func&&(ee.depthFunc(eC),er.depth_func=eC),eV=e_[0],eD=e_[1],(eV!==ev[0]||eD!==ev[1])&&(ee.depthRange(eV,eD),ev[0]=eV,ev[1]=eD),eG=ey[0],eR=ey[1],eq=ey[2],ej=ey[3],(eG!==ew[0]||eR!==ew[1]||eq!==ew[2]||ej!==ew[3])&&(ee.colorMask(eG,eR,eq,ej),ew[0]=eG,ew[1]=eR,ew[2]=eq,ew[3]=ej),(eZ=ei.cull_enable)!==er.cull_enable&&(eZ?ee.enable(2884):ee.disable(2884),er.cull_enable=eZ),(eY=ei.cull_face)!==er.cull_face&&(ee.cullFace(eY),er.cull_face=eY),(e$=ei.frontFace)!==er.frontFace&&(ee.frontFace(e$),er.frontFace=e$),(eX=ei.lineWidth)!==er.lineWidth&&(ee.lineWidth(eX),er.lineWidth=eX),(eU=ei.polygonOffset_enable)!==er.polygonOffset_enable&&(eU?ee.enable(32823):ee.disable(32823),er.polygonOffset_enable=eU),eQ=ex[0],eJ=ex[1],(eQ!==eS[0]||eJ!==eS[1])&&(ee.polygonOffset(eQ,eJ),eS[0]=eQ,eS[1]=eJ),(eK=ei.sample_alpha)!==er.sample_alpha&&(eK?ee.enable(32926):ee.disable(32926),er.sample_alpha=eK),(e0=ei.sample_enable)!==er.sample_enable&&(e0?ee.enable(32928):ee.disable(32928),er.sample_enable=e0),e2=ez[0],e1=ez[1],(e2!==eF[0]||e1!==eF[1])&&(ee.sampleCoverage(e2,e1),eF[0]=e2,eF[1]=e1),(e3=ei.stencil_enable)!==er.stencil_enable&&(e3?ee.enable(2960):ee.disable(2960),er.stencil_enable=e3),(e4=ei.stencil_mask)!==er.stencil_mask&&(ee.stencilMask(e4),er.stencil_mask=e4),e6=eA[0],e9=eA[1],e8=eA[2],(e6!==ek[0]||e9!==ek[1]||e8!==ek[2])&&(ee.stencilFunc(e6,e9,e8),ek[0]=e6,ek[1]=e9,ek[2]=e8),e5=eW[0],e7=eW[1],te=eW[2],tt=eW[3],(e5!==eO[0]||e7!==eO[1]||te!==eO[2]||tt!==eO[3])&&(ee.stencilOpSeparate(e5,e7,te,tt),eO[0]=e5,eO[1]=e7,eO[2]=te,eO[3]=tt),ti=eH[0],tr=eH[1],tn=eH[2],ta=eH[3],(ti!==eB[0]||tr!==eB[1]||tn!==eB[2]||ta!==eB[3])&&(ee.stencilOpSeparate(ti,tr,tn,ta),eB[0]=ti,eB[1]=tr,eB[2]=tn,eB[3]=ta),(tl=ei.scissor_enable)!==er.scissor_enable&&(tl?ee.enable(3089):ee.disable(3089),er.scissor_enable=tl)),T=et.framebufferWidth,M=et.framebufferHeight,N=et.viewportWidth,et.viewportWidth=T,L=et.viewportHeight,et.viewportHeight=M,ee.viewport(0,0,T,M),eT[0]=0,eT[1]=0,eT[2]=T,eT[3]=M,J?ee.enable(2929):ee.disable(2929),er.depth_enable=J,ee.depthMask(K),er.depth_mask=K,C=et.framebufferWidth,V=et.framebufferHeight,ee.scissor(0,0,C,V),eP[0]=0,eP[1]=0,eP[2]=C,eP[3]=V,(D=er.profile)&&(G=performance.now(),t.count+=r),ee.useProgram(a.program),R=ed.angle_instanced_arrays,eo.setVAO(null),(to=es[ts=s.location]).buffer||ee.enableVertexAttribArray(ts),(5126!==to.type||2!==to.size||to.buffer!==l||!1!==to.normalized||0!==to.offset||0!==to.stride)&&(ee.bindBuffer(34962,l.buffer),ee.vertexAttribPointer(ts,2,5126,!1,0,0),to.type=5126,to.size=2,to.buffer=l,to.normalized=!1,to.offset=0,to.stride=0),0!==to.divisor&&(R.vertexAttribDivisorANGLE(ts,0),to.divisor=0),tf=f.call(this,et,j,q),ee.uniform1f(o.location,tf),td=(tc=d.call(this,et,j,q))[0],tu=tc[1],ee.uniform2f(c.location,td,tu),(tb=b.call(this,et,j,q))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]),th=tb._texture,ee.uniform1i(u.location,th.bind()),tp=p.call(this,et,j,q),ee.uniform1f(h.location,tp),(tm=g.call(this,et,j,q))&&"framebuffer"===tm._reglType&&(tm=tm.color[0]),tg=tm._texture,ee.uniform1i(m.location,tg.bind()),t_=v.call(this,et,j,q),ee.uniform1f(_.location,t_),tv=w.call(this,et,j,q),ee.uniform1i(y.location,tv),tw=(ty=S.call(this,et,j,q))[0],tx=ty[1],ee.uniform2f(x.location,tw,tx),tS=F.call(this,et,j,q),ee.uniform1f(z.location,tS),tz=k.call(this,et,j,q),ee.uniform1f(A.location,tz),tF=O.call(this,et,j,q),ee.uniformMatrix3fv(W.location,!1,Array.isArray(tF)||tF instanceof Float32Array?tF:(eN[0]=tF[0],eN[1]=tF[1],eN[2]=tF[2],eN[3]=tF[3],eN[4]=tF[4],eN[5]=tF[5],eN[6]=tF[6],eN[7]=tF[7],eN[8]=tF[8],eN)),(tA=en.elements)?ee.bindBuffer(34963,tA.buffer.buffer):eo.currentVAO&&(tA=ea.getElements(eo.currentVAO.elements))&&ee.bindBuffer(34963,tA.buffer.buffer),tk=en.offset,tW=H.call(this,et,j,q),tO=en.instances,q=0;q<r;++q)j=e[q],tW&&(tO>0?tA?R.drawElementsInstancedANGLE(0,tW,tA.type,tk<<(tA.type-5121>>1),tO):R.drawArraysInstancedANGLE(0,tk,tW,tO):tO<0&&(tA?ee.drawElements(0,tW,tA.type,tk<<(tA.type-5121>>1)):ee.drawArrays(0,tk,tW)));th.unbind(),tg.unbind(),er.dirty=!0,eo.setVAO(null),ec.next=I,et.framebufferWidth=P,et.framebufferHeight=E,et.viewportWidth=N,et.viewportHeight=L,D&&(t.cpuTime+=performance.now()-G)}}},"3656ddc8a124213dd6cc380663c06f93d2eb875ec39b2fabe1227101650ec654":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h){var p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X;return p=e.gl,m=e.context,e.strings,g=e.next,_=e.current,v=e.draw,y=e.elements,e.buffer,w=e.shader,x=e.attributes,S=e.vao,e.uniforms,z=e.framebuffer,F=e.extensions,e.timer,e.isBufferArgs,A=g.blend_color,k=_.blend_color,W=g.blend_equation,O=_.blend_equation,H=g.blend_func,B=_.blend_func,I=g.depth_range,P=_.depth_range,E=g.colorMask,T=_.colorMask,M=g.polygonOffset_offset,N=_.polygonOffset_offset,L=g.sample_coverage,C=_.sample_coverage,V=g.stencil_func,D=_.stencil_func,G=g.stencil_opFront,R=_.stencil_opFront,q=g.stencil_opBack,j=_.stencil_opBack,Z=g.scissor_box,Y=_.scissor_box,$=g.viewport,X=_.viewport,{draw:function(e){var l,s,o,f,c,d,u,b,h,w,Z,$,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$;F.angle_instanced_arrays,l=i.call(this,m,e,0),s=z.getFramebuffer(l),o=z.next,z.next=s,f=m.framebufferWidth,m.framebufferWidth=s?s.width:m.drawingBufferWidth,c=m.framebufferHeight,m.framebufferHeight=s?s.height:m.drawingBufferHeight,s!==z.cur&&(s?p.bindFramebuffer(36160,s.framebuffer):p.bindFramebuffer(36160,null),z.cur=s),_.dirty&&((er=g.dither)!==_.dither&&(er?p.enable(3024):p.disable(3024),_.dither=er),(en=g.blend_enable)!==_.blend_enable&&(en?p.enable(3042):p.disable(3042),_.blend_enable=en),ea=A[0],el=A[1],es=A[2],eo=A[3],(ea!==k[0]||el!==k[1]||es!==k[2]||eo!==k[3])&&(p.blendColor(ea,el,es,eo),k[0]=ea,k[1]=el,k[2]=es,k[3]=eo),ef=W[0],ec=W[1],(ef!==O[0]||ec!==O[1])&&(p.blendEquationSeparate(ef,ec),O[0]=ef,O[1]=ec),ed=H[0],eu=H[1],eb=H[2],eh=H[3],(ed!==B[0]||eu!==B[1]||eb!==B[2]||eh!==B[3])&&(p.blendFuncSeparate(ed,eu,eb,eh),B[0]=ed,B[1]=eu,B[2]=eb,B[3]=eh),(ep=g.depth_enable)!==_.depth_enable&&(ep?p.enable(2929):p.disable(2929),_.depth_enable=ep),(em=g.depth_func)!==_.depth_func&&(p.depthFunc(em),_.depth_func=em),eg=I[0],e_=I[1],(eg!==P[0]||e_!==P[1])&&(p.depthRange(eg,e_),P[0]=eg,P[1]=e_),(ev=g.depth_mask)!==_.depth_mask&&(p.depthMask(ev),_.depth_mask=ev),ey=E[0],ew=E[1],ex=E[2],eS=E[3],(ey!==T[0]||ew!==T[1]||ex!==T[2]||eS!==T[3])&&(p.colorMask(ey,ew,ex,eS),T[0]=ey,T[1]=ew,T[2]=ex,T[3]=eS),(ez=g.cull_enable)!==_.cull_enable&&(ez?p.enable(2884):p.disable(2884),_.cull_enable=ez),(eF=g.cull_face)!==_.cull_face&&(p.cullFace(eF),_.cull_face=eF),(eA=g.frontFace)!==_.frontFace&&(p.frontFace(eA),_.frontFace=eA),(ek=g.lineWidth)!==_.lineWidth&&(p.lineWidth(ek),_.lineWidth=ek),(eW=g.polygonOffset_enable)!==_.polygonOffset_enable&&(eW?p.enable(32823):p.disable(32823),_.polygonOffset_enable=eW),eO=M[0],eH=M[1],(eO!==N[0]||eH!==N[1])&&(p.polygonOffset(eO,eH),N[0]=eO,N[1]=eH),(eB=g.sample_alpha)!==_.sample_alpha&&(eB?p.enable(32926):p.disable(32926),_.sample_alpha=eB),(eI=g.sample_enable)!==_.sample_enable&&(eI?p.enable(32928):p.disable(32928),_.sample_enable=eI),eP=L[0],eE=L[1],(eP!==C[0]||eE!==C[1])&&(p.sampleCoverage(eP,eE),C[0]=eP,C[1]=eE),(eT=g.stencil_enable)!==_.stencil_enable&&(eT?p.enable(2960):p.disable(2960),_.stencil_enable=eT),(eM=g.stencil_mask)!==_.stencil_mask&&(p.stencilMask(eM),_.stencil_mask=eM),eN=V[0],eL=V[1],eC=V[2],(eN!==D[0]||eL!==D[1]||eC!==D[2])&&(p.stencilFunc(eN,eL,eC),D[0]=eN,D[1]=eL,D[2]=eC),eV=G[0],eD=G[1],eG=G[2],eR=G[3],(eV!==R[0]||eD!==R[1]||eG!==R[2]||eR!==R[3])&&(p.stencilOpSeparate(eV,eD,eG,eR),R[0]=eV,R[1]=eD,R[2]=eG,R[3]=eR),eq=q[0],ej=q[1],eZ=q[2],eY=q[3],(eq!==j[0]||ej!==j[1]||eZ!==j[2]||eY!==j[3])&&(p.stencilOpSeparate(eq,ej,eZ,eY),j[0]=eq,j[1]=ej,j[2]=eZ,j[3]=eY),(e$=g.scissor_enable)!==_.scissor_enable&&(e$?p.enable(3089):p.disable(3089),_.scissor_enable=e$)),d=m.framebufferWidth,u=m.framebufferHeight,b=m.viewportWidth,m.viewportWidth=d,h=m.viewportHeight,m.viewportHeight=u,p.viewport(0,0,d,u),X[0]=0,X[1]=0,X[2]=d,X[3]=u,w=m.framebufferWidth,Z=m.framebufferHeight,p.scissor(0,0,w,Z),Y[0]=0,Y[1]=0,Y[2]=w,Y[3]=Z,($=_.profile)&&(U=performance.now(),t.count++),p.useProgram(r.program),Q=F.angle_instanced_arrays,S.setVAO(null),(K=x[J=a.location]).buffer||p.enableVertexAttribArray(J),(5126!==K.type||2!==K.size||K.buffer!==n||!1!==K.normalized||0!==K.offset||0!==K.stride)&&(p.bindBuffer(34962,n.buffer),p.vertexAttribPointer(J,2,5126,!1,0,0),K.type=5126,K.size=2,K.buffer=n,K.normalized=!1,K.offset=0,K.stride=0),0!==K.divisor&&(Q.vertexAttribDivisorANGLE(J,0),K.divisor=0),(ee=v.elements)?p.bindBuffer(34963,ee.buffer.buffer):S.currentVAO&&(ee=y.getElements(S.currentVAO.elements))&&p.bindBuffer(34963,ee.buffer.buffer),et=v.offset,(ei=v.instances)>0?ee?Q.drawElementsInstancedANGLE(5,4,ee.type,et<<(ee.type-5121>>1),ei):Q.drawArraysInstancedANGLE(5,et,4,ei):ei<0&&(ee?p.drawElements(5,4,ee.type,et<<(ee.type-5121>>1)):p.drawArrays(5,et,4)),_.dirty=!0,S.setVAO(null),z.next=o,m.framebufferWidth=f,m.framebufferHeight=c,m.viewportWidth=b,m.viewportHeight=h,$&&(t.cpuTime+=performance.now()-U)},scope:function(e,r,a){var p,g,y,x,S,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Y,X,U,Q,J,K,ee,et,ei,er,en;p=i.call(this,m,e,a),g=z.getFramebuffer(p),y=z.next,z.next=g,x=m.framebufferWidth,m.framebufferWidth=g?g.width:m.drawingBufferWidth,S=m.framebufferHeight,m.framebufferHeight=g?g.height:m.drawingBufferHeight,F=m.framebufferWidth,A=m.framebufferHeight,k=m.viewportWidth,m.viewportWidth=F,W=m.viewportHeight,m.viewportHeight=A,O=$[0],$[0]=l,H=$[1],$[1]=s,B=$[2],$[2]=F,I=$[3],$[3]=A,P=m.framebufferWidth,E=m.framebufferHeight,T=Z[0],Z[0]=o,M=Z[1],Z[1]=f,N=Z[2],Z[2]=P,L=Z[3],Z[3]=E,(C=_.profile)&&(V=performance.now(),t.count++),D=v.count,v.count=c,G=v.primitive,v.primitive=d,R=u.state,u.state=1,q=u.x,u.x=0,j=u.y,u.y=0,Y=u.z,u.z=0,X=u.w,u.w=0,U=u.buffer,u.buffer=n,Q=u.size,u.size=2,J=u.normalized,u.normalized=!1,K=u.type,u.type=5126,ee=u.offset,u.offset=0,et=u.stride,u.stride=0,ei=u.divisor,u.divisor=0,er=w.vert,w.vert=b,en=w.frag,w.frag=h,_.dirty=!0,r(m,e,a),z.next=y,m.framebufferWidth=x,m.framebufferHeight=S,m.viewportWidth=k,m.viewportHeight=W,$[0]=O,$[1]=H,$[2]=B,$[3]=I,Z[0]=T,Z[1]=M,Z[2]=N,Z[3]=L,C&&(t.cpuTime+=performance.now()-V),v.count=D,v.primitive=G,u.state=R,u.x=q,u.y=j,u.z=Y,u.w=X,u.buffer=U,u.size=Q,u.normalized=J,u.type=K,u.offset=ee,u.stride=et,u.divisor=ei,w.vert=er,w.frag=en,_.dirty=!0},batch:function(e,l){var s,o,f,c,d,u,b,h,w,Z,$,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU;for(F.angle_instanced_arrays,s=i.call(this,m,e,0),o=z.getFramebuffer(s),f=z.next,z.next=o,c=m.framebufferWidth,m.framebufferWidth=o?o.width:m.drawingBufferWidth,d=m.framebufferHeight,m.framebufferHeight=o?o.height:m.drawingBufferHeight,o!==z.cur&&(o?p.bindFramebuffer(36160,o.framebuffer):p.bindFramebuffer(36160,null),z.cur=o),_.dirty&&((ee=g.dither)!==_.dither&&(ee?p.enable(3024):p.disable(3024),_.dither=ee),(et=g.blend_enable)!==_.blend_enable&&(et?p.enable(3042):p.disable(3042),_.blend_enable=et),ei=A[0],er=A[1],en=A[2],ea=A[3],(ei!==k[0]||er!==k[1]||en!==k[2]||ea!==k[3])&&(p.blendColor(ei,er,en,ea),k[0]=ei,k[1]=er,k[2]=en,k[3]=ea),el=W[0],es=W[1],(el!==O[0]||es!==O[1])&&(p.blendEquationSeparate(el,es),O[0]=el,O[1]=es),eo=H[0],ef=H[1],ec=H[2],ed=H[3],(eo!==B[0]||ef!==B[1]||ec!==B[2]||ed!==B[3])&&(p.blendFuncSeparate(eo,ef,ec,ed),B[0]=eo,B[1]=ef,B[2]=ec,B[3]=ed),(eu=g.depth_enable)!==_.depth_enable&&(eu?p.enable(2929):p.disable(2929),_.depth_enable=eu),(eb=g.depth_func)!==_.depth_func&&(p.depthFunc(eb),_.depth_func=eb),eh=I[0],ep=I[1],(eh!==P[0]||ep!==P[1])&&(p.depthRange(eh,ep),P[0]=eh,P[1]=ep),(em=g.depth_mask)!==_.depth_mask&&(p.depthMask(em),_.depth_mask=em),eg=E[0],e_=E[1],ev=E[2],ey=E[3],(eg!==T[0]||e_!==T[1]||ev!==T[2]||ey!==T[3])&&(p.colorMask(eg,e_,ev,ey),T[0]=eg,T[1]=e_,T[2]=ev,T[3]=ey),(ew=g.cull_enable)!==_.cull_enable&&(ew?p.enable(2884):p.disable(2884),_.cull_enable=ew),(ex=g.cull_face)!==_.cull_face&&(p.cullFace(ex),_.cull_face=ex),(eS=g.frontFace)!==_.frontFace&&(p.frontFace(eS),_.frontFace=eS),(ez=g.lineWidth)!==_.lineWidth&&(p.lineWidth(ez),_.lineWidth=ez),(eF=g.polygonOffset_enable)!==_.polygonOffset_enable&&(eF?p.enable(32823):p.disable(32823),_.polygonOffset_enable=eF),eA=M[0],ek=M[1],(eA!==N[0]||ek!==N[1])&&(p.polygonOffset(eA,ek),N[0]=eA,N[1]=ek),(eW=g.sample_alpha)!==_.sample_alpha&&(eW?p.enable(32926):p.disable(32926),_.sample_alpha=eW),(eO=g.sample_enable)!==_.sample_enable&&(eO?p.enable(32928):p.disable(32928),_.sample_enable=eO),eH=L[0],eB=L[1],(eH!==C[0]||eB!==C[1])&&(p.sampleCoverage(eH,eB),C[0]=eH,C[1]=eB),(eI=g.stencil_enable)!==_.stencil_enable&&(eI?p.enable(2960):p.disable(2960),_.stencil_enable=eI),(eP=g.stencil_mask)!==_.stencil_mask&&(p.stencilMask(eP),_.stencil_mask=eP),eE=V[0],eT=V[1],eM=V[2],(eE!==D[0]||eT!==D[1]||eM!==D[2])&&(p.stencilFunc(eE,eT,eM),D[0]=eE,D[1]=eT,D[2]=eM),eN=G[0],eL=G[1],eC=G[2],eV=G[3],(eN!==R[0]||eL!==R[1]||eC!==R[2]||eV!==R[3])&&(p.stencilOpSeparate(eN,eL,eC,eV),R[0]=eN,R[1]=eL,R[2]=eC,R[3]=eV),eD=q[0],eG=q[1],eR=q[2],eq=q[3],(eD!==j[0]||eG!==j[1]||eR!==j[2]||eq!==j[3])&&(p.stencilOpSeparate(eD,eG,eR,eq),j[0]=eD,j[1]=eG,j[2]=eR,j[3]=eq),(ej=g.scissor_enable)!==_.scissor_enable&&(ej?p.enable(3089):p.disable(3089),_.scissor_enable=ej)),u=m.framebufferWidth,b=m.framebufferHeight,h=m.viewportWidth,m.viewportWidth=u,w=m.viewportHeight,m.viewportHeight=b,p.viewport(0,0,u,b),X[0]=0,X[1]=0,X[2]=u,X[3]=b,Z=m.framebufferWidth,$=m.framebufferHeight,p.scissor(0,0,Z,$),Y[0]=0,Y[1]=0,Y[2]=Z,Y[3]=$,(U=_.profile)&&(Q=performance.now(),t.count+=l),p.useProgram(r.program),J=F.angle_instanced_arrays,S.setVAO(null),(eY=x[eZ=a.location]).buffer||p.enableVertexAttribArray(eZ),(5126!==eY.type||2!==eY.size||eY.buffer!==n||!1!==eY.normalized||0!==eY.offset||0!==eY.stride)&&(p.bindBuffer(34962,n.buffer),p.vertexAttribPointer(eZ,2,5126,!1,0,0),eY.type=5126,eY.size=2,eY.buffer=n,eY.normalized=!1,eY.offset=0,eY.stride=0),0!==eY.divisor&&(J.vertexAttribDivisorANGLE(eZ,0),eY.divisor=0),(e$=v.elements)?p.bindBuffer(34963,e$.buffer.buffer):S.currentVAO&&(e$=y.getElements(S.currentVAO.elements))&&p.bindBuffer(34963,e$.buffer.buffer),eX=v.offset,eU=v.instances,K=0;K<l;++K)e[K],eU>0?e$?J.drawElementsInstancedANGLE(5,4,e$.type,eX<<(e$.type-5121>>1),eU):J.drawArraysInstancedANGLE(5,eX,4,eU):eU<0&&(e$?p.drawElements(5,4,e$.type,eX<<(e$.type-5121>>1)):p.drawArrays(5,eX,4));_.dirty=!0,S.setVAO(null),z.next=f,m.framebufferWidth=c,m.framebufferHeight=d,m.viewportWidth=h,m.viewportHeight=w,U&&(t.cpuTime+=performance.now()-Q)}}},"99397aae3c42f297df7b4b923ad2ed8869ec3d788ec7b7573ba53bc3447a1a81":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu){var eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU;return eb=e.gl,eh=e.context,e.strings,ep=e.next,em=e.current,eg=e.draw,e_=e.elements,e.buffer,ev=e.shader,ey=e.attributes,ew=e.vao,ex=e.uniforms,eS=e.framebuffer,ez=e.extensions,e.timer,e.isBufferArgs,eF=ep.blend_color,eA=em.blend_color,ek=ep.blend_equation,eW=em.blend_equation,eO=ep.blend_func,eH=em.blend_func,eB=ep.depth_range,eI=em.depth_range,eP=ep.colorMask,eE=em.colorMask,eT=ep.polygonOffset_offset,eM=em.polygonOffset_offset,eN=ep.sample_coverage,eL=em.sample_coverage,eC=ep.stencil_func,eV=em.stencil_func,eD=ep.stencil_opFront,eG=em.stencil_opFront,eR=ep.stencil_opBack,eq=em.stencil_opBack,ej=ep.scissor_box,eZ=em.scissor_box,eY=ep.viewport,e$=em.viewport,eX=new Float32Array(9),eU=new Float32Array(9),{draw:function(e){var T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,ev,ex,ek,eO,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS,tz,tF,tA,tk,tW;ez.angle_instanced_arrays,(T=eS.next)!==eS.cur&&(T?eb.bindFramebuffer(36160,T.framebuffer):eb.bindFramebuffer(36160,null),eS.cur=T),em.dirty&&((ek=ep.dither)!==em.dither&&(ek?eb.enable(3024):eb.disable(3024),em.dither=ek),eO=eF[0],eU=eF[1],eQ=eF[2],eJ=eF[3],(eO!==eA[0]||eU!==eA[1]||eQ!==eA[2]||eJ!==eA[3])&&(eb.blendColor(eO,eU,eQ,eJ),eA[0]=eO,eA[1]=eU,eA[2]=eQ,eA[3]=eJ),(eK=ep.depth_func)!==em.depth_func&&(eb.depthFunc(eK),em.depth_func=eK),e0=eB[0],e2=eB[1],(e0!==eI[0]||e2!==eI[1])&&(eb.depthRange(e0,e2),eI[0]=e0,eI[1]=e2),e1=eP[0],e3=eP[1],e4=eP[2],e6=eP[3],(e1!==eE[0]||e3!==eE[1]||e4!==eE[2]||e6!==eE[3])&&(eb.colorMask(e1,e3,e4,e6),eE[0]=e1,eE[1]=e3,eE[2]=e4,eE[3]=e6),(e9=ep.cull_enable)!==em.cull_enable&&(e9?eb.enable(2884):eb.disable(2884),em.cull_enable=e9),(e8=ep.cull_face)!==em.cull_face&&(eb.cullFace(e8),em.cull_face=e8),(e5=ep.frontFace)!==em.frontFace&&(eb.frontFace(e5),em.frontFace=e5),(e7=ep.lineWidth)!==em.lineWidth&&(eb.lineWidth(e7),em.lineWidth=e7),(te=ep.polygonOffset_enable)!==em.polygonOffset_enable&&(te?eb.enable(32823):eb.disable(32823),em.polygonOffset_enable=te),tt=eT[0],ti=eT[1],(tt!==eM[0]||ti!==eM[1])&&(eb.polygonOffset(tt,ti),eM[0]=tt,eM[1]=ti),(tr=ep.sample_alpha)!==em.sample_alpha&&(tr?eb.enable(32926):eb.disable(32926),em.sample_alpha=tr),(tn=ep.sample_enable)!==em.sample_enable&&(tn?eb.enable(32928):eb.disable(32928),em.sample_enable=tn),ta=eN[0],tl=eN[1],(ta!==eL[0]||tl!==eL[1])&&(eb.sampleCoverage(ta,tl),eL[0]=ta,eL[1]=tl),(ts=ep.stencil_enable)!==em.stencil_enable&&(ts?eb.enable(2960):eb.disable(2960),em.stencil_enable=ts),(to=ep.stencil_mask)!==em.stencil_mask&&(eb.stencilMask(to),em.stencil_mask=to),tf=eC[0],tc=eC[1],td=eC[2],(tf!==eV[0]||tc!==eV[1]||td!==eV[2])&&(eb.stencilFunc(tf,tc,td),eV[0]=tf,eV[1]=tc,eV[2]=td),tu=eD[0],tb=eD[1],th=eD[2],tp=eD[3],(tu!==eG[0]||tb!==eG[1]||th!==eG[2]||tp!==eG[3])&&(eb.stencilOpSeparate(tu,tb,th,tp),eG[0]=tu,eG[1]=tb,eG[2]=th,eG[3]=tp),tm=eR[0],tg=eR[1],t_=eR[2],tv=eR[3],(tm!==eq[0]||tg!==eq[1]||t_!==eq[2]||tv!==eq[3])&&(eb.stencilOpSeparate(tm,tg,t_,tv),eq[0]=tm,eq[1]=tg,eq[2]=t_,eq[3]=tv),(ty=ep.scissor_enable)!==em.scissor_enable&&(ty?eb.enable(3089):eb.disable(3089),em.scissor_enable=ty),tw=ej[0],tx=ej[1],tS=ej[2],tz=ej[3],(tw!==eZ[0]||tx!==eZ[1]||tS!==eZ[2]||tz!==eZ[3])&&(eb.scissor(tw,tx,tS,tz),eZ[0]=tw,eZ[1]=tx,eZ[2]=tS,eZ[3]=tz),tF=eY[0],tA=eY[1],tk=eY[2],tW=eY[3],(tF!==e$[0]||tA!==e$[1]||tk!==e$[2]||tW!==e$[3])&&(eb.viewport(tF,tA,tk,tW),e$[0]=tF,e$[1]=tA,e$[2]=tk,e$[3]=tW)),i?eb.enable(3042):eb.disable(3042),em.blend_enable=i,eb.blendEquationSeparate(32774,32774),eW[0]=32774,eW[1]=32774,eb.blendFuncSeparate(770,771,1,771),eH[0]=770,eH[1]=771,eH[2]=1,eH[3]=771,r?eb.enable(2929):eb.disable(2929),em.depth_enable=r,eb.depthMask(n),em.depth_mask=n,(M=em.profile)&&(N=performance.now(),t.count++),eb.useProgram(a.program),L=ez.angle_instanced_arrays,ew.setVAO(null),(V=ey[C=s.location]).buffer||eb.enableVertexAttribArray(C),(5126!==V.type||2!==V.size||V.buffer!==l||!1!==V.normalized||0!==V.offset||0!==V.stride)&&(eb.bindBuffer(34962,l.buffer),eb.vertexAttribPointer(C,2,5126,!1,0,0),V.type=5126,V.size=2,V.buffer=l,V.normalized=!1,V.offset=0,V.stride=0),0!==V.divisor&&(L.vertexAttribDivisorANGLE(C,0),V.divisor=0),G=(D=e.color)[0],R=D[1],q=D[2],j=D[3],eb.uniform4f(o.location,G,R,q,j),Z=c.call(this,eh,e,0),eb.uniform1f(f.location,Z),Y=u.call(this,eh,e,0),eb.uniform1f(d.location,Y),($=h.call(this,eh,e,0))&&"framebuffer"===$._reglType&&($=$.color[0]),X=$._texture,eb.uniform1i(b.location,X.bind()),(U=m.call(this,eh,e,0))&&"framebuffer"===U._reglType&&(U=U.color[0]),Q=U._texture,eb.uniform1i(p.location,Q.bind()),(J=_.call(this,eh,e,0))&&"framebuffer"===J._reglType&&(J=J.color[0]),K=J._texture,eb.uniform1i(g.location,K.bind()),ee=e.pointIndex,eb.uniform1f(v.location,ee),et=w.call(this,eh,e,0),eb.uniform1f(y.location,et),(ei=S.call(this,eh,e,0))&&"framebuffer"===ei._reglType&&(ei=ei.color[0]),er=ei._texture,eb.uniform1i(x.location,er.bind()),en=F.call(this,eh,e,0),eb.uniform1i(z.location,en),el=(ea=k.call(this,eh,e,0))[0],es=ea[1],eb.uniform2f(A.location,el,es),eo=O.call(this,eh,e,0),eb.uniform1f(W.location,eo),ef=B.call(this,eh,e,0),eb.uniform1f(H.location,ef),ec=P.call(this,eh,e,0),eb.uniformMatrix3fv(I.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(eX[0]=ec[0],eX[1]=ec[1],eX[2]=ec[2],eX[3]=ec[3],eX[4]=ec[4],eX[5]=ec[5],eX[6]=ec[6],eX[7]=ec[7],eX[8]=ec[8],eX)),ed=e.width,eb.uniform1f(E.location,ed),(eu=eg.elements)?eb.bindBuffer(34963,eu.buffer.buffer):ew.currentVAO&&(eu=e_.getElements(ew.currentVAO.elements))&&eb.bindBuffer(34963,eu.buffer.buffer),ev=eg.offset,(ex=eg.instances)>0?eu?L.drawElementsInstancedANGLE(5,4,eu.type,ev<<(eu.type-5121>>1),ex):L.drawArraysInstancedANGLE(5,ev,4,ex):ex<0&&(eu?eb.drawElements(5,4,eu.type,ev<<(eu.type-5121>>1)):eb.drawArrays(5,ev,4)),em.dirty=!0,ew.setVAO(null),M&&(t.cpuTime+=performance.now()-N),X.unbind(),Q.unbind(),K.unbind(),er.unbind()},scope:function(e,i,r){var n,a,s,o,f,d,b,p,g,v,y,x,z,A,W,H,I,E,ec,ed,eu,eb,e_,ey,ew,eS,ez,eF,eA,eW,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1;n=ep.blend_enable,ep.blend_enable=T,a=ek[0],ek[0]=M,s=ek[1],ek[1]=N,o=eO[0],eO[0]=L,f=eO[1],eO[1]=C,d=eO[2],eO[2]=V,b=eO[3],eO[3]=D,p=ep.depth_enable,ep.depth_enable=G,g=ep.depth_mask,ep.depth_mask=R,(v=em.profile)&&(y=performance.now(),t.count++),x=eg.count,eg.count=q,z=eg.primitive,eg.primitive=j,A=e.color,W=ex[Z],ex[Z]=A,H=e.width,I=ex[Y],ex[Y]=H,E=e.pointIndex,ec=ex[$],ex[$]=E,ed=S.call(this,eh,e,r),eu=ex[X],ex[X]=ed,eb=h.call(this,eh,e,r),e_=ex[U],ex[U]=eb,ey=_.call(this,eh,e,r),ew=ex[Q],ex[Q]=ey,eS=O.call(this,eh,e,r),ez=ex[J],ex[J]=eS,eF=w.call(this,eh,e,r),eA=ex[K],ex[K]=eF,eW=P.call(this,eh,e,r),eH=ex[ee],ex[ee]=eW,eB=B.call(this,eh,e,r),eI=ex[et],ex[et]=eB,eP=k.call(this,eh,e,r),eE=ex[ei],ex[ei]=eP,eT=F.call(this,eh,e,r),eM=ex[er],ex[er]=eT,eN=u.call(this,eh,e,r),eL=ex[en],ex[en]=eN,eC=m.call(this,eh,e,r),eV=ex[ea],ex[ea]=eC,eD=c.call(this,eh,e,r),eG=ex[el],ex[el]=eD,eR=es.state,es.state=1,eq=es.x,es.x=0,ej=es.y,es.y=0,eZ=es.z,es.z=0,eY=es.w,es.w=0,e$=es.buffer,es.buffer=l,eX=es.size,es.size=2,eU=es.normalized,es.normalized=!1,eQ=es.type,es.type=5126,eJ=es.offset,es.offset=0,eK=es.stride,es.stride=0,e0=es.divisor,es.divisor=0,e2=ev.vert,ev.vert=eo,e1=ev.frag,ev.frag=ef,em.dirty=!0,i(eh,e,r),ep.blend_enable=n,ek[0]=a,ek[1]=s,eO[0]=o,eO[1]=f,eO[2]=d,eO[3]=b,ep.depth_enable=p,ep.depth_mask=g,v&&(t.cpuTime+=performance.now()-y),eg.count=x,eg.primitive=z,ex[Z]=W,ex[Y]=I,ex[$]=ec,ex[X]=eu,ex[U]=e_,ex[Q]=ew,ex[J]=ez,ex[K]=eA,ex[ee]=eH,ex[et]=eI,ex[ei]=eE,ex[er]=eM,ex[en]=eL,ex[ea]=eV,ex[el]=eG,es.state=eR,es.x=eq,es.y=ej,es.z=eZ,es.w=eY,es.buffer=e$,es.size=eX,es.normalized=eU,es.type=eQ,es.offset=eJ,es.stride=eK,es.divisor=e0,ev.vert=e2,ev.frag=e1,em.dirty=!0},batch:function(e,i){var r,n,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ev,ex,ek,eO,eX,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS,tz,tF,tA,tk,tW,tO,tH,tB,tI,tP,tE,tT,tM,tN;for(ez.angle_instanced_arrays,(r=eS.next)!==eS.cur&&(r?eb.bindFramebuffer(36160,r.framebuffer):eb.bindFramebuffer(36160,null),eS.cur=r),em.dirty&&((C=ep.dither)!==em.dither&&(C?eb.enable(3024):eb.disable(3024),em.dither=C),V=eF[0],D=eF[1],G=eF[2],R=eF[3],(V!==eA[0]||D!==eA[1]||G!==eA[2]||R!==eA[3])&&(eb.blendColor(V,D,G,R),eA[0]=V,eA[1]=D,eA[2]=G,eA[3]=R),(q=ep.depth_func)!==em.depth_func&&(eb.depthFunc(q),em.depth_func=q),j=eB[0],Z=eB[1],(j!==eI[0]||Z!==eI[1])&&(eb.depthRange(j,Z),eI[0]=j,eI[1]=Z),Y=eP[0],$=eP[1],X=eP[2],U=eP[3],(Y!==eE[0]||$!==eE[1]||X!==eE[2]||U!==eE[3])&&(eb.colorMask(Y,$,X,U),eE[0]=Y,eE[1]=$,eE[2]=X,eE[3]=U),(Q=ep.cull_enable)!==em.cull_enable&&(Q?eb.enable(2884):eb.disable(2884),em.cull_enable=Q),(J=ep.cull_face)!==em.cull_face&&(eb.cullFace(J),em.cull_face=J),(K=ep.frontFace)!==em.frontFace&&(eb.frontFace(K),em.frontFace=K),(ee=ep.lineWidth)!==em.lineWidth&&(eb.lineWidth(ee),em.lineWidth=ee),(et=ep.polygonOffset_enable)!==em.polygonOffset_enable&&(et?eb.enable(32823):eb.disable(32823),em.polygonOffset_enable=et),ei=eT[0],er=eT[1],(ei!==eM[0]||er!==eM[1])&&(eb.polygonOffset(ei,er),eM[0]=ei,eM[1]=er),(en=ep.sample_alpha)!==em.sample_alpha&&(en?eb.enable(32926):eb.disable(32926),em.sample_alpha=en),(ea=ep.sample_enable)!==em.sample_enable&&(ea?eb.enable(32928):eb.disable(32928),em.sample_enable=ea),el=eN[0],es=eN[1],(el!==eL[0]||es!==eL[1])&&(eb.sampleCoverage(el,es),eL[0]=el,eL[1]=es),(eo=ep.stencil_enable)!==em.stencil_enable&&(eo?eb.enable(2960):eb.disable(2960),em.stencil_enable=eo),(ef=ep.stencil_mask)!==em.stencil_mask&&(eb.stencilMask(ef),em.stencil_mask=ef),ev=eC[0],ex=eC[1],ek=eC[2],(ev!==eV[0]||ex!==eV[1]||ek!==eV[2])&&(eb.stencilFunc(ev,ex,ek),eV[0]=ev,eV[1]=ex,eV[2]=ek),eO=eD[0],eX=eD[1],eQ=eD[2],eJ=eD[3],(eO!==eG[0]||eX!==eG[1]||eQ!==eG[2]||eJ!==eG[3])&&(eb.stencilOpSeparate(eO,eX,eQ,eJ),eG[0]=eO,eG[1]=eX,eG[2]=eQ,eG[3]=eJ),eK=eR[0],e0=eR[1],e2=eR[2],e1=eR[3],(eK!==eq[0]||e0!==eq[1]||e2!==eq[2]||e1!==eq[3])&&(eb.stencilOpSeparate(eK,e0,e2,e1),eq[0]=eK,eq[1]=e0,eq[2]=e2,eq[3]=e1),(e3=ep.scissor_enable)!==em.scissor_enable&&(e3?eb.enable(3089):eb.disable(3089),em.scissor_enable=e3),e4=ej[0],e6=ej[1],e9=ej[2],e8=ej[3],(e4!==eZ[0]||e6!==eZ[1]||e9!==eZ[2]||e8!==eZ[3])&&(eb.scissor(e4,e6,e9,e8),eZ[0]=e4,eZ[1]=e6,eZ[2]=e9,eZ[3]=e8),e5=eY[0],e7=eY[1],te=eY[2],tt=eY[3],(e5!==e$[0]||e7!==e$[1]||te!==e$[2]||tt!==e$[3])&&(eb.viewport(e5,e7,te,tt),e$[0]=e5,e$[1]=e7,e$[2]=te,e$[3]=tt)),ec?eb.enable(3042):eb.disable(3042),em.blend_enable=ec,eb.blendEquationSeparate(32774,32774),eW[0]=32774,eW[1]=32774,eb.blendFuncSeparate(770,771,1,771),eH[0]=770,eH[1]=771,eH[2]=1,eH[3]=771,ed?eb.enable(2929):eb.disable(2929),em.depth_enable=ed,eb.depthMask(eu),em.depth_mask=eu,(n=em.profile)&&(T=performance.now(),t.count+=i),eb.useProgram(a.program),M=ez.angle_instanced_arrays,ew.setVAO(null),(tr=ey[ti=s.location]).buffer||eb.enableVertexAttribArray(ti),(5126!==tr.type||2!==tr.size||tr.buffer!==l||!1!==tr.normalized||0!==tr.offset||0!==tr.stride)&&(eb.bindBuffer(34962,l.buffer),eb.vertexAttribPointer(ti,2,5126,!1,0,0),tr.type=5126,tr.size=2,tr.buffer=l,tr.normalized=!1,tr.offset=0,tr.stride=0),0!==tr.divisor&&(M.vertexAttribDivisorANGLE(ti,0),tr.divisor=0),tn=c.call(this,eh,L,N),eb.uniform1f(f.location,tn),ta=u.call(this,eh,L,N),eb.uniform1f(d.location,ta),(tl=h.call(this,eh,L,N))&&"framebuffer"===tl._reglType&&(tl=tl.color[0]),ts=tl._texture,eb.uniform1i(b.location,ts.bind()),(to=m.call(this,eh,L,N))&&"framebuffer"===to._reglType&&(to=to.color[0]),tf=to._texture,eb.uniform1i(p.location,tf.bind()),(tc=_.call(this,eh,L,N))&&"framebuffer"===tc._reglType&&(tc=tc.color[0]),td=tc._texture,eb.uniform1i(g.location,td.bind()),tu=w.call(this,eh,L,N),eb.uniform1f(y.location,tu),(tb=S.call(this,eh,L,N))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]),th=tb._texture,eb.uniform1i(x.location,th.bind()),tp=F.call(this,eh,L,N),eb.uniform1i(z.location,tp),tg=(tm=k.call(this,eh,L,N))[0],t_=tm[1],eb.uniform2f(A.location,tg,t_),tv=O.call(this,eh,L,N),eb.uniform1f(W.location,tv),ty=B.call(this,eh,L,N),eb.uniform1f(H.location,ty),tw=P.call(this,eh,L,N),eb.uniformMatrix3fv(I.location,!1,Array.isArray(tw)||tw instanceof Float32Array?tw:(eU[0]=tw[0],eU[1]=tw[1],eU[2]=tw[2],eU[3]=tw[3],eU[4]=tw[4],eU[5]=tw[5],eU[6]=tw[6],eU[7]=tw[7],eU[8]=tw[8],eU)),(tx=eg.elements)?eb.bindBuffer(34963,tx.buffer.buffer):ew.currentVAO&&(tx=e_.getElements(ew.currentVAO.elements))&&eb.bindBuffer(34963,tx.buffer.buffer),tS=eg.offset,tz=eg.instances,N=0;N<i;++N)tA=(tF=(L=e[N]).color)[0],tW=tF[1],tH=tF[2],tI=tF[3],N&&tk===tA&&tO===tW&&tB===tH&&tP===tI||(tk=tA,tO=tW,tB=tH,tP=tI,eb.uniform4f(o.location,tA,tW,tH,tI)),tE=L.pointIndex,N&&tT===tE||(tT=tE,eb.uniform1f(v.location,tE)),tM=L.width,N&&tN===tM||(tN=tM,eb.uniform1f(E.location,tM)),tz>0?tx?M.drawElementsInstancedANGLE(5,4,tx.type,tS<<(tx.type-5121>>1),tz):M.drawArraysInstancedANGLE(5,tS,4,tz):tz<0&&(tx?eb.drawElements(5,4,tx.type,tS<<(tx.type-5121>>1)):eb.drawArrays(5,tS,4));ts.unbind(),tf.unbind(),td.unbind(),th.unbind(),em.dirty=!0,ew.setVAO(null),n&&(t.cpuTime+=performance.now()-T)}}},eb221f9c85bbb1289d8191f0a5e2cb2f7a7494b901353fb18a93f8073ffa6fbe:function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S){var z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea;return z=e.gl,F=e.context,e.strings,A=e.next,k=e.current,W=e.draw,O=e.elements,e.buffer,H=e.shader,B=e.attributes,I=e.vao,P=e.uniforms,E=e.framebuffer,T=e.extensions,e.timer,e.isBufferArgs,M=A.blend_color,N=k.blend_color,L=A.blend_equation,C=k.blend_equation,V=A.blend_func,D=k.blend_func,G=A.depth_range,R=k.depth_range,q=A.colorMask,j=k.colorMask,Z=A.polygonOffset_offset,Y=k.polygonOffset_offset,$=A.sample_coverage,X=k.sample_coverage,U=A.stencil_func,Q=k.stencil_func,J=A.stencil_opFront,K=k.stencil_opFront,ee=A.stencil_opBack,et=k.stencil_opBack,ei=A.scissor_box,er=k.scissor_box,en=A.viewport,ea=k.viewport,{draw:function(e){var u,b,h,p,m,g,_,v,y,w,x,S,H,P,ei,en,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6;T.angle_instanced_arrays,u=i.call(this,F,e,0),b=E.getFramebuffer(u),h=E.next,E.next=b,p=F.framebufferWidth,F.framebufferWidth=b?b.width:F.drawingBufferWidth,m=F.framebufferHeight,F.framebufferHeight=b?b.height:F.drawingBufferHeight,b!==E.cur&&(b?z.bindFramebuffer(36160,b.framebuffer):z.bindFramebuffer(36160,null),E.cur=b),k.dirty&&((eh=A.dither)!==k.dither&&(eh?z.enable(3024):z.disable(3024),k.dither=eh),(ep=A.blend_enable)!==k.blend_enable&&(ep?z.enable(3042):z.disable(3042),k.blend_enable=ep),em=M[0],eg=M[1],e_=M[2],ev=M[3],(em!==N[0]||eg!==N[1]||e_!==N[2]||ev!==N[3])&&(z.blendColor(em,eg,e_,ev),N[0]=em,N[1]=eg,N[2]=e_,N[3]=ev),ey=L[0],ew=L[1],(ey!==C[0]||ew!==C[1])&&(z.blendEquationSeparate(ey,ew),C[0]=ey,C[1]=ew),ex=V[0],eS=V[1],ez=V[2],eF=V[3],(ex!==D[0]||eS!==D[1]||ez!==D[2]||eF!==D[3])&&(z.blendFuncSeparate(ex,eS,ez,eF),D[0]=ex,D[1]=eS,D[2]=ez,D[3]=eF),(eA=A.depth_enable)!==k.depth_enable&&(eA?z.enable(2929):z.disable(2929),k.depth_enable=eA),(ek=A.depth_func)!==k.depth_func&&(z.depthFunc(ek),k.depth_func=ek),eW=G[0],eO=G[1],(eW!==R[0]||eO!==R[1])&&(z.depthRange(eW,eO),R[0]=eW,R[1]=eO),(eH=A.depth_mask)!==k.depth_mask&&(z.depthMask(eH),k.depth_mask=eH),eB=q[0],eI=q[1],eP=q[2],eE=q[3],(eB!==j[0]||eI!==j[1]||eP!==j[2]||eE!==j[3])&&(z.colorMask(eB,eI,eP,eE),j[0]=eB,j[1]=eI,j[2]=eP,j[3]=eE),(eT=A.cull_enable)!==k.cull_enable&&(eT?z.enable(2884):z.disable(2884),k.cull_enable=eT),(eM=A.cull_face)!==k.cull_face&&(z.cullFace(eM),k.cull_face=eM),(eN=A.frontFace)!==k.frontFace&&(z.frontFace(eN),k.frontFace=eN),(eL=A.lineWidth)!==k.lineWidth&&(z.lineWidth(eL),k.lineWidth=eL),(eC=A.polygonOffset_enable)!==k.polygonOffset_enable&&(eC?z.enable(32823):z.disable(32823),k.polygonOffset_enable=eC),eV=Z[0],eD=Z[1],(eV!==Y[0]||eD!==Y[1])&&(z.polygonOffset(eV,eD),Y[0]=eV,Y[1]=eD),(eG=A.sample_alpha)!==k.sample_alpha&&(eG?z.enable(32926):z.disable(32926),k.sample_alpha=eG),(eR=A.sample_enable)!==k.sample_enable&&(eR?z.enable(32928):z.disable(32928),k.sample_enable=eR),eq=$[0],ej=$[1],(eq!==X[0]||ej!==X[1])&&(z.sampleCoverage(eq,ej),X[0]=eq,X[1]=ej),(eZ=A.stencil_enable)!==k.stencil_enable&&(eZ?z.enable(2960):z.disable(2960),k.stencil_enable=eZ),(eY=A.stencil_mask)!==k.stencil_mask&&(z.stencilMask(eY),k.stencil_mask=eY),e$=U[0],eX=U[1],eU=U[2],(e$!==Q[0]||eX!==Q[1]||eU!==Q[2])&&(z.stencilFunc(e$,eX,eU),Q[0]=e$,Q[1]=eX,Q[2]=eU),eQ=J[0],eJ=J[1],eK=J[2],e0=J[3],(eQ!==K[0]||eJ!==K[1]||eK!==K[2]||e0!==K[3])&&(z.stencilOpSeparate(eQ,eJ,eK,e0),K[0]=eQ,K[1]=eJ,K[2]=eK,K[3]=e0),e2=ee[0],e1=ee[1],e3=ee[2],e4=ee[3],(e2!==et[0]||e1!==et[1]||e3!==et[2]||e4!==et[3])&&(z.stencilOpSeparate(e2,e1,e3,e4),et[0]=e2,et[1]=e1,et[2]=e3,et[3]=e4),(e6=A.scissor_enable)!==k.scissor_enable&&(e6?z.enable(3089):z.disable(3089),k.scissor_enable=e6)),g=F.framebufferWidth,_=F.framebufferHeight,v=F.viewportWidth,F.viewportWidth=g,y=F.viewportHeight,F.viewportHeight=_,z.viewport(0,0,g,_),ea[0]=0,ea[1]=0,ea[2]=g,ea[3]=_,w=F.framebufferWidth,x=F.framebufferHeight,z.scissor(0,0,w,x),er[0]=0,er[1]=0,er[2]=w,er[3]=x,(S=k.profile)&&(H=performance.now(),t.count++),z.useProgram(r.program),P=T.angle_instanced_arrays,I.setVAO(null),(en=B[ei=a.location]).buffer||z.enableVertexAttribArray(ei),(5126!==en.type||2!==en.size||en.buffer!==n||!1!==en.normalized||0!==en.offset||0!==en.stride)&&(z.bindBuffer(34962,n.buffer),z.vertexAttribPointer(ei,2,5126,!1,0,0),en.type=5126,en.size=2,en.buffer=n,en.normalized=!1,en.offset=0,en.stride=0),0!==en.divisor&&(P.vertexAttribDivisorANGLE(ei,0),en.divisor=0),el=s.call(this,F,e,0),z.uniform1f(l.location,el),(es=f.call(this,F,e,0))&&"framebuffer"===es._reglType&&(es=es.color[0]),eo=es._texture,z.uniform1i(o.location,eo.bind()),(ef=d.call(this,F,e,0))&&"framebuffer"===ef._reglType&&(ef=ef.color[0]),ec=ef._texture,z.uniform1i(c.location,ec.bind()),(ed=W.elements)?z.bindBuffer(34963,ed.buffer.buffer):I.currentVAO&&(ed=O.getElements(I.currentVAO.elements))&&z.bindBuffer(34963,ed.buffer.buffer),eu=W.offset,(eb=W.instances)>0?ed?P.drawElementsInstancedANGLE(5,4,ed.type,eu<<(ed.type-5121>>1),eb):P.drawArraysInstancedANGLE(5,eu,4,eb):eb<0&&(ed?z.drawElements(5,4,ed.type,eu<<(ed.type-5121>>1)):z.drawArrays(5,eu,4)),k.dirty=!0,I.setVAO(null),E.next=h,F.framebufferWidth=p,F.framebufferHeight=m,F.viewportWidth=v,F.viewportHeight=y,S&&(t.cpuTime+=performance.now()-H),eo.unbind(),ec.unbind()},scope:function(e,r,a){var l,o,c,z,A,O,B,I,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,er,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg;l=i.call(this,F,e,a),o=E.getFramebuffer(l),c=E.next,E.next=o,z=F.framebufferWidth,F.framebufferWidth=o?o.width:F.drawingBufferWidth,A=F.framebufferHeight,F.framebufferHeight=o?o.height:F.drawingBufferHeight,O=F.framebufferWidth,B=F.framebufferHeight,I=F.viewportWidth,F.viewportWidth=O,T=F.viewportHeight,F.viewportHeight=B,M=en[0],en[0]=u,N=en[1],en[1]=b,L=en[2],en[2]=O,C=en[3],en[3]=B,V=F.framebufferWidth,D=F.framebufferHeight,G=ei[0],ei[0]=h,R=ei[1],ei[1]=p,q=ei[2],ei[2]=V,j=ei[3],ei[3]=D,(Z=k.profile)&&(Y=performance.now(),t.count++),$=W.count,W.count=m,X=W.primitive,W.primitive=g,U=f.call(this,F,e,a),Q=P[_],P[_]=U,J=d.call(this,F,e,a),K=P[v],P[v]=J,ee=s.call(this,F,e,a),et=P[y],P[y]=ee,er=w.state,w.state=1,ea=w.x,w.x=0,el=w.y,w.y=0,es=w.z,w.z=0,eo=w.w,w.w=0,ef=w.buffer,w.buffer=n,ec=w.size,w.size=2,ed=w.normalized,w.normalized=!1,eu=w.type,w.type=5126,eb=w.offset,w.offset=0,eh=w.stride,w.stride=0,ep=w.divisor,w.divisor=0,em=H.vert,H.vert=x,eg=H.frag,H.frag=S,k.dirty=!0,r(F,e,a),E.next=c,F.framebufferWidth=z,F.framebufferHeight=A,F.viewportWidth=I,F.viewportHeight=T,en[0]=M,en[1]=N,en[2]=L,en[3]=C,ei[0]=G,ei[1]=R,ei[2]=q,ei[3]=j,Z&&(t.cpuTime+=performance.now()-Y),W.count=$,W.primitive=X,P[_]=Q,P[v]=K,P[y]=et,w.state=er,w.x=ea,w.y=el,w.z=es,w.w=eo,w.buffer=ef,w.size=ec,w.normalized=ed,w.type=eu,w.offset=eb,w.stride=eh,w.divisor=ep,H.vert=em,H.frag=eg,k.dirty=!0},batch:function(e,u){var b,h,p,m,g,_,v,y,w,x,S,H,P,ei,en,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5;for(T.angle_instanced_arrays,b=i.call(this,F,e,0),h=E.getFramebuffer(b),p=E.next,E.next=h,m=F.framebufferWidth,F.framebufferWidth=h?h.width:F.drawingBufferWidth,g=F.framebufferHeight,F.framebufferHeight=h?h.height:F.drawingBufferHeight,h!==E.cur&&(h?z.bindFramebuffer(36160,h.framebuffer):z.bindFramebuffer(36160,null),E.cur=h),k.dirty&&((es=A.dither)!==k.dither&&(es?z.enable(3024):z.disable(3024),k.dither=es),(eo=A.blend_enable)!==k.blend_enable&&(eo?z.enable(3042):z.disable(3042),k.blend_enable=eo),ef=M[0],ec=M[1],ed=M[2],eu=M[3],(ef!==N[0]||ec!==N[1]||ed!==N[2]||eu!==N[3])&&(z.blendColor(ef,ec,ed,eu),N[0]=ef,N[1]=ec,N[2]=ed,N[3]=eu),eb=L[0],eh=L[1],(eb!==C[0]||eh!==C[1])&&(z.blendEquationSeparate(eb,eh),C[0]=eb,C[1]=eh),ep=V[0],em=V[1],eg=V[2],e_=V[3],(ep!==D[0]||em!==D[1]||eg!==D[2]||e_!==D[3])&&(z.blendFuncSeparate(ep,em,eg,e_),D[0]=ep,D[1]=em,D[2]=eg,D[3]=e_),(ev=A.depth_enable)!==k.depth_enable&&(ev?z.enable(2929):z.disable(2929),k.depth_enable=ev),(ey=A.depth_func)!==k.depth_func&&(z.depthFunc(ey),k.depth_func=ey),ew=G[0],ex=G[1],(ew!==R[0]||ex!==R[1])&&(z.depthRange(ew,ex),R[0]=ew,R[1]=ex),(eS=A.depth_mask)!==k.depth_mask&&(z.depthMask(eS),k.depth_mask=eS),ez=q[0],eF=q[1],eA=q[2],ek=q[3],(ez!==j[0]||eF!==j[1]||eA!==j[2]||ek!==j[3])&&(z.colorMask(ez,eF,eA,ek),j[0]=ez,j[1]=eF,j[2]=eA,j[3]=ek),(eW=A.cull_enable)!==k.cull_enable&&(eW?z.enable(2884):z.disable(2884),k.cull_enable=eW),(eO=A.cull_face)!==k.cull_face&&(z.cullFace(eO),k.cull_face=eO),(eH=A.frontFace)!==k.frontFace&&(z.frontFace(eH),k.frontFace=eH),(eB=A.lineWidth)!==k.lineWidth&&(z.lineWidth(eB),k.lineWidth=eB),(eI=A.polygonOffset_enable)!==k.polygonOffset_enable&&(eI?z.enable(32823):z.disable(32823),k.polygonOffset_enable=eI),eP=Z[0],eE=Z[1],(eP!==Y[0]||eE!==Y[1])&&(z.polygonOffset(eP,eE),Y[0]=eP,Y[1]=eE),(eT=A.sample_alpha)!==k.sample_alpha&&(eT?z.enable(32926):z.disable(32926),k.sample_alpha=eT),(eM=A.sample_enable)!==k.sample_enable&&(eM?z.enable(32928):z.disable(32928),k.sample_enable=eM),eN=$[0],eL=$[1],(eN!==X[0]||eL!==X[1])&&(z.sampleCoverage(eN,eL),X[0]=eN,X[1]=eL),(eC=A.stencil_enable)!==k.stencil_enable&&(eC?z.enable(2960):z.disable(2960),k.stencil_enable=eC),(eV=A.stencil_mask)!==k.stencil_mask&&(z.stencilMask(eV),k.stencil_mask=eV),eD=U[0],eG=U[1],eR=U[2],(eD!==Q[0]||eG!==Q[1]||eR!==Q[2])&&(z.stencilFunc(eD,eG,eR),Q[0]=eD,Q[1]=eG,Q[2]=eR),eq=J[0],ej=J[1],eZ=J[2],eY=J[3],(eq!==K[0]||ej!==K[1]||eZ!==K[2]||eY!==K[3])&&(z.stencilOpSeparate(eq,ej,eZ,eY),K[0]=eq,K[1]=ej,K[2]=eZ,K[3]=eY),e$=ee[0],eX=ee[1],eU=ee[2],eQ=ee[3],(e$!==et[0]||eX!==et[1]||eU!==et[2]||eQ!==et[3])&&(z.stencilOpSeparate(e$,eX,eU,eQ),et[0]=e$,et[1]=eX,et[2]=eU,et[3]=eQ),(eJ=A.scissor_enable)!==k.scissor_enable&&(eJ?z.enable(3089):z.disable(3089),k.scissor_enable=eJ)),_=F.framebufferWidth,v=F.framebufferHeight,y=F.viewportWidth,F.viewportWidth=_,w=F.viewportHeight,F.viewportHeight=v,z.viewport(0,0,_,v),ea[0]=0,ea[1]=0,ea[2]=_,ea[3]=v,x=F.framebufferWidth,S=F.framebufferHeight,z.scissor(0,0,x,S),er[0]=0,er[1]=0,er[2]=x,er[3]=S,(H=k.profile)&&(P=performance.now(),t.count+=u),z.useProgram(r.program),ei=T.angle_instanced_arrays,I.setVAO(null),(e0=B[eK=a.location]).buffer||z.enableVertexAttribArray(eK),(5126!==e0.type||2!==e0.size||e0.buffer!==n||!1!==e0.normalized||0!==e0.offset||0!==e0.stride)&&(z.bindBuffer(34962,n.buffer),z.vertexAttribPointer(eK,2,5126,!1,0,0),e0.type=5126,e0.size=2,e0.buffer=n,e0.normalized=!1,e0.offset=0,e0.stride=0),0!==e0.divisor&&(ei.vertexAttribDivisorANGLE(eK,0),e0.divisor=0),e2=s.call(this,F,el,en),z.uniform1f(l.location,e2),(e1=f.call(this,F,el,en))&&"framebuffer"===e1._reglType&&(e1=e1.color[0]),e3=e1._texture,z.uniform1i(o.location,e3.bind()),(e4=d.call(this,F,el,en))&&"framebuffer"===e4._reglType&&(e4=e4.color[0]),e6=e4._texture,z.uniform1i(c.location,e6.bind()),(e9=W.elements)?z.bindBuffer(34963,e9.buffer.buffer):I.currentVAO&&(e9=O.getElements(I.currentVAO.elements))&&z.bindBuffer(34963,e9.buffer.buffer),e8=W.offset,e5=W.instances,en=0;en<u;++en)el=e[en],e5>0?e9?ei.drawElementsInstancedANGLE(5,4,e9.type,e8<<(e9.type-5121>>1),e5):ei.drawArraysInstancedANGLE(5,e8,4,e5):e5<0&&(e9?z.drawElements(5,4,e9.type,e8<<(e9.type-5121>>1)):z.drawArrays(5,e8,4));e3.unbind(),e6.unbind(),k.dirty=!0,I.setVAO(null),E.next=p,F.framebufferWidth=m,F.framebufferHeight=g,F.viewportWidth=y,F.viewportHeight=w,H&&(t.cpuTime+=performance.now()-P)}}},da693cc97ee74da1ea2a4318da665c6724ca4598a491573f90321d5cf98cd00e:function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T){var M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev;return M=e.gl,N=e.context,e.strings,L=e.next,C=e.current,V=e.draw,D=e.elements,e.buffer,G=e.shader,R=e.attributes,q=e.vao,j=e.uniforms,Z=e.framebuffer,Y=e.extensions,e.timer,e.isBufferArgs,$=L.blend_color,X=C.blend_color,U=L.blend_equation,Q=C.blend_equation,J=L.blend_func,K=C.blend_func,ee=L.depth_range,et=C.depth_range,ei=L.colorMask,er=C.colorMask,en=L.polygonOffset_offset,ea=C.polygonOffset_offset,el=L.sample_coverage,es=C.sample_coverage,eo=L.stencil_func,ef=C.stencil_func,ec=L.stencil_opFront,ed=C.stencil_opFront,eu=L.stencil_opBack,eb=C.stencil_opBack,eh=L.scissor_box,ep=C.scissor_box,em=L.viewport,eg=C.viewport,e_=new Float32Array(9),ev=new Float32Array(9),{draw:function(e){var v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,G,j,eh,em,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta;Y.angle_instanced_arrays,v=i.call(this,N,e,0),y=Z.getFramebuffer(v),w=Z.next,Z.next=y,x=N.framebufferWidth,N.framebufferWidth=y?y.width:N.drawingBufferWidth,S=N.framebufferHeight,N.framebufferHeight=y?y.height:N.drawingBufferHeight,y!==Z.cur&&(y?M.bindFramebuffer(36160,y.framebuffer):M.bindFramebuffer(36160,null),Z.cur=y),C.dirty&&((eA=L.dither)!==C.dither&&(eA?M.enable(3024):M.disable(3024),C.dither=eA),(ek=L.blend_enable)!==C.blend_enable&&(ek?M.enable(3042):M.disable(3042),C.blend_enable=ek),eW=$[0],eO=$[1],eH=$[2],eB=$[3],(eW!==X[0]||eO!==X[1]||eH!==X[2]||eB!==X[3])&&(M.blendColor(eW,eO,eH,eB),X[0]=eW,X[1]=eO,X[2]=eH,X[3]=eB),eI=U[0],eP=U[1],(eI!==Q[0]||eP!==Q[1])&&(M.blendEquationSeparate(eI,eP),Q[0]=eI,Q[1]=eP),eE=J[0],eT=J[1],eM=J[2],eN=J[3],(eE!==K[0]||eT!==K[1]||eM!==K[2]||eN!==K[3])&&(M.blendFuncSeparate(eE,eT,eM,eN),K[0]=eE,K[1]=eT,K[2]=eM,K[3]=eN),(eL=L.depth_func)!==C.depth_func&&(M.depthFunc(eL),C.depth_func=eL),eC=ee[0],eV=ee[1],(eC!==et[0]||eV!==et[1])&&(M.depthRange(eC,eV),et[0]=eC,et[1]=eV),eD=ei[0],eG=ei[1],eR=ei[2],eq=ei[3],(eD!==er[0]||eG!==er[1]||eR!==er[2]||eq!==er[3])&&(M.colorMask(eD,eG,eR,eq),er[0]=eD,er[1]=eG,er[2]=eR,er[3]=eq),(ej=L.cull_enable)!==C.cull_enable&&(ej?M.enable(2884):M.disable(2884),C.cull_enable=ej),(eZ=L.cull_face)!==C.cull_face&&(M.cullFace(eZ),C.cull_face=eZ),(eY=L.frontFace)!==C.frontFace&&(M.frontFace(eY),C.frontFace=eY),(e$=L.lineWidth)!==C.lineWidth&&(M.lineWidth(e$),C.lineWidth=e$),(eX=L.polygonOffset_enable)!==C.polygonOffset_enable&&(eX?M.enable(32823):M.disable(32823),C.polygonOffset_enable=eX),eU=en[0],eQ=en[1],(eU!==ea[0]||eQ!==ea[1])&&(M.polygonOffset(eU,eQ),ea[0]=eU,ea[1]=eQ),(eJ=L.sample_alpha)!==C.sample_alpha&&(eJ?M.enable(32926):M.disable(32926),C.sample_alpha=eJ),(eK=L.sample_enable)!==C.sample_enable&&(eK?M.enable(32928):M.disable(32928),C.sample_enable=eK),e0=el[0],e2=el[1],(e0!==es[0]||e2!==es[1])&&(M.sampleCoverage(e0,e2),es[0]=e0,es[1]=e2),(e1=L.stencil_enable)!==C.stencil_enable&&(e1?M.enable(2960):M.disable(2960),C.stencil_enable=e1),(e3=L.stencil_mask)!==C.stencil_mask&&(M.stencilMask(e3),C.stencil_mask=e3),e4=eo[0],e6=eo[1],e9=eo[2],(e4!==ef[0]||e6!==ef[1]||e9!==ef[2])&&(M.stencilFunc(e4,e6,e9),ef[0]=e4,ef[1]=e6,ef[2]=e9),e8=ec[0],e5=ec[1],e7=ec[2],te=ec[3],(e8!==ed[0]||e5!==ed[1]||e7!==ed[2]||te!==ed[3])&&(M.stencilOpSeparate(e8,e5,e7,te),ed[0]=e8,ed[1]=e5,ed[2]=e7,ed[3]=te),tt=eu[0],ti=eu[1],tr=eu[2],tn=eu[3],(tt!==eb[0]||ti!==eb[1]||tr!==eb[2]||tn!==eb[3])&&(M.stencilOpSeparate(tt,ti,tr,tn),eb[0]=tt,eb[1]=ti,eb[2]=tr,eb[3]=tn),(ta=L.scissor_enable)!==C.scissor_enable&&(ta?M.enable(3089):M.disable(3089),C.scissor_enable=ta)),z=N.framebufferWidth,F=N.framebufferHeight,A=N.viewportWidth,N.viewportWidth=z,k=N.viewportHeight,N.viewportHeight=F,M.viewport(0,0,z,F),eg[0]=0,eg[1]=0,eg[2]=z,eg[3]=F,r?M.enable(2929):M.disable(2929),C.depth_enable=r,M.depthMask(n),C.depth_mask=n,W=N.framebufferWidth,O=N.framebufferHeight,M.scissor(0,0,W,O),ep[0]=0,ep[1]=0,ep[2]=W,ep[3]=O,(H=C.profile)&&(B=performance.now(),t.count++),M.useProgram(a.program),I=Y.angle_instanced_arrays,q.setVAO(null),(E=R[P=s.location]).buffer||M.enableVertexAttribArray(P),(5126!==E.type||2!==E.size||E.buffer!==l||!1!==E.normalized||0!==E.offset||0!==E.stride)&&(M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(P,2,5126,!1,0,0),E.type=5126,E.size=2,E.buffer=l,E.normalized=!1,E.offset=0,E.stride=0),0!==E.divisor&&(I.vertexAttribDivisorANGLE(P,0),E.divisor=0),T=f.call(this,N,e,0),M.uniform1f(o.location,T),(G=d.call(this,N,e,0))&&"framebuffer"===G._reglType&&(G=G.color[0]),j=G._texture,M.uniform1i(c.location,j.bind()),em=(eh=b.call(this,N,e,0))[0],ev=eh[1],M.uniform2f(u.location,em,ev),ey=p.call(this,N,e,0),M.uniform1f(h.location,ey),ew=g.call(this,N,e,0),M.uniformMatrix3fv(m.location,!1,Array.isArray(ew)||ew instanceof Float32Array?ew:(e_[0]=ew[0],e_[1]=ew[1],e_[2]=ew[2],e_[3]=ew[3],e_[4]=ew[4],e_[5]=ew[5],e_[6]=ew[6],e_[7]=ew[7],e_[8]=ew[8],e_)),(ex=V.elements)?M.bindBuffer(34963,ex.buffer.buffer):q.currentVAO&&(ex=D.getElements(q.currentVAO.elements))&&M.bindBuffer(34963,ex.buffer.buffer),eS=V.offset,(ez=_.call(this,N,e,0))&&((eF=V.instances)>0?ex?I.drawElementsInstancedANGLE(0,ez,ex.type,eS<<(ex.type-5121>>1),eF):I.drawArraysInstancedANGLE(0,eS,ez,eF):eF<0&&(ex?M.drawElements(0,ez,ex.type,eS<<(ex.type-5121>>1)):M.drawArrays(0,eS,ez)),C.dirty=!0,q.setVAO(null),Z.next=w,N.framebufferWidth=x,N.framebufferHeight=S,N.viewportWidth=A,N.viewportHeight=k,H&&(t.cpuTime+=performance.now()-B),j.unbind())},scope:function(e,r,n){var a,s,o,c,u,h,m,E,T,M,D,R,q,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,ep,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB;a=i.call(this,N,e,n),s=Z.getFramebuffer(a),o=Z.next,Z.next=s,c=N.framebufferWidth,N.framebufferWidth=s?s.width:N.drawingBufferWidth,u=N.framebufferHeight,N.framebufferHeight=s?s.height:N.drawingBufferHeight,h=N.framebufferWidth,m=N.framebufferHeight,E=N.viewportWidth,N.viewportWidth=h,T=N.viewportHeight,N.viewportHeight=m,M=em[0],em[0]=v,D=em[1],em[1]=y,R=em[2],em[2]=h,q=em[3],em[3]=m,Y=L.depth_enable,L.depth_enable=w,$=L.depth_mask,L.depth_mask=x,X=N.framebufferWidth,U=N.framebufferHeight,Q=eh[0],eh[0]=S,J=eh[1],eh[1]=z,K=eh[2],eh[2]=X,ee=eh[3],eh[3]=U,(et=C.profile)&&(ei=performance.now(),t.count++),er=_.call(this,N,e,n),en=V.count,V.count=er,ea=V.primitive,V.primitive=F,el=d.call(this,N,e,n),es=j[A],j[A]=el,eo=f.call(this,N,e,n),ef=j[k],j[k]=eo,ec=g.call(this,N,e,n),ed=j[W],j[W]=ec,eu=p.call(this,N,e,n),eb=j[O],j[O]=eu,ep=b.call(this,N,e,n),eg=j[H],j[H]=ep,e_=B.state,B.state=1,ev=B.x,B.x=0,ey=B.y,B.y=0,ew=B.z,B.z=0,ex=B.w,B.w=0,eS=B.buffer,B.buffer=l,ez=B.size,B.size=2,eF=B.normalized,B.normalized=!1,eA=B.type,B.type=5126,ek=B.offset,B.offset=0,eW=B.stride,B.stride=0,eO=B.divisor,B.divisor=0,eH=G.vert,G.vert=I,eB=G.frag,G.frag=P,C.dirty=!0,r(N,e,n),Z.next=o,N.framebufferWidth=c,N.framebufferHeight=u,N.viewportWidth=E,N.viewportHeight=T,em[0]=M,em[1]=D,em[2]=R,em[3]=q,L.depth_enable=Y,L.depth_mask=$,eh[0]=Q,eh[1]=J,eh[2]=K,eh[3]=ee,et&&(t.cpuTime+=performance.now()-ei),V.count=en,V.primitive=ea,j[A]=es,j[k]=ef,j[W]=ed,j[O]=eb,j[H]=eg,B.state=e_,B.x=ev,B.y=ey,B.z=ew,B.w=ex,B.buffer=eS,B.size=ez,B.normalized=eF,B.type=eA,B.offset=ek,B.stride=eW,B.divisor=eO,G.vert=eH,G.frag=eB,C.dirty=!0},batch:function(e,r){var n,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,G,j,eh,em,e_,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to;for(Y.angle_instanced_arrays,n=i.call(this,N,e,0),v=Z.getFramebuffer(n),y=Z.next,Z.next=v,w=N.framebufferWidth,N.framebufferWidth=v?v.width:N.drawingBufferWidth,x=N.framebufferHeight,N.framebufferHeight=v?v.height:N.drawingBufferHeight,v!==Z.cur&&(v?M.bindFramebuffer(36160,v.framebuffer):M.bindFramebuffer(36160,null),Z.cur=v),C.dirty&&((G=L.dither)!==C.dither&&(G?M.enable(3024):M.disable(3024),C.dither=G),(j=L.blend_enable)!==C.blend_enable&&(j?M.enable(3042):M.disable(3042),C.blend_enable=j),eh=$[0],em=$[1],e_=$[2],ey=$[3],(eh!==X[0]||em!==X[1]||e_!==X[2]||ey!==X[3])&&(M.blendColor(eh,em,e_,ey),X[0]=eh,X[1]=em,X[2]=e_,X[3]=ey),ew=U[0],ex=U[1],(ew!==Q[0]||ex!==Q[1])&&(M.blendEquationSeparate(ew,ex),Q[0]=ew,Q[1]=ex),eS=J[0],ez=J[1],eF=J[2],eA=J[3],(eS!==K[0]||ez!==K[1]||eF!==K[2]||eA!==K[3])&&(M.blendFuncSeparate(eS,ez,eF,eA),K[0]=eS,K[1]=ez,K[2]=eF,K[3]=eA),(ek=L.depth_func)!==C.depth_func&&(M.depthFunc(ek),C.depth_func=ek),eW=ee[0],eO=ee[1],(eW!==et[0]||eO!==et[1])&&(M.depthRange(eW,eO),et[0]=eW,et[1]=eO),eH=ei[0],eB=ei[1],eI=ei[2],eP=ei[3],(eH!==er[0]||eB!==er[1]||eI!==er[2]||eP!==er[3])&&(M.colorMask(eH,eB,eI,eP),er[0]=eH,er[1]=eB,er[2]=eI,er[3]=eP),(eE=L.cull_enable)!==C.cull_enable&&(eE?M.enable(2884):M.disable(2884),C.cull_enable=eE),(eT=L.cull_face)!==C.cull_face&&(M.cullFace(eT),C.cull_face=eT),(eM=L.frontFace)!==C.frontFace&&(M.frontFace(eM),C.frontFace=eM),(eN=L.lineWidth)!==C.lineWidth&&(M.lineWidth(eN),C.lineWidth=eN),(eL=L.polygonOffset_enable)!==C.polygonOffset_enable&&(eL?M.enable(32823):M.disable(32823),C.polygonOffset_enable=eL),eC=en[0],eV=en[1],(eC!==ea[0]||eV!==ea[1])&&(M.polygonOffset(eC,eV),ea[0]=eC,ea[1]=eV),(eD=L.sample_alpha)!==C.sample_alpha&&(eD?M.enable(32926):M.disable(32926),C.sample_alpha=eD),(eG=L.sample_enable)!==C.sample_enable&&(eG?M.enable(32928):M.disable(32928),C.sample_enable=eG),eR=el[0],eq=el[1],(eR!==es[0]||eq!==es[1])&&(M.sampleCoverage(eR,eq),es[0]=eR,es[1]=eq),(ej=L.stencil_enable)!==C.stencil_enable&&(ej?M.enable(2960):M.disable(2960),C.stencil_enable=ej),(eZ=L.stencil_mask)!==C.stencil_mask&&(M.stencilMask(eZ),C.stencil_mask=eZ),eY=eo[0],e$=eo[1],eX=eo[2],(eY!==ef[0]||e$!==ef[1]||eX!==ef[2])&&(M.stencilFunc(eY,e$,eX),ef[0]=eY,ef[1]=e$,ef[2]=eX),eU=ec[0],eQ=ec[1],eJ=ec[2],eK=ec[3],(eU!==ed[0]||eQ!==ed[1]||eJ!==ed[2]||eK!==ed[3])&&(M.stencilOpSeparate(eU,eQ,eJ,eK),ed[0]=eU,ed[1]=eQ,ed[2]=eJ,ed[3]=eK),e0=eu[0],e2=eu[1],e1=eu[2],e3=eu[3],(e0!==eb[0]||e2!==eb[1]||e1!==eb[2]||e3!==eb[3])&&(M.stencilOpSeparate(e0,e2,e1,e3),eb[0]=e0,eb[1]=e2,eb[2]=e1,eb[3]=e3),(e4=L.scissor_enable)!==C.scissor_enable&&(e4?M.enable(3089):M.disable(3089),C.scissor_enable=e4)),S=N.framebufferWidth,z=N.framebufferHeight,F=N.viewportWidth,N.viewportWidth=S,A=N.viewportHeight,N.viewportHeight=z,M.viewport(0,0,S,z),eg[0]=0,eg[1]=0,eg[2]=S,eg[3]=z,E?M.enable(2929):M.disable(2929),C.depth_enable=E,M.depthMask(T),C.depth_mask=T,k=N.framebufferWidth,W=N.framebufferHeight,M.scissor(0,0,k,W),ep[0]=0,ep[1]=0,ep[2]=k,ep[3]=W,(O=C.profile)&&(H=performance.now(),t.count+=r),M.useProgram(a.program),B=Y.angle_instanced_arrays,q.setVAO(null),(e9=R[e6=s.location]).buffer||M.enableVertexAttribArray(e6),(5126!==e9.type||2!==e9.size||e9.buffer!==l||!1!==e9.normalized||0!==e9.offset||0!==e9.stride)&&(M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(e6,2,5126,!1,0,0),e9.type=5126,e9.size=2,e9.buffer=l,e9.normalized=!1,e9.offset=0,e9.stride=0),0!==e9.divisor&&(B.vertexAttribDivisorANGLE(e6,0),e9.divisor=0),e8=f.call(this,N,P,I),M.uniform1f(o.location,e8),(e5=d.call(this,N,P,I))&&"framebuffer"===e5._reglType&&(e5=e5.color[0]),e7=e5._texture,M.uniform1i(c.location,e7.bind()),tt=(te=b.call(this,N,P,I))[0],ti=te[1],M.uniform2f(u.location,tt,ti),tr=p.call(this,N,P,I),M.uniform1f(h.location,tr),tn=g.call(this,N,P,I),M.uniformMatrix3fv(m.location,!1,Array.isArray(tn)||tn instanceof Float32Array?tn:(ev[0]=tn[0],ev[1]=tn[1],ev[2]=tn[2],ev[3]=tn[3],ev[4]=tn[4],ev[5]=tn[5],ev[6]=tn[6],ev[7]=tn[7],ev[8]=tn[8],ev)),(ta=V.elements)?M.bindBuffer(34963,ta.buffer.buffer):q.currentVAO&&(ta=D.getElements(q.currentVAO.elements))&&M.bindBuffer(34963,ta.buffer.buffer),tl=V.offset,ts=_.call(this,N,P,I),to=V.instances,I=0;I<r;++I)P=e[I],ts&&(to>0?ta?B.drawElementsInstancedANGLE(0,ts,ta.type,tl<<(ta.type-5121>>1),to):B.drawArraysInstancedANGLE(0,tl,ts,to):to<0&&(ta?M.drawElements(0,ts,ta.type,tl<<(ta.type-5121>>1)):M.drawArrays(0,tl,ts)));e7.unbind(),C.dirty=!0,q.setVAO(null),Z.next=y,N.framebufferWidth=w,N.framebufferHeight=x,N.viewportWidth=F,N.viewportHeight=A,O&&(t.cpuTime+=performance.now()-H)}}},"4fcdeed74044cf60aec3d04b2ef34a1a9339bee96262f7b7dc4f0861dd54a457":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV){var eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tp,tm,tg,t_,tv,ty,tw,tx,tS;return eD=e.gl,eG=e.context,e.strings,eR=e.next,eq=e.current,ej=e.draw,eZ=e.elements,eY=e.buffer,e$=e.shader,eX=e.attributes,eU=e.vao,eQ=e.uniforms,eJ=e.framebuffer,eK=e.extensions,e.timer,e0=e.isBufferArgs,e2=eR.blend_color,e1=eq.blend_color,e3=eR.blend_equation,e4=eq.blend_equation,e6=eR.blend_func,e9=eq.blend_func,e8=eR.depth_range,e5=eq.depth_range,e7=eR.colorMask,te=eq.colorMask,tt=eR.polygonOffset_offset,ti=eq.polygonOffset_offset,tr=eR.sample_coverage,tn=eq.sample_coverage,ta=eR.stencil_func,tl=eq.stencil_func,ts=eR.stencil_opFront,to=eq.stencil_opFront,tf=eR.stencil_opBack,tc=eq.stencil_opBack,td=eR.scissor_box,tu=eq.scissor_box,tb=eR.viewport,th=eq.viewport,tp={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},(tm={}).divisor=0,(tg={}).divisor=1,tg.offset=0,tg.stride=16,(t_={}).divisor=1,t_.offset=8,t_.stride=16,(tv={}).divisor=1,tv.offset=0,tv.stride=16,(ty={}).divisor=1,ty.offset=0,ty.stride=4,(tw={}).divisor=1,tw.offset=0,tw.stride=4,tx=new Float32Array(9),tS=new Float32Array(9),{draw:function(e){var U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,e$,eQ,e3,e6,tS,tz,tF,tA,tk,tW,tO,tH,tB,tI,tP,tE,tT,tM,tN,tL,tC,tV,tD,tG,tR,tq,tj,tZ,tY,t$,tX,tU,tQ,tJ,tK,t0,t2,t1,t3,t4,t6,t9,t8,t5,t7,ie,it,ii,ir,ia,il,is,io,ic,id,iu,ib,ih,ip,im,ig,i_,iv,iy,iw,ix,iS,iz,iF,iA,ik,iW,iO,iH,iB,iI,iP,iE,iT,iM,iN,iL,iC,iV,iD,iG,iR,iq,ij,iZ,iY,i$,iX,iU,iQ,iJ,iK,i0,i2,i1,i3,i4,i6,i9,i8,i5,i7,re,rt,ri,rr,rn,ra,rl,rs,ro,rf,rc,rd,ru,rb,rh;eK.angle_instanced_arrays,(U=eJ.next)!==eJ.cur&&(U?eD.bindFramebuffer(36160,U.framebuffer):eD.bindFramebuffer(36160,null),eJ.cur=U),eq.dirty&&((iM=eR.dither)!==eq.dither&&(iM?eD.enable(3024):eD.disable(3024),eq.dither=iM),iN=e2[0],iL=e2[1],iC=e2[2],iV=e2[3],(iN!==e1[0]||iL!==e1[1]||iC!==e1[2]||iV!==e1[3])&&(eD.blendColor(iN,iL,iC,iV),e1[0]=iN,e1[1]=iL,e1[2]=iC,e1[3]=iV),(iD=eR.depth_func)!==eq.depth_func&&(eD.depthFunc(iD),eq.depth_func=iD),iG=e8[0],iR=e8[1],(iG!==e5[0]||iR!==e5[1])&&(eD.depthRange(iG,iR),e5[0]=iG,e5[1]=iR),iq=e7[0],ij=e7[1],iZ=e7[2],iY=e7[3],(iq!==te[0]||ij!==te[1]||iZ!==te[2]||iY!==te[3])&&(eD.colorMask(iq,ij,iZ,iY),te[0]=iq,te[1]=ij,te[2]=iZ,te[3]=iY),(i$=eR.frontFace)!==eq.frontFace&&(eD.frontFace(i$),eq.frontFace=i$),(iX=eR.lineWidth)!==eq.lineWidth&&(eD.lineWidth(iX),eq.lineWidth=iX),(iU=eR.polygonOffset_enable)!==eq.polygonOffset_enable&&(iU?eD.enable(32823):eD.disable(32823),eq.polygonOffset_enable=iU),iQ=tt[0],iJ=tt[1],(iQ!==ti[0]||iJ!==ti[1])&&(eD.polygonOffset(iQ,iJ),ti[0]=iQ,ti[1]=iJ),(iK=eR.sample_alpha)!==eq.sample_alpha&&(iK?eD.enable(32926):eD.disable(32926),eq.sample_alpha=iK),(i0=eR.sample_enable)!==eq.sample_enable&&(i0?eD.enable(32928):eD.disable(32928),eq.sample_enable=i0),i2=tr[0],i1=tr[1],(i2!==tn[0]||i1!==tn[1])&&(eD.sampleCoverage(i2,i1),tn[0]=i2,tn[1]=i1),(i3=eR.stencil_enable)!==eq.stencil_enable&&(i3?eD.enable(2960):eD.disable(2960),eq.stencil_enable=i3),(i4=eR.stencil_mask)!==eq.stencil_mask&&(eD.stencilMask(i4),eq.stencil_mask=i4),i6=ta[0],i9=ta[1],i8=ta[2],(i6!==tl[0]||i9!==tl[1]||i8!==tl[2])&&(eD.stencilFunc(i6,i9,i8),tl[0]=i6,tl[1]=i9,tl[2]=i8),i5=ts[0],i7=ts[1],re=ts[2],rt=ts[3],(i5!==to[0]||i7!==to[1]||re!==to[2]||rt!==to[3])&&(eD.stencilOpSeparate(i5,i7,re,rt),to[0]=i5,to[1]=i7,to[2]=re,to[3]=rt),ri=tf[0],rr=tf[1],rn=tf[2],ra=tf[3],(ri!==tc[0]||rr!==tc[1]||rn!==tc[2]||ra!==tc[3])&&(eD.stencilOpSeparate(ri,rr,rn,ra),tc[0]=ri,tc[1]=rr,tc[2]=rn,tc[3]=ra),(rl=eR.scissor_enable)!==eq.scissor_enable&&(rl?eD.enable(3089):eD.disable(3089),eq.scissor_enable=rl),rs=td[0],ro=td[1],rf=td[2],rc=td[3],(rs!==tu[0]||ro!==tu[1]||rf!==tu[2]||rc!==tu[3])&&(eD.scissor(rs,ro,rf,rc),tu[0]=rs,tu[1]=ro,tu[2]=rf,tu[3]=rc),rd=tb[0],ru=tb[1],rb=tb[2],rh=tb[3],(rd!==th[0]||ru!==th[1]||rb!==th[2]||rh!==th[3])&&(eD.viewport(rd,ru,rb,rh),th[0]=rd,th[1]=ru,th[2]=rb,th[3]=rh)),i?eD.enable(3042):eD.disable(3042),eq.blend_enable=i,eD.blendEquationSeparate(32774,32774),e4[0]=32774,e4[1]=32774,eD.blendFuncSeparate(770,771,1,771),e9[0]=770,e9[1]=771,e9[2]=1,e9[3]=771,r?eD.enable(2884):eD.disable(2884),eq.cull_enable=r,eD.cullFace(n),eq.cull_face=n,a?eD.enable(2929):eD.disable(2929),eq.depth_enable=a,eD.depthMask(l),eq.depth_mask=l,(Q=eq.profile)&&(J=performance.now(),t.count++),eD.useProgram(s.program),K=eK.angle_instanced_arrays,eU.setVAO(null),tw.buffer=o.call(this,eG,e,0),ee=!1,et=1,ei=0,er=0,en=0,ea=0,el=null,es=0,eo=!1,ef=5126,ec=0,ed=0,eu=0,e0(tw)?(ee=!0,ef=(el=eY.createStream(34962,tw)).dtype):(el=eY.getBuffer(tw))?ef=el.dtype:"constant"in tw?(et=2,"number"==typeof tw.constant?(ei=tw.constant,er=en=ea=0):(ei=tw.constant.length>0?tw.constant[0]:0,er=tw.constant.length>1?tw.constant[1]:0,en=tw.constant.length>2?tw.constant[2]:0,ea=tw.constant.length>3?tw.constant[3]:0)):(el=e0(tw.buffer)?eY.createStream(34962,tw.buffer):eY.getBuffer(tw.buffer),ef="type"in tw?tp[tw.type]:el.dtype,eo=!!tw.normalized,es=0|tw.size,ec=0|tw.offset,ed=0|tw.stride,eu=0|tw.divisor),eh=eX[eb=f.location],1===et?(eh.buffer||eD.enableVertexAttribArray(eb),ep=es||1,(eh.type!==ef||eh.size!==ep||eh.buffer!==el||eh.normalized!==eo||eh.offset!==ec||eh.stride!==ed)&&(eD.bindBuffer(34962,el.buffer),eD.vertexAttribPointer(eb,ep,ef,eo,ed,ec),eh.type=ef,eh.size=ep,eh.buffer=el,eh.normalized=eo,eh.offset=ec,eh.stride=ed),eh.divisor!==eu&&(K.vertexAttribDivisorANGLE(eb,eu),eh.divisor=eu)):(eh.buffer&&(eD.disableVertexAttribArray(eb),eh.buffer=null),(eh.x!==ei||eh.y!==er||eh.z!==en||eh.w!==ea)&&(eD.vertexAttrib4f(eb,ei,er,en,ea),eh.x=ei,eh.y=er,eh.z=en,eh.w=ea)),tv.buffer=c.call(this,eG,e,0),em=!1,eg=1,e_=0,ev=0,ey=0,ew=0,ex=null,eS=0,ez=!1,eF=5126,eA=0,ek=0,eW=0,e0(tv)?(em=!0,eF=(ex=eY.createStream(34962,tv)).dtype):(ex=eY.getBuffer(tv))?eF=ex.dtype:"constant"in tv?(eg=2,"number"==typeof tv.constant?(e_=tv.constant,ev=ey=ew=0):(e_=tv.constant.length>0?tv.constant[0]:0,ev=tv.constant.length>1?tv.constant[1]:0,ey=tv.constant.length>2?tv.constant[2]:0,ew=tv.constant.length>3?tv.constant[3]:0)):(ex=e0(tv.buffer)?eY.createStream(34962,tv.buffer):eY.getBuffer(tv.buffer),eF="type"in tv?tp[tv.type]:ex.dtype,ez=!!tv.normalized,eS=0|tv.size,eA=0|tv.offset,ek=0|tv.stride,eW=0|tv.divisor),eH=eX[eO=d.location],1===eg?(eH.buffer||eD.enableVertexAttribArray(eO),eB=eS||4,(eH.type!==eF||eH.size!==eB||eH.buffer!==ex||eH.normalized!==ez||eH.offset!==eA||eH.stride!==ek)&&(eD.bindBuffer(34962,ex.buffer),eD.vertexAttribPointer(eO,eB,eF,ez,ek,eA),eH.type=eF,eH.size=eB,eH.buffer=ex,eH.normalized=ez,eH.offset=eA,eH.stride=ek),eH.divisor!==eW&&(K.vertexAttribDivisorANGLE(eO,eW),eH.divisor=eW)):(eH.buffer&&(eD.disableVertexAttribArray(eO),eH.buffer=null),(eH.x!==e_||eH.y!==ev||eH.z!==ey||eH.w!==ew)&&(eD.vertexAttrib4f(eO,e_,ev,ey,ew),eH.x=e_,eH.y=ev,eH.z=ey,eH.w=ew)),tg.buffer=u.call(this,eG,e,0),eI=!1,eP=1,eE=0,eT=0,eM=0,eN=0,eL=null,eC=0,eV=!1,e$=5126,eQ=0,e3=0,e6=0,e0(tg)?(eI=!0,e$=(eL=eY.createStream(34962,tg)).dtype):(eL=eY.getBuffer(tg))?e$=eL.dtype:"constant"in tg?(eP=2,"number"==typeof tg.constant?(eE=tg.constant,eT=eM=eN=0):(eE=tg.constant.length>0?tg.constant[0]:0,eT=tg.constant.length>1?tg.constant[1]:0,eM=tg.constant.length>2?tg.constant[2]:0,eN=tg.constant.length>3?tg.constant[3]:0)):(eL=e0(tg.buffer)?eY.createStream(34962,tg.buffer):eY.getBuffer(tg.buffer),e$="type"in tg?tp[tg.type]:eL.dtype,eV=!!tg.normalized,eC=0|tg.size,eQ=0|tg.offset,e3=0|tg.stride,e6=0|tg.divisor),tz=eX[tS=b.location],1===eP?(tz.buffer||eD.enableVertexAttribArray(tS),tF=eC||2,(tz.type!==e$||tz.size!==tF||tz.buffer!==eL||tz.normalized!==eV||tz.offset!==eQ||tz.stride!==e3)&&(eD.bindBuffer(34962,eL.buffer),eD.vertexAttribPointer(tS,tF,e$,eV,e3,eQ),tz.type=e$,tz.size=tF,tz.buffer=eL,tz.normalized=eV,tz.offset=eQ,tz.stride=e3),tz.divisor!==e6&&(K.vertexAttribDivisorANGLE(tS,e6),tz.divisor=e6)):(tz.buffer&&(eD.disableVertexAttribArray(tS),tz.buffer=null),(tz.x!==eE||tz.y!==eT||tz.z!==eM||tz.w!==eN)&&(eD.vertexAttrib4f(tS,eE,eT,eM,eN),tz.x=eE,tz.y=eT,tz.z=eM,tz.w=eN)),t_.buffer=h.call(this,eG,e,0),tA=!1,tk=1,tW=0,tO=0,tH=0,tB=0,tI=null,tP=0,tE=!1,tT=5126,tM=0,tN=0,tL=0,e0(t_)?(tA=!0,tT=(tI=eY.createStream(34962,t_)).dtype):(tI=eY.getBuffer(t_))?tT=tI.dtype:"constant"in t_?(tk=2,"number"==typeof t_.constant?(tW=t_.constant,tO=tH=tB=0):(tW=t_.constant.length>0?t_.constant[0]:0,tO=t_.constant.length>1?t_.constant[1]:0,tH=t_.constant.length>2?t_.constant[2]:0,tB=t_.constant.length>3?t_.constant[3]:0)):(tI=e0(t_.buffer)?eY.createStream(34962,t_.buffer):eY.getBuffer(t_.buffer),tT="type"in t_?tp[t_.type]:tI.dtype,tE=!!t_.normalized,tP=0|t_.size,tM=0|t_.offset,tN=0|t_.stride,tL=0|t_.divisor),tV=eX[tC=p.location],1===tk?(tV.buffer||eD.enableVertexAttribArray(tC),tD=tP||2,(tV.type!==tT||tV.size!==tD||tV.buffer!==tI||tV.normalized!==tE||tV.offset!==tM||tV.stride!==tN)&&(eD.bindBuffer(34962,tI.buffer),eD.vertexAttribPointer(tC,tD,tT,tE,tN,tM),tV.type=tT,tV.size=tD,tV.buffer=tI,tV.normalized=tE,tV.offset=tM,tV.stride=tN),tV.divisor!==tL&&(K.vertexAttribDivisorANGLE(tC,tL),tV.divisor=tL)):(tV.buffer&&(eD.disableVertexAttribArray(tC),tV.buffer=null),(tV.x!==tW||tV.y!==tO||tV.z!==tH||tV.w!==tB)&&(eD.vertexAttrib4f(tC,tW,tO,tH,tB),tV.x=tW,tV.y=tO,tV.z=tH,tV.w=tB)),tm.buffer=m.call(this,eG,e,0),tG=!1,tR=1,tq=0,tj=0,tZ=0,tY=0,t$=null,tX=0,tU=!1,tQ=5126,tJ=0,tK=0,t0=0,e0(tm)?(tG=!0,tQ=(t$=eY.createStream(34962,tm)).dtype):(t$=eY.getBuffer(tm))?tQ=t$.dtype:"constant"in tm?(tR=2,"number"==typeof tm.constant?(tq=tm.constant,tj=tZ=tY=0):(tq=tm.constant.length>0?tm.constant[0]:0,tj=tm.constant.length>1?tm.constant[1]:0,tZ=tm.constant.length>2?tm.constant[2]:0,tY=tm.constant.length>3?tm.constant[3]:0)):(t$=e0(tm.buffer)?eY.createStream(34962,tm.buffer):eY.getBuffer(tm.buffer),tQ="type"in tm?tp[tm.type]:t$.dtype,tU=!!tm.normalized,tX=0|tm.size,tJ=0|tm.offset,tK=0|tm.stride,t0=0|tm.divisor),t1=eX[t2=g.location],1===tR?(t1.buffer||eD.enableVertexAttribArray(t2),t3=tX||2,(t1.type!==tQ||t1.size!==t3||t1.buffer!==t$||t1.normalized!==tU||t1.offset!==tJ||t1.stride!==tK)&&(eD.bindBuffer(34962,t$.buffer),eD.vertexAttribPointer(t2,t3,tQ,tU,tK,tJ),t1.type=tQ,t1.size=t3,t1.buffer=t$,t1.normalized=tU,t1.offset=tJ,t1.stride=tK),t1.divisor!==t0&&(K.vertexAttribDivisorANGLE(t2,t0),t1.divisor=t0)):(t1.buffer&&(eD.disableVertexAttribArray(t2),t1.buffer=null),(t1.x!==tq||t1.y!==tj||t1.z!==tZ||t1.w!==tY)&&(eD.vertexAttrib4f(t2,tq,tj,tZ,tY),t1.x=tq,t1.y=tj,t1.z=tZ,t1.w=tY)),ty.buffer=_.call(this,eG,e,0),t4=!1,t6=1,t9=0,t8=0,t5=0,t7=0,ie=null,it=0,ii=!1,ir=5126,ia=0,il=0,is=0,e0(ty)?(t4=!0,ir=(ie=eY.createStream(34962,ty)).dtype):(ie=eY.getBuffer(ty))?ir=ie.dtype:"constant"in ty?(t6=2,"number"==typeof ty.constant?(t9=ty.constant,t8=t5=t7=0):(t9=ty.constant.length>0?ty.constant[0]:0,t8=ty.constant.length>1?ty.constant[1]:0,t5=ty.constant.length>2?ty.constant[2]:0,t7=ty.constant.length>3?ty.constant[3]:0)):(ie=e0(ty.buffer)?eY.createStream(34962,ty.buffer):eY.getBuffer(ty.buffer),ir="type"in ty?tp[ty.type]:ie.dtype,ii=!!ty.normalized,it=0|ty.size,ia=0|ty.offset,il=0|ty.stride,is=0|ty.divisor),ic=eX[io=v.location],1===t6?(ic.buffer||eD.enableVertexAttribArray(io),id=it||1,(ic.type!==ir||ic.size!==id||ic.buffer!==ie||ic.normalized!==ii||ic.offset!==ia||ic.stride!==il)&&(eD.bindBuffer(34962,ie.buffer),eD.vertexAttribPointer(io,id,ir,ii,il,ia),ic.type=ir,ic.size=id,ic.buffer=ie,ic.normalized=ii,ic.offset=ia,ic.stride=il),ic.divisor!==is&&(K.vertexAttribDivisorANGLE(io,is),ic.divisor=is)):(ic.buffer&&(eD.disableVertexAttribArray(io),ic.buffer=null),(ic.x!==t9||ic.y!==t8||ic.z!==t5||ic.w!==t7)&&(eD.vertexAttrib4f(io,t9,t8,t5,t7),ic.x=t9,ic.y=t8,ic.z=t5,ic.w=t7)),iu=w.call(this,eG,e,0),eD.uniform1f(y.location,iu),ib=S.call(this,eG,e,0),eD.uniform1f(x.location,ib),ih=F.call(this,eG,e,0),eD.uniform1f(z.location,ih),ip=k.call(this,eG,e,0),eD.uniform1f(A.location,ip),im=O.call(this,eG,e,0),eD.uniform1f(W.location,im),i_=(ig=B.call(this,eG,e,0))[0],iv=ig[1],eD.uniform2f(H.location,i_,iv),iy=P.call(this,eG,e,0),eD.uniform1f(I.location,iy),(iw=T.call(this,eG,e,0))&&"framebuffer"===iw._reglType&&(iw=iw.color[0]),ix=iw._texture,eD.uniform1i(E.location,ix.bind()),iS=N.call(this,eG,e,0),eD.uniform1f(M.location,iS),(iz=C.call(this,eG,e,0))&&"framebuffer"===iz._reglType&&(iz=iz.color[0]),iF=iz._texture,eD.uniform1i(L.location,iF.bind()),ik=(iA=D.call(this,eG,e,0))[0],iW=iA[1],eD.uniform2f(V.location,ik,iW),iO=R.call(this,eG,e,0),eD.uniform1f(G.location,iO),iH=j.call(this,eG,e,0),eD.uniformMatrix3fv(q.location,!1,Array.isArray(iH)||iH instanceof Float32Array?iH:(tx[0]=iH[0],tx[1]=iH[1],tx[2]=iH[2],tx[3]=iH[3],tx[4]=iH[4],tx[5]=iH[5],tx[6]=iH[6],tx[7]=iH[7],tx[8]=iH[8],tx)),iB=Y.call(this,eG,e,0),eD.uniform1f(Z.location,iB),(iI=ej.elements)?eD.bindBuffer(34963,iI.buffer.buffer):eU.currentVAO&&(iI=eZ.getElements(eU.currentVAO.elements))&&eD.bindBuffer(34963,iI.buffer.buffer),iP=ej.offset,(iE=$.call(this,eG,e,0))&&((iT=X.call(this,eG,e,0))>0?iI?K.drawElementsInstancedANGLE(5,iE,iI.type,iP<<(iI.type-5121>>1),iT):K.drawArraysInstancedANGLE(5,iP,iE,iT):iT<0&&(iI?eD.drawElements(5,iE,iI.type,iP<<(iI.type-5121>>1)):eD.drawArrays(5,iP,iE)),eq.dirty=!0,eU.setVAO(null),Q&&(t.cpuTime+=performance.now()-J),ee&&eY.destroyStream(el),em&&eY.destroyStream(ex),eI&&eY.destroyStream(eL),tA&&eY.destroyStream(tI),tG&&eY.destroyStream(t$),t4&&eY.destroyStream(ie),ix.unbind(),iF.unbind())},scope:function(e,i,r){var n,a,l,s,f,d,b,p,g,v,y,x,z,A,W,H,I,E,M,L,V,G,q,Z,eM,eN,eL,eC,eV,eD,eZ,eX,eU,eJ,eK,e2,e1,e4,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to,tf,tc,td,tu,tb,th,tx,tS,tz,tF,tA,tk,tW,tO,tH,tB,tI,tP,tE,tT,tM,tN,tL,tC,tV,tD,tG,tR,tq,tj,tZ,tY,t$,tX,tU,tQ,tJ,tK,t0,t2,t1,t3,t4,t6,t9,t8,t5,t7,ie,it,ii,ir,ia,il,is,io,ic,id,iu,ib,ih,ip,im,ig,i_,iv,iy,iw,ix,iS,iz,iF,iA,ik,iW,iO,iH,iB,iI,iP,iE,iT,iM,iN,iL,iC,iV,iD,iG,iR,iq,ij,iZ,iY,i$,iX,iU,iQ,iJ,iK,i0,i2,i1,i3,i4,i6,i9,i8,i5,i7,re,rt,ri,rr,rn,ra,rl,rs,ro,rf,rc,rd,ru,rb,rh,rp,rm,rg,r_,rv,ry,rw,rx,rS,rz,rF,rA,rk,rW,rO,rH,rB,rI,rP,rE,rT,rM,rN,rL,rC,rV,rD,rG;n=eR.blend_enable,eR.blend_enable=U,a=e3[0],e3[0]=Q,l=e3[1],e3[1]=J,s=e6[0],e6[0]=K,f=e6[1],e6[1]=ee,d=e6[2],e6[2]=et,b=e6[3],e6[3]=ei,p=eR.cull_enable,eR.cull_enable=er,g=eR.cull_face,eR.cull_face=en,v=eR.depth_enable,eR.depth_enable=ea,y=eR.depth_mask,eR.depth_mask=el,(x=eq.profile)&&(z=performance.now(),t.count++),A=$.call(this,eG,e,r),W=ej.count,ej.count=A,H=X.call(this,eG,e,r),I=ej.instances,ej.instances=H,E=ej.primitive,ej.primitive=es,M=C.call(this,eG,e,r),L=eQ[eo],eQ[eo]=M,V=T.call(this,eG,e,r),G=eQ[ef],eQ[ef]=V,q=j.call(this,eG,e,r),Z=eQ[ec],eQ[ec]=q,eM=N.call(this,eG,e,r),eN=eQ[ed],eQ[ed]=eM,eL=eu.call(this,eG,e,r),eC=eQ[eb],eQ[eb]=eL,eV=Y.call(this,eG,e,r),eD=eQ[eh],eQ[eh]=eV,eZ=w.call(this,eG,e,r),eX=eQ[ep],eQ[ep]=eZ,eU=R.call(this,eG,e,r),eJ=eQ[em],eQ[em]=eU,eK=D.call(this,eG,e,r),e2=eQ[eg],eQ[eg]=eK,e1=e_.call(this,eG,e,r),e4=eQ[ev],eQ[ev]=e1,e9=B.call(this,eG,e,r),e8=eQ[ey],eQ[ey]=e9,e5=P.call(this,eG,e,r),e7=eQ[ew],eQ[ew]=e5,te=O.call(this,eG,e,r),tt=eQ[ex],eQ[ex]=te,ti=eS.call(this,eG,e,r),tr=eQ[ez],eQ[ez]=ti,tn=k.call(this,eG,e,r),ta=eQ[eF],eQ[eF]=tn,tl=S.call(this,eG,e,r),ts=eQ[eA],eQ[eA]=tl,to=F.call(this,eG,e,r),tf=eQ[ek],eQ[ek]=to,tm.buffer=m.call(this,eG,e,r),tc=!1,td=1,tu=0,tb=0,th=0,tx=0,tS=null,tz=0,tF=!1,tA=5126,tk=0,tW=0,tO=0,e0(tm)?(tc=!0,tA=(tS=eY.createStream(34962,tm)).dtype):(tS=eY.getBuffer(tm))?tA=tS.dtype:"constant"in tm?(td=2,"number"==typeof tm.constant?(tu=tm.constant,tb=th=tx=0):(tu=tm.constant.length>0?tm.constant[0]:0,tb=tm.constant.length>1?tm.constant[1]:0,th=tm.constant.length>2?tm.constant[2]:0,tx=tm.constant.length>3?tm.constant[3]:0)):(tS=e0(tm.buffer)?eY.createStream(34962,tm.buffer):eY.getBuffer(tm.buffer),tA="type"in tm?tp[tm.type]:tS.dtype,tF=!!tm.normalized,tz=0|tm.size,tk=0|tm.offset,tW=0|tm.stride,tO=0|tm.divisor),tH=eW.state,eW.state=td,tB=eW.x,eW.x=tu,tI=eW.y,eW.y=tb,tP=eW.z,eW.z=th,tE=eW.w,eW.w=tx,tT=eW.buffer,eW.buffer=tS,tM=eW.size,eW.size=tz,tN=eW.normalized,eW.normalized=tF,tL=eW.type,eW.type=tA,tC=eW.offset,eW.offset=tk,tV=eW.stride,eW.stride=tW,tD=eW.divisor,eW.divisor=tO,tg.buffer=u.call(this,eG,e,r),tG=!1,tR=1,tq=0,tj=0,tZ=0,tY=0,t$=null,tX=0,tU=!1,tQ=5126,tJ=0,tK=0,t0=0,e0(tg)?(tG=!0,tQ=(t$=eY.createStream(34962,tg)).dtype):(t$=eY.getBuffer(tg))?tQ=t$.dtype:"constant"in tg?(tR=2,"number"==typeof tg.constant?(tq=tg.constant,tj=tZ=tY=0):(tq=tg.constant.length>0?tg.constant[0]:0,tj=tg.constant.length>1?tg.constant[1]:0,tZ=tg.constant.length>2?tg.constant[2]:0,tY=tg.constant.length>3?tg.constant[3]:0)):(t$=e0(tg.buffer)?eY.createStream(34962,tg.buffer):eY.getBuffer(tg.buffer),tQ="type"in tg?tp[tg.type]:t$.dtype,tU=!!tg.normalized,tX=0|tg.size,tJ=0|tg.offset,tK=0|tg.stride,t0=0|tg.divisor),t2=eO.state,eO.state=tR,t1=eO.x,eO.x=tq,t3=eO.y,eO.y=tj,t4=eO.z,eO.z=tZ,t6=eO.w,eO.w=tY,t9=eO.buffer,eO.buffer=t$,t8=eO.size,eO.size=tX,t5=eO.normalized,eO.normalized=tU,t7=eO.type,eO.type=tQ,ie=eO.offset,eO.offset=tJ,it=eO.stride,eO.stride=tK,ii=eO.divisor,eO.divisor=t0,t_.buffer=h.call(this,eG,e,r),ir=!1,ia=1,il=0,is=0,io=0,ic=0,id=null,iu=0,ib=!1,ih=5126,ip=0,im=0,ig=0,e0(t_)?(ir=!0,ih=(id=eY.createStream(34962,t_)).dtype):(id=eY.getBuffer(t_))?ih=id.dtype:"constant"in t_?(ia=2,"number"==typeof t_.constant?(il=t_.constant,is=io=ic=0):(il=t_.constant.length>0?t_.constant[0]:0,is=t_.constant.length>1?t_.constant[1]:0,io=t_.constant.length>2?t_.constant[2]:0,ic=t_.constant.length>3?t_.constant[3]:0)):(id=e0(t_.buffer)?eY.createStream(34962,t_.buffer):eY.getBuffer(t_.buffer),ih="type"in t_?tp[t_.type]:id.dtype,ib=!!t_.normalized,iu=0|t_.size,ip=0|t_.offset,im=0|t_.stride,ig=0|t_.divisor),i_=eH.state,eH.state=ia,iv=eH.x,eH.x=il,iy=eH.y,eH.y=is,iw=eH.z,eH.z=io,ix=eH.w,eH.w=ic,iS=eH.buffer,eH.buffer=id,iz=eH.size,eH.size=iu,iF=eH.normalized,eH.normalized=ib,iA=eH.type,eH.type=ih,ik=eH.offset,eH.offset=ip,iW=eH.stride,eH.stride=im,iO=eH.divisor,eH.divisor=ig,tv.buffer=c.call(this,eG,e,r),iH=!1,iB=1,iI=0,iP=0,iE=0,iT=0,iM=null,iN=0,iL=!1,iC=5126,iV=0,iD=0,iG=0,e0(tv)?(iH=!0,iC=(iM=eY.createStream(34962,tv)).dtype):(iM=eY.getBuffer(tv))?iC=iM.dtype:"constant"in tv?(iB=2,"number"==typeof tv.constant?(iI=tv.constant,iP=iE=iT=0):(iI=tv.constant.length>0?tv.constant[0]:0,iP=tv.constant.length>1?tv.constant[1]:0,iE=tv.constant.length>2?tv.constant[2]:0,iT=tv.constant.length>3?tv.constant[3]:0)):(iM=e0(tv.buffer)?eY.createStream(34962,tv.buffer):eY.getBuffer(tv.buffer),iC="type"in tv?tp[tv.type]:iM.dtype,iL=!!tv.normalized,iN=0|tv.size,iV=0|tv.offset,iD=0|tv.stride,iG=0|tv.divisor),iR=eB.state,eB.state=iB,iq=eB.x,eB.x=iI,ij=eB.y,eB.y=iP,iZ=eB.z,eB.z=iE,iY=eB.w,eB.w=iT,i$=eB.buffer,eB.buffer=iM,iX=eB.size,eB.size=iN,iU=eB.normalized,eB.normalized=iL,iQ=eB.type,eB.type=iC,iJ=eB.offset,eB.offset=iV,iK=eB.stride,eB.stride=iD,i0=eB.divisor,eB.divisor=iG,ty.buffer=_.call(this,eG,e,r),i2=!1,i1=1,i3=0,i4=0,i6=0,i9=0,i8=null,i5=0,i7=!1,re=5126,rt=0,ri=0,rr=0,e0(ty)?(i2=!0,re=(i8=eY.createStream(34962,ty)).dtype):(i8=eY.getBuffer(ty))?re=i8.dtype:"constant"in ty?(i1=2,"number"==typeof ty.constant?(i3=ty.constant,i4=i6=i9=0):(i3=ty.constant.length>0?ty.constant[0]:0,i4=ty.constant.length>1?ty.constant[1]:0,i6=ty.constant.length>2?ty.constant[2]:0,i9=ty.constant.length>3?ty.constant[3]:0)):(i8=e0(ty.buffer)?eY.createStream(34962,ty.buffer):eY.getBuffer(ty.buffer),re="type"in ty?tp[ty.type]:i8.dtype,i7=!!ty.normalized,i5=0|ty.size,rt=0|ty.offset,ri=0|ty.stride,rr=0|ty.divisor),rn=eI.state,eI.state=i1,ra=eI.x,eI.x=i3,rl=eI.y,eI.y=i4,rs=eI.z,eI.z=i6,ro=eI.w,eI.w=i9,rf=eI.buffer,eI.buffer=i8,rc=eI.size,eI.size=i5,rd=eI.normalized,eI.normalized=i7,ru=eI.type,eI.type=re,rb=eI.offset,eI.offset=rt,rh=eI.stride,eI.stride=ri,rp=eI.divisor,eI.divisor=rr,tw.buffer=o.call(this,eG,e,r),rm=!1,rg=1,r_=0,rv=0,ry=0,rw=0,rx=null,rS=0,rz=!1,rF=5126,rA=0,rk=0,rW=0,e0(tw)?(rm=!0,rF=(rx=eY.createStream(34962,tw)).dtype):(rx=eY.getBuffer(tw))?rF=rx.dtype:"constant"in tw?(rg=2,"number"==typeof tw.constant?(r_=tw.constant,rv=ry=rw=0):(r_=tw.constant.length>0?tw.constant[0]:0,rv=tw.constant.length>1?tw.constant[1]:0,ry=tw.constant.length>2?tw.constant[2]:0,rw=tw.constant.length>3?tw.constant[3]:0)):(rx=e0(tw.buffer)?eY.createStream(34962,tw.buffer):eY.getBuffer(tw.buffer),rF="type"in tw?tp[tw.type]:rx.dtype,rz=!!tw.normalized,rS=0|tw.size,rA=0|tw.offset,rk=0|tw.stride,rW=0|tw.divisor),rO=eP.state,eP.state=rg,rH=eP.x,eP.x=r_,rB=eP.y,eP.y=rv,rI=eP.z,eP.z=ry,rP=eP.w,eP.w=rw,rE=eP.buffer,eP.buffer=rx,rT=eP.size,eP.size=rS,rM=eP.normalized,eP.normalized=rz,rN=eP.type,eP.type=rF,rL=eP.offset,eP.offset=rA,rC=eP.stride,eP.stride=rk,rV=eP.divisor,eP.divisor=rW,rD=e$.vert,e$.vert=eE,rG=e$.frag,e$.frag=eT,eq.dirty=!0,i(eG,e,r),eR.blend_enable=n,e3[0]=a,e3[1]=l,e6[0]=s,e6[1]=f,e6[2]=d,e6[3]=b,eR.cull_enable=p,eR.cull_face=g,eR.depth_enable=v,eR.depth_mask=y,x&&(t.cpuTime+=performance.now()-z),ej.count=W,ej.instances=I,ej.primitive=E,eQ[eo]=L,eQ[ef]=G,eQ[ec]=Z,eQ[ed]=eN,eQ[eb]=eC,eQ[eh]=eD,eQ[ep]=eX,eQ[em]=eJ,eQ[eg]=e2,eQ[ev]=e4,eQ[ey]=e8,eQ[ew]=e7,eQ[ex]=tt,eQ[ez]=tr,eQ[eF]=ta,eQ[eA]=ts,eQ[ek]=tf,tc&&eY.destroyStream(tS),eW.state=tH,eW.x=tB,eW.y=tI,eW.z=tP,eW.w=tE,eW.buffer=tT,eW.size=tM,eW.normalized=tN,eW.type=tL,eW.offset=tC,eW.stride=tV,eW.divisor=tD,tG&&eY.destroyStream(t$),eO.state=t2,eO.x=t1,eO.y=t3,eO.z=t4,eO.w=t6,eO.buffer=t9,eO.size=t8,eO.normalized=t5,eO.type=t7,eO.offset=ie,eO.stride=it,eO.divisor=ii,ir&&eY.destroyStream(id),eH.state=i_,eH.x=iv,eH.y=iy,eH.z=iw,eH.w=ix,eH.buffer=iS,eH.size=iz,eH.normalized=iF,eH.type=iA,eH.offset=ik,eH.stride=iW,eH.divisor=iO,iH&&eY.destroyStream(iM),eB.state=iR,eB.x=iq,eB.y=ij,eB.z=iZ,eB.w=iY,eB.buffer=i$,eB.size=iX,eB.normalized=iU,eB.type=iQ,eB.offset=iJ,eB.stride=iK,eB.divisor=i0,i2&&eY.destroyStream(i8),eI.state=rn,eI.x=ra,eI.y=rl,eI.z=rs,eI.w=ro,eI.buffer=rf,eI.size=rc,eI.normalized=rd,eI.type=ru,eI.offset=rb,eI.stride=rh,eI.divisor=rp,rm&&eY.destroyStream(rx),eP.state=rO,eP.x=rH,eP.y=rB,eP.z=rI,eP.w=rP,eP.buffer=rE,eP.size=rT,eP.normalized=rM,eP.type=rN,eP.offset=rL,eP.stride=rC,eP.divisor=rV,e$.vert=rD,e$.frag=rG,eq.dirty=!0},batch:function(e,i){var r,n,a,l,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,e$,eQ,e3,e6,tx,tz,tF,tA,tk,tW,tO,tH,tB,tI,tP,tE,tT,tM,tN,tL,tC,tV,tD,tG,tR,tq,tj,tZ,tY,t$,tX,tU,tQ,tJ,tK,t0,t2,t1,t3,t4,t6,t9,t8,t5,t7,ie,it,ii,ir,ia,il,is,io,ic,id,iu,ib,ih,ip,im,ig,i_,iv,iy,iw,ix,iS,iz,iF,iA,ik,iW,iO,iH,iB,iI,iP,iE,iT,iM,iN,iL,iC,iV,iD,iG,iR,iq,ij,iZ,iY,i$,iX,iU,iQ,iJ,iK,i0,i2,i1,i3,i4,i6,i9,i8,i5,i7,re,rt,ri,rr,rn,ra,rl,rs,ro,rf,rc,rd,ru,rb,rh,rp,rm,rg;for(eK.angle_instanced_arrays,(r=eJ.next)!==eJ.cur&&(r?eD.bindFramebuffer(36160,r.framebuffer):eD.bindFramebuffer(36160,null),eJ.cur=r),eq.dirty&&((J=eR.dither)!==eq.dither&&(J?eD.enable(3024):eD.disable(3024),eq.dither=J),K=e2[0],ee=e2[1],et=e2[2],ei=e2[3],(K!==e1[0]||ee!==e1[1]||et!==e1[2]||ei!==e1[3])&&(eD.blendColor(K,ee,et,ei),e1[0]=K,e1[1]=ee,e1[2]=et,e1[3]=ei),(er=eR.depth_func)!==eq.depth_func&&(eD.depthFunc(er),eq.depth_func=er),en=e8[0],ea=e8[1],(en!==e5[0]||ea!==e5[1])&&(eD.depthRange(en,ea),e5[0]=en,e5[1]=ea),el=e7[0],es=e7[1],eo=e7[2],ef=e7[3],(el!==te[0]||es!==te[1]||eo!==te[2]||ef!==te[3])&&(eD.colorMask(el,es,eo,ef),te[0]=el,te[1]=es,te[2]=eo,te[3]=ef),(ec=eR.frontFace)!==eq.frontFace&&(eD.frontFace(ec),eq.frontFace=ec),(ed=eR.lineWidth)!==eq.lineWidth&&(eD.lineWidth(ed),eq.lineWidth=ed),(eu=eR.polygonOffset_enable)!==eq.polygonOffset_enable&&(eu?eD.enable(32823):eD.disable(32823),eq.polygonOffset_enable=eu),eb=tt[0],eh=tt[1],(eb!==ti[0]||eh!==ti[1])&&(eD.polygonOffset(eb,eh),ti[0]=eb,ti[1]=eh),(ep=eR.sample_alpha)!==eq.sample_alpha&&(ep?eD.enable(32926):eD.disable(32926),eq.sample_alpha=ep),(em=eR.sample_enable)!==eq.sample_enable&&(em?eD.enable(32928):eD.disable(32928),eq.sample_enable=em),eg=tr[0],e_=tr[1],(eg!==tn[0]||e_!==tn[1])&&(eD.sampleCoverage(eg,e_),tn[0]=eg,tn[1]=e_),(ev=eR.stencil_enable)!==eq.stencil_enable&&(ev?eD.enable(2960):eD.disable(2960),eq.stencil_enable=ev),(ey=eR.stencil_mask)!==eq.stencil_mask&&(eD.stencilMask(ey),eq.stencil_mask=ey),ew=ta[0],ex=ta[1],eS=ta[2],(ew!==tl[0]||ex!==tl[1]||eS!==tl[2])&&(eD.stencilFunc(ew,ex,eS),tl[0]=ew,tl[1]=ex,tl[2]=eS),ez=ts[0],eF=ts[1],eA=ts[2],ek=ts[3],(ez!==to[0]||eF!==to[1]||eA!==to[2]||ek!==to[3])&&(eD.stencilOpSeparate(ez,eF,eA,ek),to[0]=ez,to[1]=eF,to[2]=eA,to[3]=ek),eW=tf[0],eO=tf[1],eH=tf[2],eB=tf[3],(eW!==tc[0]||eO!==tc[1]||eH!==tc[2]||eB!==tc[3])&&(eD.stencilOpSeparate(eW,eO,eH,eB),tc[0]=eW,tc[1]=eO,tc[2]=eH,tc[3]=eB),(eI=eR.scissor_enable)!==eq.scissor_enable&&(eI?eD.enable(3089):eD.disable(3089),eq.scissor_enable=eI),eP=td[0],eE=td[1],eT=td[2],e$=td[3],(eP!==tu[0]||eE!==tu[1]||eT!==tu[2]||e$!==tu[3])&&(eD.scissor(eP,eE,eT,e$),tu[0]=eP,tu[1]=eE,tu[2]=eT,tu[3]=e$),eQ=tb[0],e3=tb[1],e6=tb[2],tx=tb[3],(eQ!==th[0]||e3!==th[1]||e6!==th[2]||tx!==th[3])&&(eD.viewport(eQ,e3,e6,tx),th[0]=eQ,th[1]=e3,th[2]=e6,th[3]=tx)),eM?eD.enable(3042):eD.disable(3042),eq.blend_enable=eM,eD.blendEquationSeparate(32774,32774),e4[0]=32774,e4[1]=32774,eD.blendFuncSeparate(770,771,1,771),e9[0]=770,e9[1]=771,e9[2]=1,e9[3]=771,eN?eD.enable(2884):eD.disable(2884),eq.cull_enable=eN,eD.cullFace(eL),eq.cull_face=eL,eC?eD.enable(2929):eD.disable(2929),eq.depth_enable=eC,eD.depthMask(eV),eq.depth_mask=eV,(n=eq.profile)&&(a=performance.now(),t.count+=i),eD.useProgram(s.program),l=eK.angle_instanced_arrays,eU.setVAO(null),tw.buffer=o.call(this,eG,Q,U),tz=!1,tF=1,tA=0,tk=0,tW=0,tO=0,tH=null,tB=0,tI=!1,tP=5126,tE=0,tT=0,tM=0,e0(tw)?(tz=!0,tP=(tH=eY.createStream(34962,tw)).dtype):(tH=eY.getBuffer(tw))?tP=tH.dtype:("constant"in tw)?(tF=2,"number"==typeof tw.constant?(tA=tw.constant,tk=tW=tO=0):(tA=tw.constant.length>0?tw.constant[0]:0,tk=tw.constant.length>1?tw.constant[1]:0,tW=tw.constant.length>2?tw.constant[2]:0,tO=tw.constant.length>3?tw.constant[3]:0)):(tH=e0(tw.buffer)?eY.createStream(34962,tw.buffer):eY.getBuffer(tw.buffer),tP=("type"in tw)?tp[tw.type]:tH.dtype,tI=!!tw.normalized,tB=0|tw.size,tE=0|tw.offset,tT=0|tw.stride,tM=0|tw.divisor),tL=eX[tN=f.location],1===tF?(tL.buffer||eD.enableVertexAttribArray(tN),tC=tB||1,(tL.type!==tP||tL.size!==tC||tL.buffer!==tH||tL.normalized!==tI||tL.offset!==tE||tL.stride!==tT)&&(eD.bindBuffer(34962,tH.buffer),eD.vertexAttribPointer(tN,tC,tP,tI,tT,tE),tL.type=tP,tL.size=tC,tL.buffer=tH,tL.normalized=tI,tL.offset=tE,tL.stride=tT),tL.divisor!==tM&&(l.vertexAttribDivisorANGLE(tN,tM),tL.divisor=tM)):(tL.buffer&&(eD.disableVertexAttribArray(tN),tL.buffer=null),(tL.x!==tA||tL.y!==tk||tL.z!==tW||tL.w!==tO)&&(eD.vertexAttrib4f(tN,tA,tk,tW,tO),tL.x=tA,tL.y=tk,tL.z=tW,tL.w=tO)),tv.buffer=c.call(this,eG,Q,U),tV=!1,tD=1,tG=0,tR=0,tq=0,tj=0,tZ=null,tY=0,t$=!1,tX=5126,tU=0,tQ=0,tJ=0,e0(tv)?(tV=!0,tX=(tZ=eY.createStream(34962,tv)).dtype):(tZ=eY.getBuffer(tv))?tX=tZ.dtype:("constant"in tv)?(tD=2,"number"==typeof tv.constant?(tG=tv.constant,tR=tq=tj=0):(tG=tv.constant.length>0?tv.constant[0]:0,tR=tv.constant.length>1?tv.constant[1]:0,tq=tv.constant.length>2?tv.constant[2]:0,tj=tv.constant.length>3?tv.constant[3]:0)):(tZ=e0(tv.buffer)?eY.createStream(34962,tv.buffer):eY.getBuffer(tv.buffer),tX=("type"in tv)?tp[tv.type]:tZ.dtype,t$=!!tv.normalized,tY=0|tv.size,tU=0|tv.offset,tQ=0|tv.stride,tJ=0|tv.divisor),t0=eX[tK=d.location],1===tD?(t0.buffer||eD.enableVertexAttribArray(tK),t2=tY||4,(t0.type!==tX||t0.size!==t2||t0.buffer!==tZ||t0.normalized!==t$||t0.offset!==tU||t0.stride!==tQ)&&(eD.bindBuffer(34962,tZ.buffer),eD.vertexAttribPointer(tK,t2,tX,t$,tQ,tU),t0.type=tX,t0.size=t2,t0.buffer=tZ,t0.normalized=t$,t0.offset=tU,t0.stride=tQ),t0.divisor!==tJ&&(l.vertexAttribDivisorANGLE(tK,tJ),t0.divisor=tJ)):(t0.buffer&&(eD.disableVertexAttribArray(tK),t0.buffer=null),(t0.x!==tG||t0.y!==tR||t0.z!==tq||t0.w!==tj)&&(eD.vertexAttrib4f(tK,tG,tR,tq,tj),t0.x=tG,t0.y=tR,t0.z=tq,t0.w=tj)),tg.buffer=u.call(this,eG,Q,U),t1=!1,t3=1,t4=0,t6=0,t9=0,t8=0,t5=null,t7=0,ie=!1,it=5126,ii=0,ir=0,ia=0,e0(tg)?(t1=!0,it=(t5=eY.createStream(34962,tg)).dtype):(t5=eY.getBuffer(tg))?it=t5.dtype:("constant"in tg)?(t3=2,"number"==typeof tg.constant?(t4=tg.constant,t6=t9=t8=0):(t4=tg.constant.length>0?tg.constant[0]:0,t6=tg.constant.length>1?tg.constant[1]:0,t9=tg.constant.length>2?tg.constant[2]:0,t8=tg.constant.length>3?tg.constant[3]:0)):(t5=e0(tg.buffer)?eY.createStream(34962,tg.buffer):eY.getBuffer(tg.buffer),it=("type"in tg)?tp[tg.type]:t5.dtype,ie=!!tg.normalized,t7=0|tg.size,ii=0|tg.offset,ir=0|tg.stride,ia=0|tg.divisor),is=eX[il=b.location],1===t3?(is.buffer||eD.enableVertexAttribArray(il),io=t7||2,(is.type!==it||is.size!==io||is.buffer!==t5||is.normalized!==ie||is.offset!==ii||is.stride!==ir)&&(eD.bindBuffer(34962,t5.buffer),eD.vertexAttribPointer(il,io,it,ie,ir,ii),is.type=it,is.size=io,is.buffer=t5,is.normalized=ie,is.offset=ii,is.stride=ir),is.divisor!==ia&&(l.vertexAttribDivisorANGLE(il,ia),is.divisor=ia)):(is.buffer&&(eD.disableVertexAttribArray(il),is.buffer=null),(is.x!==t4||is.y!==t6||is.z!==t9||is.w!==t8)&&(eD.vertexAttrib4f(il,t4,t6,t9,t8),is.x=t4,is.y=t6,is.z=t9,is.w=t8)),t_.buffer=h.call(this,eG,Q,U),ic=!1,id=1,iu=0,ib=0,ih=0,ip=0,im=null,ig=0,i_=!1,iv=5126,iy=0,iw=0,ix=0,e0(t_)?(ic=!0,iv=(im=eY.createStream(34962,t_)).dtype):(im=eY.getBuffer(t_))?iv=im.dtype:("constant"in t_)?(id=2,"number"==typeof t_.constant?(iu=t_.constant,ib=ih=ip=0):(iu=t_.constant.length>0?t_.constant[0]:0,ib=t_.constant.length>1?t_.constant[1]:0,ih=t_.constant.length>2?t_.constant[2]:0,ip=t_.constant.length>3?t_.constant[3]:0)):(im=e0(t_.buffer)?eY.createStream(34962,t_.buffer):eY.getBuffer(t_.buffer),iv=("type"in t_)?tp[t_.type]:im.dtype,i_=!!t_.normalized,ig=0|t_.size,iy=0|t_.offset,iw=0|t_.stride,ix=0|t_.divisor),iz=eX[iS=p.location],1===id?(iz.buffer||eD.enableVertexAttribArray(iS),iF=ig||2,(iz.type!==iv||iz.size!==iF||iz.buffer!==im||iz.normalized!==i_||iz.offset!==iy||iz.stride!==iw)&&(eD.bindBuffer(34962,im.buffer),eD.vertexAttribPointer(iS,iF,iv,i_,iw,iy),iz.type=iv,iz.size=iF,iz.buffer=im,iz.normalized=i_,iz.offset=iy,iz.stride=iw),iz.divisor!==ix&&(l.vertexAttribDivisorANGLE(iS,ix),iz.divisor=ix)):(iz.buffer&&(eD.disableVertexAttribArray(iS),iz.buffer=null),(iz.x!==iu||iz.y!==ib||iz.z!==ih||iz.w!==ip)&&(eD.vertexAttrib4f(iS,iu,ib,ih,ip),iz.x=iu,iz.y=ib,iz.z=ih,iz.w=ip)),tm.buffer=m.call(this,eG,Q,U),iA=!1,ik=1,iW=0,iO=0,iH=0,iB=0,iI=null,iP=0,iE=!1,iT=5126,iM=0,iN=0,iL=0,e0(tm)?(iA=!0,iT=(iI=eY.createStream(34962,tm)).dtype):(iI=eY.getBuffer(tm))?iT=iI.dtype:("constant"in tm)?(ik=2,"number"==typeof tm.constant?(iW=tm.constant,iO=iH=iB=0):(iW=tm.constant.length>0?tm.constant[0]:0,iO=tm.constant.length>1?tm.constant[1]:0,iH=tm.constant.length>2?tm.constant[2]:0,iB=tm.constant.length>3?tm.constant[3]:0)):(iI=e0(tm.buffer)?eY.createStream(34962,tm.buffer):eY.getBuffer(tm.buffer),iT=("type"in tm)?tp[tm.type]:iI.dtype,iE=!!tm.normalized,iP=0|tm.size,iM=0|tm.offset,iN=0|tm.stride,iL=0|tm.divisor),iV=eX[iC=g.location],1===ik?(iV.buffer||eD.enableVertexAttribArray(iC),iD=iP||2,(iV.type!==iT||iV.size!==iD||iV.buffer!==iI||iV.normalized!==iE||iV.offset!==iM||iV.stride!==iN)&&(eD.bindBuffer(34962,iI.buffer),eD.vertexAttribPointer(iC,iD,iT,iE,iN,iM),iV.type=iT,iV.size=iD,iV.buffer=iI,iV.normalized=iE,iV.offset=iM,iV.stride=iN),iV.divisor!==iL&&(l.vertexAttribDivisorANGLE(iC,iL),iV.divisor=iL)):(iV.buffer&&(eD.disableVertexAttribArray(iC),iV.buffer=null),(iV.x!==iW||iV.y!==iO||iV.z!==iH||iV.w!==iB)&&(eD.vertexAttrib4f(iC,iW,iO,iH,iB),iV.x=iW,iV.y=iO,iV.z=iH,iV.w=iB)),ty.buffer=_.call(this,eG,Q,U),iG=!1,iR=1,iq=0,ij=0,iZ=0,iY=0,i$=null,iX=0,iU=!1,iQ=5126,iJ=0,iK=0,i0=0,e0(ty)?(iG=!0,iQ=(i$=eY.createStream(34962,ty)).dtype):(i$=eY.getBuffer(ty))?iQ=i$.dtype:("constant"in ty)?(iR=2,"number"==typeof ty.constant?(iq=ty.constant,ij=iZ=iY=0):(iq=ty.constant.length>0?ty.constant[0]:0,ij=ty.constant.length>1?ty.constant[1]:0,iZ=ty.constant.length>2?ty.constant[2]:0,iY=ty.constant.length>3?ty.constant[3]:0)):(i$=e0(ty.buffer)?eY.createStream(34962,ty.buffer):eY.getBuffer(ty.buffer),iQ=("type"in ty)?tp[ty.type]:i$.dtype,iU=!!ty.normalized,iX=0|ty.size,iJ=0|ty.offset,iK=0|ty.stride,i0=0|ty.divisor),i1=eX[i2=v.location],1===iR?(i1.buffer||eD.enableVertexAttribArray(i2),i3=iX||1,(i1.type!==iQ||i1.size!==i3||i1.buffer!==i$||i1.normalized!==iU||i1.offset!==iJ||i1.stride!==iK)&&(eD.bindBuffer(34962,i$.buffer),eD.vertexAttribPointer(i2,i3,iQ,iU,iK,iJ),i1.type=iQ,i1.size=i3,i1.buffer=i$,i1.normalized=iU,i1.offset=iJ,i1.stride=iK),i1.divisor!==i0&&(l.vertexAttribDivisorANGLE(i2,i0),i1.divisor=i0)):(i1.buffer&&(eD.disableVertexAttribArray(i2),i1.buffer=null),(i1.x!==iq||i1.y!==ij||i1.z!==iZ||i1.w!==iY)&&(eD.vertexAttrib4f(i2,iq,ij,iZ,iY),i1.x=iq,i1.y=ij,i1.z=iZ,i1.w=iY)),i4=w.call(this,eG,Q,U),eD.uniform1f(y.location,i4),i6=S.call(this,eG,Q,U),eD.uniform1f(x.location,i6),i9=F.call(this,eG,Q,U),eD.uniform1f(z.location,i9),i8=k.call(this,eG,Q,U),eD.uniform1f(A.location,i8),i5=O.call(this,eG,Q,U),eD.uniform1f(W.location,i5),re=(i7=B.call(this,eG,Q,U))[0],rt=i7[1],eD.uniform2f(H.location,re,rt),ri=P.call(this,eG,Q,U),eD.uniform1f(I.location,ri),(rr=T.call(this,eG,Q,U))&&"framebuffer"===rr._reglType&&(rr=rr.color[0]),rn=rr._texture,eD.uniform1i(E.location,rn.bind()),ra=N.call(this,eG,Q,U),eD.uniform1f(M.location,ra),(rl=C.call(this,eG,Q,U))&&"framebuffer"===rl._reglType&&(rl=rl.color[0]),rs=rl._texture,eD.uniform1i(L.location,rs.bind()),rf=(ro=D.call(this,eG,Q,U))[0],rc=ro[1],eD.uniform2f(V.location,rf,rc),rd=R.call(this,eG,Q,U),eD.uniform1f(G.location,rd),ru=j.call(this,eG,Q,U),eD.uniformMatrix3fv(q.location,!1,Array.isArray(ru)||ru instanceof Float32Array?ru:(tS[0]=ru[0],tS[1]=ru[1],tS[2]=ru[2],tS[3]=ru[3],tS[4]=ru[4],tS[5]=ru[5],tS[6]=ru[6],tS[7]=ru[7],tS[8]=ru[8],tS)),rb=Y.call(this,eG,Q,U),eD.uniform1f(Z.location,rb),(rh=ej.elements)?eD.bindBuffer(34963,rh.buffer.buffer):eU.currentVAO&&(rh=eZ.getElements(eU.currentVAO.elements))&&eD.bindBuffer(34963,rh.buffer.buffer),rp=ej.offset,rm=$.call(this,eG,Q,U),rg=X.call(this,eG,Q,U),U=0;U<i;++U)Q=e[U],rm&&(rg>0?rh?l.drawElementsInstancedANGLE(5,rm,rh.type,rp<<(rh.type-5121>>1),rg):l.drawArraysInstancedANGLE(5,rp,rm,rg):rg<0&&(rh?eD.drawElements(5,rm,rh.type,rp<<(rh.type-5121>>1)):eD.drawArrays(5,rp,rm)));tz&&eY.destroyStream(tH),tV&&eY.destroyStream(tZ),t1&&eY.destroyStream(t5),ic&&eY.destroyStream(im),iA&&eY.destroyStream(iI),iG&&eY.destroyStream(i$),rn.unbind(),rs.unbind(),eq.dirty=!0,eU.setVAO(null),n&&(t.cpuTime+=performance.now()-a)}}},"2f7c7f7dc19b56c5cba8adc85f521391fae94c0383e508841812535aea6244ef":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A){var k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo;return k=e.gl,W=e.context,e.strings,O=e.next,H=e.current,B=e.draw,I=e.elements,e.buffer,P=e.shader,E=e.attributes,T=e.vao,M=e.uniforms,N=e.framebuffer,L=e.extensions,e.timer,e.isBufferArgs,C=O.blend_color,V=H.blend_color,D=O.blend_equation,G=H.blend_equation,R=O.blend_func,q=H.blend_func,j=O.depth_range,Z=H.depth_range,Y=O.colorMask,$=H.colorMask,X=O.polygonOffset_offset,U=H.polygonOffset_offset,Q=O.sample_coverage,J=H.sample_coverage,K=O.stencil_func,ee=H.stencil_func,et=O.stencil_opFront,ei=H.stencil_opFront,er=O.stencil_opBack,en=H.stencil_opBack,ea=O.scissor_box,el=H.scissor_box,es=O.viewport,eo=H.viewport,{draw:function(e){var h,p,m,g,_,v,y,w,x,S,z,F,A,P,M,ea,es,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8;L.angle_instanced_arrays,h=i.call(this,W,e,0),p=N.getFramebuffer(h),m=N.next,N.next=p,g=W.framebufferWidth,W.framebufferWidth=p?p.width:W.drawingBufferWidth,_=W.framebufferHeight,W.framebufferHeight=p?p.height:W.drawingBufferHeight,p!==N.cur&&(p?k.bindFramebuffer(36160,p.framebuffer):k.bindFramebuffer(36160,null),N.cur=p),H.dirty&&((em=O.dither)!==H.dither&&(em?k.enable(3024):k.disable(3024),H.dither=em),(eg=O.blend_enable)!==H.blend_enable&&(eg?k.enable(3042):k.disable(3042),H.blend_enable=eg),e_=C[0],ev=C[1],ey=C[2],ew=C[3],(e_!==V[0]||ev!==V[1]||ey!==V[2]||ew!==V[3])&&(k.blendColor(e_,ev,ey,ew),V[0]=e_,V[1]=ev,V[2]=ey,V[3]=ew),ex=D[0],eS=D[1],(ex!==G[0]||eS!==G[1])&&(k.blendEquationSeparate(ex,eS),G[0]=ex,G[1]=eS),ez=R[0],eF=R[1],eA=R[2],ek=R[3],(ez!==q[0]||eF!==q[1]||eA!==q[2]||ek!==q[3])&&(k.blendFuncSeparate(ez,eF,eA,ek),q[0]=ez,q[1]=eF,q[2]=eA,q[3]=ek),(eW=O.depth_enable)!==H.depth_enable&&(eW?k.enable(2929):k.disable(2929),H.depth_enable=eW),(eO=O.depth_func)!==H.depth_func&&(k.depthFunc(eO),H.depth_func=eO),eH=j[0],eB=j[1],(eH!==Z[0]||eB!==Z[1])&&(k.depthRange(eH,eB),Z[0]=eH,Z[1]=eB),(eI=O.depth_mask)!==H.depth_mask&&(k.depthMask(eI),H.depth_mask=eI),eP=Y[0],eE=Y[1],eT=Y[2],eM=Y[3],(eP!==$[0]||eE!==$[1]||eT!==$[2]||eM!==$[3])&&(k.colorMask(eP,eE,eT,eM),$[0]=eP,$[1]=eE,$[2]=eT,$[3]=eM),(eN=O.cull_enable)!==H.cull_enable&&(eN?k.enable(2884):k.disable(2884),H.cull_enable=eN),(eL=O.cull_face)!==H.cull_face&&(k.cullFace(eL),H.cull_face=eL),(eC=O.frontFace)!==H.frontFace&&(k.frontFace(eC),H.frontFace=eC),(eV=O.lineWidth)!==H.lineWidth&&(k.lineWidth(eV),H.lineWidth=eV),(eD=O.polygonOffset_enable)!==H.polygonOffset_enable&&(eD?k.enable(32823):k.disable(32823),H.polygonOffset_enable=eD),eG=X[0],eR=X[1],(eG!==U[0]||eR!==U[1])&&(k.polygonOffset(eG,eR),U[0]=eG,U[1]=eR),(eq=O.sample_alpha)!==H.sample_alpha&&(eq?k.enable(32926):k.disable(32926),H.sample_alpha=eq),(ej=O.sample_enable)!==H.sample_enable&&(ej?k.enable(32928):k.disable(32928),H.sample_enable=ej),eZ=Q[0],eY=Q[1],(eZ!==J[0]||eY!==J[1])&&(k.sampleCoverage(eZ,eY),J[0]=eZ,J[1]=eY),(e$=O.stencil_enable)!==H.stencil_enable&&(e$?k.enable(2960):k.disable(2960),H.stencil_enable=e$),(eX=O.stencil_mask)!==H.stencil_mask&&(k.stencilMask(eX),H.stencil_mask=eX),eU=K[0],eQ=K[1],eJ=K[2],(eU!==ee[0]||eQ!==ee[1]||eJ!==ee[2])&&(k.stencilFunc(eU,eQ,eJ),ee[0]=eU,ee[1]=eQ,ee[2]=eJ),eK=et[0],e0=et[1],e2=et[2],e1=et[3],(eK!==ei[0]||e0!==ei[1]||e2!==ei[2]||e1!==ei[3])&&(k.stencilOpSeparate(eK,e0,e2,e1),ei[0]=eK,ei[1]=e0,ei[2]=e2,ei[3]=e1),e3=er[0],e4=er[1],e6=er[2],e9=er[3],(e3!==en[0]||e4!==en[1]||e6!==en[2]||e9!==en[3])&&(k.stencilOpSeparate(e3,e4,e6,e9),en[0]=e3,en[1]=e4,en[2]=e6,en[3]=e9),(e8=O.scissor_enable)!==H.scissor_enable&&(e8?k.enable(3089):k.disable(3089),H.scissor_enable=e8)),v=W.framebufferWidth,y=W.framebufferHeight,w=W.viewportWidth,W.viewportWidth=v,x=W.viewportHeight,W.viewportHeight=y,k.viewport(0,0,v,y),eo[0]=0,eo[1]=0,eo[2]=v,eo[3]=y,S=W.framebufferWidth,z=W.framebufferHeight,k.scissor(0,0,S,z),el[0]=0,el[1]=0,el[2]=S,el[3]=z,(F=H.profile)&&(A=performance.now(),t.count++),k.useProgram(r.program),P=L.angle_instanced_arrays,T.setVAO(null),(ea=E[M=a.location]).buffer||k.enableVertexAttribArray(M),(5126!==ea.type||2!==ea.size||ea.buffer!==n||!1!==ea.normalized||0!==ea.offset||0!==ea.stride)&&(k.bindBuffer(34962,n.buffer),k.vertexAttribPointer(M,2,5126,!1,0,0),ea.type=5126,ea.size=2,ea.buffer=n,ea.normalized=!1,ea.offset=0,ea.stride=0),0!==ea.divisor&&(P.vertexAttribDivisorANGLE(M,0),ea.divisor=0),es=s.call(this,W,e,0),k.uniform1f(l.location,es),ef=f.call(this,W,e,0),k.uniform1f(o.location,ef),(ec=d.call(this,W,e,0))&&"framebuffer"===ec._reglType&&(ec=ec.color[0]),ed=ec._texture,k.uniform1i(c.location,ed.bind()),eu=b.call(this,W,e,0),k.uniform1f(u.location,eu),(eb=B.elements)?k.bindBuffer(34963,eb.buffer.buffer):T.currentVAO&&(eb=I.getElements(T.currentVAO.elements))&&k.bindBuffer(34963,eb.buffer.buffer),eh=B.offset,(ep=B.instances)>0?eb?P.drawElementsInstancedANGLE(5,4,eb.type,eh<<(eb.type-5121>>1),ep):P.drawArraysInstancedANGLE(5,eh,4,ep):ep<0&&(eb?k.drawElements(5,4,eb.type,eh<<(eb.type-5121>>1)):k.drawArrays(5,eh,4)),H.dirty=!0,T.setVAO(null),N.next=m,W.framebufferWidth=g,W.framebufferHeight=_,W.viewportWidth=w,W.viewportHeight=x,F&&(t.cpuTime+=performance.now()-A),ed.unbind()},scope:function(e,r,a){var l,o,c,u,k,O,I,E,T,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,el,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew;l=i.call(this,W,e,a),o=N.getFramebuffer(l),c=N.next,N.next=o,u=W.framebufferWidth,W.framebufferWidth=o?o.width:W.drawingBufferWidth,k=W.framebufferHeight,W.framebufferHeight=o?o.height:W.drawingBufferHeight,O=W.framebufferWidth,I=W.framebufferHeight,E=W.viewportWidth,W.viewportWidth=O,T=W.viewportHeight,W.viewportHeight=I,L=es[0],es[0]=h,C=es[1],es[1]=p,V=es[2],es[2]=O,D=es[3],es[3]=I,G=W.framebufferWidth,R=W.framebufferHeight,q=ea[0],ea[0]=m,j=ea[1],ea[1]=g,Z=ea[2],ea[2]=G,Y=ea[3],ea[3]=R,($=H.profile)&&(X=performance.now(),t.count++),U=B.count,B.count=_,Q=B.primitive,B.primitive=v,J=d.call(this,W,e,a),K=M[y],M[y]=J,ee=f.call(this,W,e,a),et=M[w],M[w]=ee,ei=b.call(this,W,e,a),er=M[x],M[x]=ei,en=s.call(this,W,e,a),el=M[S],M[S]=en,eo=z.state,z.state=1,ef=z.x,z.x=0,ec=z.y,z.y=0,ed=z.z,z.z=0,eu=z.w,z.w=0,eb=z.buffer,z.buffer=n,eh=z.size,z.size=2,ep=z.normalized,z.normalized=!1,em=z.type,z.type=5126,eg=z.offset,z.offset=0,e_=z.stride,z.stride=0,ev=z.divisor,z.divisor=0,ey=P.vert,P.vert=F,ew=P.frag,P.frag=A,H.dirty=!0,r(W,e,a),N.next=c,W.framebufferWidth=u,W.framebufferHeight=k,W.viewportWidth=E,W.viewportHeight=T,es[0]=L,es[1]=C,es[2]=V,es[3]=D,ea[0]=q,ea[1]=j,ea[2]=Z,ea[3]=Y,$&&(t.cpuTime+=performance.now()-X),B.count=U,B.primitive=Q,M[y]=K,M[w]=et,M[x]=er,M[S]=el,z.state=eo,z.x=ef,z.y=ec,z.z=ed,z.w=eu,z.buffer=eb,z.size=eh,z.normalized=ep,z.type=em,z.offset=eg,z.stride=e_,z.divisor=ev,P.vert=ey,P.frag=ew,H.dirty=!0},batch:function(e,h){var p,m,g,_,v,y,w,x,S,z,F,A,P,M,ea,es,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te;for(L.angle_instanced_arrays,p=i.call(this,W,e,0),m=N.getFramebuffer(p),g=N.next,N.next=m,_=W.framebufferWidth,W.framebufferWidth=m?m.width:W.drawingBufferWidth,v=W.framebufferHeight,W.framebufferHeight=m?m.height:W.drawingBufferHeight,m!==N.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),N.cur=m),H.dirty&&((ef=O.dither)!==H.dither&&(ef?k.enable(3024):k.disable(3024),H.dither=ef),(ec=O.blend_enable)!==H.blend_enable&&(ec?k.enable(3042):k.disable(3042),H.blend_enable=ec),ed=C[0],eu=C[1],eb=C[2],eh=C[3],(ed!==V[0]||eu!==V[1]||eb!==V[2]||eh!==V[3])&&(k.blendColor(ed,eu,eb,eh),V[0]=ed,V[1]=eu,V[2]=eb,V[3]=eh),ep=D[0],em=D[1],(ep!==G[0]||em!==G[1])&&(k.blendEquationSeparate(ep,em),G[0]=ep,G[1]=em),eg=R[0],e_=R[1],ev=R[2],ey=R[3],(eg!==q[0]||e_!==q[1]||ev!==q[2]||ey!==q[3])&&(k.blendFuncSeparate(eg,e_,ev,ey),q[0]=eg,q[1]=e_,q[2]=ev,q[3]=ey),(ew=O.depth_enable)!==H.depth_enable&&(ew?k.enable(2929):k.disable(2929),H.depth_enable=ew),(ex=O.depth_func)!==H.depth_func&&(k.depthFunc(ex),H.depth_func=ex),eS=j[0],ez=j[1],(eS!==Z[0]||ez!==Z[1])&&(k.depthRange(eS,ez),Z[0]=eS,Z[1]=ez),(eF=O.depth_mask)!==H.depth_mask&&(k.depthMask(eF),H.depth_mask=eF),eA=Y[0],ek=Y[1],eW=Y[2],eO=Y[3],(eA!==$[0]||ek!==$[1]||eW!==$[2]||eO!==$[3])&&(k.colorMask(eA,ek,eW,eO),$[0]=eA,$[1]=ek,$[2]=eW,$[3]=eO),(eH=O.cull_enable)!==H.cull_enable&&(eH?k.enable(2884):k.disable(2884),H.cull_enable=eH),(eB=O.cull_face)!==H.cull_face&&(k.cullFace(eB),H.cull_face=eB),(eI=O.frontFace)!==H.frontFace&&(k.frontFace(eI),H.frontFace=eI),(eP=O.lineWidth)!==H.lineWidth&&(k.lineWidth(eP),H.lineWidth=eP),(eE=O.polygonOffset_enable)!==H.polygonOffset_enable&&(eE?k.enable(32823):k.disable(32823),H.polygonOffset_enable=eE),eT=X[0],eM=X[1],(eT!==U[0]||eM!==U[1])&&(k.polygonOffset(eT,eM),U[0]=eT,U[1]=eM),(eN=O.sample_alpha)!==H.sample_alpha&&(eN?k.enable(32926):k.disable(32926),H.sample_alpha=eN),(eL=O.sample_enable)!==H.sample_enable&&(eL?k.enable(32928):k.disable(32928),H.sample_enable=eL),eC=Q[0],eV=Q[1],(eC!==J[0]||eV!==J[1])&&(k.sampleCoverage(eC,eV),J[0]=eC,J[1]=eV),(eD=O.stencil_enable)!==H.stencil_enable&&(eD?k.enable(2960):k.disable(2960),H.stencil_enable=eD),(eG=O.stencil_mask)!==H.stencil_mask&&(k.stencilMask(eG),H.stencil_mask=eG),eR=K[0],eq=K[1],ej=K[2],(eR!==ee[0]||eq!==ee[1]||ej!==ee[2])&&(k.stencilFunc(eR,eq,ej),ee[0]=eR,ee[1]=eq,ee[2]=ej),eZ=et[0],eY=et[1],e$=et[2],eX=et[3],(eZ!==ei[0]||eY!==ei[1]||e$!==ei[2]||eX!==ei[3])&&(k.stencilOpSeparate(eZ,eY,e$,eX),ei[0]=eZ,ei[1]=eY,ei[2]=e$,ei[3]=eX),eU=er[0],eQ=er[1],eJ=er[2],eK=er[3],(eU!==en[0]||eQ!==en[1]||eJ!==en[2]||eK!==en[3])&&(k.stencilOpSeparate(eU,eQ,eJ,eK),en[0]=eU,en[1]=eQ,en[2]=eJ,en[3]=eK),(e0=O.scissor_enable)!==H.scissor_enable&&(e0?k.enable(3089):k.disable(3089),H.scissor_enable=e0)),y=W.framebufferWidth,w=W.framebufferHeight,x=W.viewportWidth,W.viewportWidth=y,S=W.viewportHeight,W.viewportHeight=w,k.viewport(0,0,y,w),eo[0]=0,eo[1]=0,eo[2]=y,eo[3]=w,z=W.framebufferWidth,F=W.framebufferHeight,k.scissor(0,0,z,F),el[0]=0,el[1]=0,el[2]=z,el[3]=F,(A=H.profile)&&(P=performance.now(),t.count+=h),k.useProgram(r.program),M=L.angle_instanced_arrays,T.setVAO(null),(e1=E[e2=a.location]).buffer||k.enableVertexAttribArray(e2),(5126!==e1.type||2!==e1.size||e1.buffer!==n||!1!==e1.normalized||0!==e1.offset||0!==e1.stride)&&(k.bindBuffer(34962,n.buffer),k.vertexAttribPointer(e2,2,5126,!1,0,0),e1.type=5126,e1.size=2,e1.buffer=n,e1.normalized=!1,e1.offset=0,e1.stride=0),0!==e1.divisor&&(M.vertexAttribDivisorANGLE(e2,0),e1.divisor=0),e3=s.call(this,W,es,ea),k.uniform1f(l.location,e3),e4=f.call(this,W,es,ea),k.uniform1f(o.location,e4),(e6=d.call(this,W,es,ea))&&"framebuffer"===e6._reglType&&(e6=e6.color[0]),e9=e6._texture,k.uniform1i(c.location,e9.bind()),e8=b.call(this,W,es,ea),k.uniform1f(u.location,e8),(e5=B.elements)?k.bindBuffer(34963,e5.buffer.buffer):T.currentVAO&&(e5=I.getElements(T.currentVAO.elements))&&k.bindBuffer(34963,e5.buffer.buffer),e7=B.offset,te=B.instances,ea=0;ea<h;++ea)es=e[ea],te>0?e5?M.drawElementsInstancedANGLE(5,4,e5.type,e7<<(e5.type-5121>>1),te):M.drawArraysInstancedANGLE(5,e7,4,te):te<0&&(e5?k.drawElements(5,4,e5.type,e7<<(e5.type-5121>>1)):k.drawArrays(5,e7,4));e9.unbind(),H.dirty=!0,T.setVAO(null),N.next=g,W.framebufferWidth=_,W.framebufferHeight=v,W.viewportWidth=x,W.viewportHeight=S,A&&(t.cpuTime+=performance.now()-P)}}},"9d21b165a30f9f6f75398bdcb7c7a26023eb7f6897f345551a241761b2807eea":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M){var N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev;return N=e.gl,L=e.context,C=e.strings,V=e.next,D=e.current,G=e.draw,e.elements,e.buffer,R=e.shader,e.attributes,q=e.vao,j=e.uniforms,Z=e.framebuffer,Y=e.extensions,e.timer,e.isBufferArgs,$=V.blend_color,X=D.blend_color,U=V.blend_equation,Q=D.blend_equation,J=V.blend_func,K=D.blend_func,ee=V.depth_range,et=D.depth_range,ei=V.colorMask,er=D.colorMask,en=V.polygonOffset_offset,ea=D.polygonOffset_offset,el=V.sample_coverage,es=D.sample_coverage,eo=V.stencil_func,ef=D.stencil_func,ec=V.stencil_opFront,ed=D.stencil_opFront,eu=V.stencil_opBack,eb=D.stencil_opBack,eh=V.scissor_box,ep=D.scissor_box,em=V.viewport,eg=D.viewport,e_={},ev={},{draw:function(e){var a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,G,j,eh,em,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ;Y.angle_instanced_arrays,a=i.call(this,L,e,0),l=Z.getFramebuffer(a),s=Z.next,Z.next=l,o=L.framebufferWidth,L.framebufferWidth=l?l.width:L.drawingBufferWidth,f=L.framebufferHeight,L.framebufferHeight=l?l.height:L.drawingBufferHeight,l!==Z.cur&&(l?N.bindFramebuffer(36160,l.framebuffer):N.bindFramebuffer(36160,null),Z.cur=l),D.dirty&&((S=V.dither)!==D.dither&&(S?N.enable(3024):N.disable(3024),D.dither=S),(z=V.blend_enable)!==D.blend_enable&&(z?N.enable(3042):N.disable(3042),D.blend_enable=z),F=$[0],A=$[1],k=$[2],W=$[3],(F!==X[0]||A!==X[1]||k!==X[2]||W!==X[3])&&(N.blendColor(F,A,k,W),X[0]=F,X[1]=A,X[2]=k,X[3]=W),O=U[0],H=U[1],(O!==Q[0]||H!==Q[1])&&(N.blendEquationSeparate(O,H),Q[0]=O,Q[1]=H),B=J[0],I=J[1],P=J[2],E=J[3],(B!==K[0]||I!==K[1]||P!==K[2]||E!==K[3])&&(N.blendFuncSeparate(B,I,P,E),K[0]=B,K[1]=I,K[2]=P,K[3]=E),(T=V.depth_enable)!==D.depth_enable&&(T?N.enable(2929):N.disable(2929),D.depth_enable=T),(M=V.depth_func)!==D.depth_func&&(N.depthFunc(M),D.depth_func=M),G=ee[0],j=ee[1],(G!==et[0]||j!==et[1])&&(N.depthRange(G,j),et[0]=G,et[1]=j),(eh=V.depth_mask)!==D.depth_mask&&(N.depthMask(eh),D.depth_mask=eh),em=ei[0],ev=ei[1],ey=ei[2],ew=ei[3],(em!==er[0]||ev!==er[1]||ey!==er[2]||ew!==er[3])&&(N.colorMask(em,ev,ey,ew),er[0]=em,er[1]=ev,er[2]=ey,er[3]=ew),(ex=V.cull_enable)!==D.cull_enable&&(ex?N.enable(2884):N.disable(2884),D.cull_enable=ex),(eS=V.cull_face)!==D.cull_face&&(N.cullFace(eS),D.cull_face=eS),(ez=V.frontFace)!==D.frontFace&&(N.frontFace(ez),D.frontFace=ez),(eF=V.lineWidth)!==D.lineWidth&&(N.lineWidth(eF),D.lineWidth=eF),(eA=V.polygonOffset_enable)!==D.polygonOffset_enable&&(eA?N.enable(32823):N.disable(32823),D.polygonOffset_enable=eA),ek=en[0],eW=en[1],(ek!==ea[0]||eW!==ea[1])&&(N.polygonOffset(ek,eW),ea[0]=ek,ea[1]=eW),(eO=V.sample_alpha)!==D.sample_alpha&&(eO?N.enable(32926):N.disable(32926),D.sample_alpha=eO),(eH=V.sample_enable)!==D.sample_enable&&(eH?N.enable(32928):N.disable(32928),D.sample_enable=eH),eB=el[0],eI=el[1],(eB!==es[0]||eI!==es[1])&&(N.sampleCoverage(eB,eI),es[0]=eB,es[1]=eI),(eP=V.stencil_enable)!==D.stencil_enable&&(eP?N.enable(2960):N.disable(2960),D.stencil_enable=eP),(eE=V.stencil_mask)!==D.stencil_mask&&(N.stencilMask(eE),D.stencil_mask=eE),eT=eo[0],eM=eo[1],eN=eo[2],(eT!==ef[0]||eM!==ef[1]||eN!==ef[2])&&(N.stencilFunc(eT,eM,eN),ef[0]=eT,ef[1]=eM,ef[2]=eN),eL=ec[0],eC=ec[1],eV=ec[2],eD=ec[3],(eL!==ed[0]||eC!==ed[1]||eV!==ed[2]||eD!==ed[3])&&(N.stencilOpSeparate(eL,eC,eV,eD),ed[0]=eL,ed[1]=eC,ed[2]=eV,ed[3]=eD),eG=eu[0],eR=eu[1],eq=eu[2],ej=eu[3],(eG!==eb[0]||eR!==eb[1]||eq!==eb[2]||ej!==eb[3])&&(N.stencilOpSeparate(eG,eR,eq,ej),eb[0]=eG,eb[1]=eR,eb[2]=eq,eb[3]=ej),(eZ=V.scissor_enable)!==D.scissor_enable&&(eZ?N.enable(3089):N.disable(3089),D.scissor_enable=eZ)),c=L.framebufferWidth,d=L.framebufferHeight,u=L.viewportWidth,L.viewportWidth=c,b=L.viewportHeight,L.viewportHeight=d,N.viewport(0,0,c,d),eg[0]=0,eg[1]=0,eg[2]=c,eg[3]=d,h=L.framebufferWidth,p=L.framebufferHeight,N.scissor(0,0,h,p),ep[0]=0,ep[1]=0,ep[2]=h,ep[3]=p,(m=D.profile)&&(g=performance.now(),t.count++),_=r.call(this,L,e,0),v=C.id(_),y=R.program(2,v),N.useProgram(y.program),q.setVAO(null),(x=e_[w=y.id])?x.call(this,e):(x=e_[w]=n(y)).call(this,e),D.dirty=!0,q.setVAO(null),Z.next=s,L.framebufferWidth=o,L.framebufferHeight=f,L.viewportWidth=u,L.viewportHeight=b,m&&(t.cpuTime+=performance.now()-g)},scope:function(e,n,M){var N,V,q,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,ep,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ;N=i.call(this,L,e,M),V=Z.getFramebuffer(N),q=Z.next,Z.next=V,Y=L.framebufferWidth,L.framebufferWidth=V?V.width:L.drawingBufferWidth,$=L.framebufferHeight,L.framebufferHeight=V?V.height:L.drawingBufferHeight,X=L.framebufferWidth,U=L.framebufferHeight,Q=L.viewportWidth,L.viewportWidth=X,J=L.viewportHeight,L.viewportHeight=U,K=em[0],em[0]=a,ee=em[1],em[1]=l,et=em[2],em[2]=X,ei=em[3],em[3]=U,er=L.framebufferWidth,en=L.framebufferHeight,ea=eh[0],eh[0]=s,el=eh[1],eh[1]=o,es=eh[2],eh[2]=er,eo=eh[3],eh[3]=en,(ef=D.profile)&&(ec=performance.now(),t.count++),ed=G.count,G.count=f,eu=G.primitive,G.primitive=c,eb=d.call(this,L,e,M),ep=j[u],j[u]=eb,eg=b.call(this,L,e,M),e_=j[h],j[h]=eg,ev=p.call(this,L,e,M),ey=j[m],j[m]=ev,ew=g.call(this,L,e,M),ex=j[_],j[_]=ew,eS=v.call(this,L,e,M),ez=j[y],j[y]=eS,eF=w.call(this,L,e,M),eA=j[x],j[x]=eF,ek=S.call(this,L,e,M),eW=j[z],j[z]=ek,eO=F.call(this,L,e,M),eH=j[A],j[A]=eO,eB=k.call(this,L,e,M),eI=j[W],j[W]=eB,eP=O.call(this,L,e,M),eE=j[H],j[H]=eP,eT=B.call(this,L,e,M),eM=j[I],j[I]=eT,eN=E.state,E.state=1,eL=E.x,E.x=0,eC=E.y,E.y=0,eV=E.z,E.z=0,eD=E.w,E.w=0,eG=E.buffer,E.buffer=P,eR=E.size,E.size=2,eq=E.normalized,E.normalized=!1,ej=E.type,E.type=5126,eZ=E.offset,E.offset=0,eY=E.stride,E.stride=0,e$=E.divisor,E.divisor=0,eX=R.vert,R.vert=T,eU=r.call(this,L,e,M),eQ=C.id(eU),eJ=R.frag,R.frag=eQ,D.dirty=!0,n(L,e,M),Z.next=q,L.framebufferWidth=Y,L.framebufferHeight=$,L.viewportWidth=Q,L.viewportHeight=J,em[0]=K,em[1]=ee,em[2]=et,em[3]=ei,eh[0]=ea,eh[1]=el,eh[2]=es,eh[3]=eo,ef&&(t.cpuTime+=performance.now()-ec),G.count=ed,G.primitive=eu,j[u]=ep,j[h]=e_,j[m]=ey,j[_]=ex,j[y]=ez,j[x]=eA,j[z]=eW,j[A]=eH,j[W]=eI,j[H]=eE,j[I]=eM,E.state=eN,E.x=eL,E.y=eC,E.z=eV,E.w=eD,E.buffer=eG,E.size=eR,E.normalized=eq,E.type=ej,E.offset=eZ,E.stride=eY,E.divisor=e$,R.vert=eX,R.frag=eJ,D.dirty=!0},batch:function(e,n){var a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,G,j,eh,em,e_,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY;Y.angle_instanced_arrays,a=i.call(this,L,e,0),l=Z.getFramebuffer(a),s=Z.next,Z.next=l,o=L.framebufferWidth,L.framebufferWidth=l?l.width:L.drawingBufferWidth,f=L.framebufferHeight,L.framebufferHeight=l?l.height:L.drawingBufferHeight,l!==Z.cur&&(l?N.bindFramebuffer(36160,l.framebuffer):N.bindFramebuffer(36160,null),Z.cur=l),D.dirty&&((S=V.dither)!==D.dither&&(S?N.enable(3024):N.disable(3024),D.dither=S),(z=V.blend_enable)!==D.blend_enable&&(z?N.enable(3042):N.disable(3042),D.blend_enable=z),F=$[0],A=$[1],k=$[2],W=$[3],(F!==X[0]||A!==X[1]||k!==X[2]||W!==X[3])&&(N.blendColor(F,A,k,W),X[0]=F,X[1]=A,X[2]=k,X[3]=W),O=U[0],H=U[1],(O!==Q[0]||H!==Q[1])&&(N.blendEquationSeparate(O,H),Q[0]=O,Q[1]=H),B=J[0],I=J[1],P=J[2],E=J[3],(B!==K[0]||I!==K[1]||P!==K[2]||E!==K[3])&&(N.blendFuncSeparate(B,I,P,E),K[0]=B,K[1]=I,K[2]=P,K[3]=E),(T=V.depth_enable)!==D.depth_enable&&(T?N.enable(2929):N.disable(2929),D.depth_enable=T),(G=V.depth_func)!==D.depth_func&&(N.depthFunc(G),D.depth_func=G),j=ee[0],eh=ee[1],(j!==et[0]||eh!==et[1])&&(N.depthRange(j,eh),et[0]=j,et[1]=eh),(em=V.depth_mask)!==D.depth_mask&&(N.depthMask(em),D.depth_mask=em),e_=ei[0],ey=ei[1],ew=ei[2],ex=ei[3],(e_!==er[0]||ey!==er[1]||ew!==er[2]||ex!==er[3])&&(N.colorMask(e_,ey,ew,ex),er[0]=e_,er[1]=ey,er[2]=ew,er[3]=ex),(eS=V.cull_enable)!==D.cull_enable&&(eS?N.enable(2884):N.disable(2884),D.cull_enable=eS),(ez=V.cull_face)!==D.cull_face&&(N.cullFace(ez),D.cull_face=ez),(eF=V.frontFace)!==D.frontFace&&(N.frontFace(eF),D.frontFace=eF),(eA=V.lineWidth)!==D.lineWidth&&(N.lineWidth(eA),D.lineWidth=eA),(ek=V.polygonOffset_enable)!==D.polygonOffset_enable&&(ek?N.enable(32823):N.disable(32823),D.polygonOffset_enable=ek),eW=en[0],eO=en[1],(eW!==ea[0]||eO!==ea[1])&&(N.polygonOffset(eW,eO),ea[0]=eW,ea[1]=eO),(eH=V.sample_alpha)!==D.sample_alpha&&(eH?N.enable(32926):N.disable(32926),D.sample_alpha=eH),(eB=V.sample_enable)!==D.sample_enable&&(eB?N.enable(32928):N.disable(32928),D.sample_enable=eB),eI=el[0],eP=el[1],(eI!==es[0]||eP!==es[1])&&(N.sampleCoverage(eI,eP),es[0]=eI,es[1]=eP),(eE=V.stencil_enable)!==D.stencil_enable&&(eE?N.enable(2960):N.disable(2960),D.stencil_enable=eE),(eT=V.stencil_mask)!==D.stencil_mask&&(N.stencilMask(eT),D.stencil_mask=eT),eM=eo[0],eN=eo[1],eL=eo[2],(eM!==ef[0]||eN!==ef[1]||eL!==ef[2])&&(N.stencilFunc(eM,eN,eL),ef[0]=eM,ef[1]=eN,ef[2]=eL),eC=ec[0],eV=ec[1],eD=ec[2],eG=ec[3],(eC!==ed[0]||eV!==ed[1]||eD!==ed[2]||eG!==ed[3])&&(N.stencilOpSeparate(eC,eV,eD,eG),ed[0]=eC,ed[1]=eV,ed[2]=eD,ed[3]=eG),eR=eu[0],eq=eu[1],ej=eu[2],eZ=eu[3],(eR!==eb[0]||eq!==eb[1]||ej!==eb[2]||eZ!==eb[3])&&(N.stencilOpSeparate(eR,eq,ej,eZ),eb[0]=eR,eb[1]=eq,eb[2]=ej,eb[3]=eZ),(eY=V.scissor_enable)!==D.scissor_enable&&(eY?N.enable(3089):N.disable(3089),D.scissor_enable=eY)),c=L.framebufferWidth,d=L.framebufferHeight,u=L.viewportWidth,L.viewportWidth=c,b=L.viewportHeight,L.viewportHeight=d,N.viewport(0,0,c,d),eg[0]=0,eg[1]=0,eg[2]=c,eg[3]=d,h=L.framebufferWidth,p=L.framebufferHeight,N.scissor(0,0,h,p),ep[0]=0,ep[1]=0,ep[2]=h,ep[3]=p,(m=D.profile)&&(g=performance.now(),t.count+=n),_=r.call(this,L,e,0),v=C.id(_),y=R.program(2,v),N.useProgram(y.program),q.setVAO(null),(x=ev[w=y.id])?x.call(this,e,n):(x=ev[w]=M(y)).call(this,e,n),D.dirty=!0,q.setVAO(null),Z.next=s,L.framebufferWidth=o,L.framebufferHeight=f,L.viewportWidth=u,L.viewportHeight=b,m&&(t.cpuTime+=performance.now()-g)}}},a56156b46387d9ebaeb16362ff9fd91a496e85692131cee7d7a0dd9997816a78:function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S){var z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea;return z=e.gl,F=e.context,e.strings,A=e.next,k=e.current,W=e.draw,O=e.elements,e.buffer,H=e.shader,B=e.attributes,I=e.vao,P=e.uniforms,E=e.framebuffer,T=e.extensions,e.timer,e.isBufferArgs,M=A.blend_color,N=k.blend_color,L=A.blend_equation,C=k.blend_equation,V=A.blend_func,D=k.blend_func,G=A.depth_range,R=k.depth_range,q=A.colorMask,j=k.colorMask,Z=A.polygonOffset_offset,Y=k.polygonOffset_offset,$=A.sample_coverage,X=k.sample_coverage,U=A.stencil_func,Q=k.stencil_func,J=A.stencil_opFront,K=k.stencil_opFront,ee=A.stencil_opBack,et=k.stencil_opBack,ei=A.scissor_box,er=k.scissor_box,en=A.viewport,ea=k.viewport,{draw:function(e){var u,b,h,p,m,g,_,v,y,w,x,S,H,P,ei,en,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9;T.angle_instanced_arrays,u=i.call(this,F,e,0),b=E.getFramebuffer(u),h=E.next,E.next=b,p=F.framebufferWidth,F.framebufferWidth=b?b.width:F.drawingBufferWidth,m=F.framebufferHeight,F.framebufferHeight=b?b.height:F.drawingBufferHeight,b!==E.cur&&(b?z.bindFramebuffer(36160,b.framebuffer):z.bindFramebuffer(36160,null),E.cur=b),k.dirty&&((ep=A.dither)!==k.dither&&(ep?z.enable(3024):z.disable(3024),k.dither=ep),(em=A.blend_enable)!==k.blend_enable&&(em?z.enable(3042):z.disable(3042),k.blend_enable=em),eg=M[0],e_=M[1],ev=M[2],ey=M[3],(eg!==N[0]||e_!==N[1]||ev!==N[2]||ey!==N[3])&&(z.blendColor(eg,e_,ev,ey),N[0]=eg,N[1]=e_,N[2]=ev,N[3]=ey),ew=L[0],ex=L[1],(ew!==C[0]||ex!==C[1])&&(z.blendEquationSeparate(ew,ex),C[0]=ew,C[1]=ex),eS=V[0],ez=V[1],eF=V[2],eA=V[3],(eS!==D[0]||ez!==D[1]||eF!==D[2]||eA!==D[3])&&(z.blendFuncSeparate(eS,ez,eF,eA),D[0]=eS,D[1]=ez,D[2]=eF,D[3]=eA),(ek=A.depth_enable)!==k.depth_enable&&(ek?z.enable(2929):z.disable(2929),k.depth_enable=ek),(eW=A.depth_func)!==k.depth_func&&(z.depthFunc(eW),k.depth_func=eW),eO=G[0],eH=G[1],(eO!==R[0]||eH!==R[1])&&(z.depthRange(eO,eH),R[0]=eO,R[1]=eH),(eB=A.depth_mask)!==k.depth_mask&&(z.depthMask(eB),k.depth_mask=eB),eI=q[0],eP=q[1],eE=q[2],eT=q[3],(eI!==j[0]||eP!==j[1]||eE!==j[2]||eT!==j[3])&&(z.colorMask(eI,eP,eE,eT),j[0]=eI,j[1]=eP,j[2]=eE,j[3]=eT),(eM=A.cull_enable)!==k.cull_enable&&(eM?z.enable(2884):z.disable(2884),k.cull_enable=eM),(eN=A.cull_face)!==k.cull_face&&(z.cullFace(eN),k.cull_face=eN),(eL=A.frontFace)!==k.frontFace&&(z.frontFace(eL),k.frontFace=eL),(eC=A.lineWidth)!==k.lineWidth&&(z.lineWidth(eC),k.lineWidth=eC),(eV=A.polygonOffset_enable)!==k.polygonOffset_enable&&(eV?z.enable(32823):z.disable(32823),k.polygonOffset_enable=eV),eD=Z[0],eG=Z[1],(eD!==Y[0]||eG!==Y[1])&&(z.polygonOffset(eD,eG),Y[0]=eD,Y[1]=eG),(eR=A.sample_alpha)!==k.sample_alpha&&(eR?z.enable(32926):z.disable(32926),k.sample_alpha=eR),(eq=A.sample_enable)!==k.sample_enable&&(eq?z.enable(32928):z.disable(32928),k.sample_enable=eq),ej=$[0],eZ=$[1],(ej!==X[0]||eZ!==X[1])&&(z.sampleCoverage(ej,eZ),X[0]=ej,X[1]=eZ),(eY=A.stencil_enable)!==k.stencil_enable&&(eY?z.enable(2960):z.disable(2960),k.stencil_enable=eY),(e$=A.stencil_mask)!==k.stencil_mask&&(z.stencilMask(e$),k.stencil_mask=e$),eX=U[0],eU=U[1],eQ=U[2],(eX!==Q[0]||eU!==Q[1]||eQ!==Q[2])&&(z.stencilFunc(eX,eU,eQ),Q[0]=eX,Q[1]=eU,Q[2]=eQ),eJ=J[0],eK=J[1],e0=J[2],e2=J[3],(eJ!==K[0]||eK!==K[1]||e0!==K[2]||e2!==K[3])&&(z.stencilOpSeparate(eJ,eK,e0,e2),K[0]=eJ,K[1]=eK,K[2]=e0,K[3]=e2),e1=ee[0],e3=ee[1],e4=ee[2],e6=ee[3],(e1!==et[0]||e3!==et[1]||e4!==et[2]||e6!==et[3])&&(z.stencilOpSeparate(e1,e3,e4,e6),et[0]=e1,et[1]=e3,et[2]=e4,et[3]=e6),(e9=A.scissor_enable)!==k.scissor_enable&&(e9?z.enable(3089):z.disable(3089),k.scissor_enable=e9)),g=F.framebufferWidth,_=F.framebufferHeight,v=F.viewportWidth,F.viewportWidth=g,y=F.viewportHeight,F.viewportHeight=_,z.viewport(0,0,g,_),ea[0]=0,ea[1]=0,ea[2]=g,ea[3]=_,w=F.framebufferWidth,x=F.framebufferHeight,z.scissor(0,0,w,x),er[0]=0,er[1]=0,er[2]=w,er[3]=x,(S=k.profile)&&(H=performance.now(),t.count++),z.useProgram(r.program),P=T.angle_instanced_arrays,I.setVAO(null),(en=B[ei=a.location]).buffer||z.enableVertexAttribArray(ei),(5126!==en.type||2!==en.size||en.buffer!==n||!1!==en.normalized||0!==en.offset||0!==en.stride)&&(z.bindBuffer(34962,n.buffer),z.vertexAttribPointer(ei,2,5126,!1,0,0),en.type=5126,en.size=2,en.buffer=n,en.normalized=!1,en.offset=0,en.stride=0),0!==en.divisor&&(P.vertexAttribDivisorANGLE(ei,0),en.divisor=0),es=(el=s.call(this,F,e,0))[0],eo=el[1],z.uniform2f(l.location,es,eo),(ef=f.call(this,F,e,0))&&"framebuffer"===ef._reglType&&(ef=ef.color[0]),ec=ef._texture,z.uniform1i(o.location,ec.bind()),ed=d.call(this,F,e,0),z.uniform1f(c.location,ed),(eu=W.elements)?z.bindBuffer(34963,eu.buffer.buffer):I.currentVAO&&(eu=O.getElements(I.currentVAO.elements))&&z.bindBuffer(34963,eu.buffer.buffer),eb=W.offset,(eh=W.instances)>0?eu?P.drawElementsInstancedANGLE(5,4,eu.type,eb<<(eu.type-5121>>1),eh):P.drawArraysInstancedANGLE(5,eb,4,eh):eh<0&&(eu?z.drawElements(5,4,eu.type,eb<<(eu.type-5121>>1)):z.drawArrays(5,eb,4)),k.dirty=!0,I.setVAO(null),E.next=h,F.framebufferWidth=p,F.framebufferHeight=m,F.viewportWidth=v,F.viewportHeight=y,S&&(t.cpuTime+=performance.now()-H),ec.unbind()},scope:function(e,r,a){var l,o,c,z,A,O,B,I,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,er,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg;l=i.call(this,F,e,a),o=E.getFramebuffer(l),c=E.next,E.next=o,z=F.framebufferWidth,F.framebufferWidth=o?o.width:F.drawingBufferWidth,A=F.framebufferHeight,F.framebufferHeight=o?o.height:F.drawingBufferHeight,O=F.framebufferWidth,B=F.framebufferHeight,I=F.viewportWidth,F.viewportWidth=O,T=F.viewportHeight,F.viewportHeight=B,M=en[0],en[0]=u,N=en[1],en[1]=b,L=en[2],en[2]=O,C=en[3],en[3]=B,V=F.framebufferWidth,D=F.framebufferHeight,G=ei[0],ei[0]=h,R=ei[1],ei[1]=p,q=ei[2],ei[2]=V,j=ei[3],ei[3]=D,(Z=k.profile)&&(Y=performance.now(),t.count++),$=W.count,W.count=m,X=W.primitive,W.primitive=g,U=f.call(this,F,e,a),Q=P[_],P[_]=U,J=s.call(this,F,e,a),K=P[v],P[v]=J,ee=d.call(this,F,e,a),et=P[y],P[y]=ee,er=w.state,w.state=1,ea=w.x,w.x=0,el=w.y,w.y=0,es=w.z,w.z=0,eo=w.w,w.w=0,ef=w.buffer,w.buffer=n,ec=w.size,w.size=2,ed=w.normalized,w.normalized=!1,eu=w.type,w.type=5126,eb=w.offset,w.offset=0,eh=w.stride,w.stride=0,ep=w.divisor,w.divisor=0,em=H.vert,H.vert=x,eg=H.frag,H.frag=S,k.dirty=!0,r(F,e,a),E.next=c,F.framebufferWidth=z,F.framebufferHeight=A,F.viewportWidth=I,F.viewportHeight=T,en[0]=M,en[1]=N,en[2]=L,en[3]=C,ei[0]=G,ei[1]=R,ei[2]=q,ei[3]=j,Z&&(t.cpuTime+=performance.now()-Y),W.count=$,W.primitive=X,P[_]=Q,P[v]=K,P[y]=et,w.state=er,w.x=ea,w.y=el,w.z=es,w.w=eo,w.buffer=ef,w.size=ec,w.normalized=ed,w.type=eu,w.offset=eb,w.stride=eh,w.divisor=ep,H.vert=em,H.frag=eg,k.dirty=!0},batch:function(e,u){var b,h,p,m,g,_,v,y,w,x,S,H,P,ei,en,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7;for(T.angle_instanced_arrays,b=i.call(this,F,e,0),h=E.getFramebuffer(b),p=E.next,E.next=h,m=F.framebufferWidth,F.framebufferWidth=h?h.width:F.drawingBufferWidth,g=F.framebufferHeight,F.framebufferHeight=h?h.height:F.drawingBufferHeight,h!==E.cur&&(h?z.bindFramebuffer(36160,h.framebuffer):z.bindFramebuffer(36160,null),E.cur=h),k.dirty&&((es=A.dither)!==k.dither&&(es?z.enable(3024):z.disable(3024),k.dither=es),(eo=A.blend_enable)!==k.blend_enable&&(eo?z.enable(3042):z.disable(3042),k.blend_enable=eo),ef=M[0],ec=M[1],ed=M[2],eu=M[3],(ef!==N[0]||ec!==N[1]||ed!==N[2]||eu!==N[3])&&(z.blendColor(ef,ec,ed,eu),N[0]=ef,N[1]=ec,N[2]=ed,N[3]=eu),eb=L[0],eh=L[1],(eb!==C[0]||eh!==C[1])&&(z.blendEquationSeparate(eb,eh),C[0]=eb,C[1]=eh),ep=V[0],em=V[1],eg=V[2],e_=V[3],(ep!==D[0]||em!==D[1]||eg!==D[2]||e_!==D[3])&&(z.blendFuncSeparate(ep,em,eg,e_),D[0]=ep,D[1]=em,D[2]=eg,D[3]=e_),(ev=A.depth_enable)!==k.depth_enable&&(ev?z.enable(2929):z.disable(2929),k.depth_enable=ev),(ey=A.depth_func)!==k.depth_func&&(z.depthFunc(ey),k.depth_func=ey),ew=G[0],ex=G[1],(ew!==R[0]||ex!==R[1])&&(z.depthRange(ew,ex),R[0]=ew,R[1]=ex),(eS=A.depth_mask)!==k.depth_mask&&(z.depthMask(eS),k.depth_mask=eS),ez=q[0],eF=q[1],eA=q[2],ek=q[3],(ez!==j[0]||eF!==j[1]||eA!==j[2]||ek!==j[3])&&(z.colorMask(ez,eF,eA,ek),j[0]=ez,j[1]=eF,j[2]=eA,j[3]=ek),(eW=A.cull_enable)!==k.cull_enable&&(eW?z.enable(2884):z.disable(2884),k.cull_enable=eW),(eO=A.cull_face)!==k.cull_face&&(z.cullFace(eO),k.cull_face=eO),(eH=A.frontFace)!==k.frontFace&&(z.frontFace(eH),k.frontFace=eH),(eB=A.lineWidth)!==k.lineWidth&&(z.lineWidth(eB),k.lineWidth=eB),(eI=A.polygonOffset_enable)!==k.polygonOffset_enable&&(eI?z.enable(32823):z.disable(32823),k.polygonOffset_enable=eI),eP=Z[0],eE=Z[1],(eP!==Y[0]||eE!==Y[1])&&(z.polygonOffset(eP,eE),Y[0]=eP,Y[1]=eE),(eT=A.sample_alpha)!==k.sample_alpha&&(eT?z.enable(32926):z.disable(32926),k.sample_alpha=eT),(eM=A.sample_enable)!==k.sample_enable&&(eM?z.enable(32928):z.disable(32928),k.sample_enable=eM),eN=$[0],eL=$[1],(eN!==X[0]||eL!==X[1])&&(z.sampleCoverage(eN,eL),X[0]=eN,X[1]=eL),(eC=A.stencil_enable)!==k.stencil_enable&&(eC?z.enable(2960):z.disable(2960),k.stencil_enable=eC),(eV=A.stencil_mask)!==k.stencil_mask&&(z.stencilMask(eV),k.stencil_mask=eV),eD=U[0],eG=U[1],eR=U[2],(eD!==Q[0]||eG!==Q[1]||eR!==Q[2])&&(z.stencilFunc(eD,eG,eR),Q[0]=eD,Q[1]=eG,Q[2]=eR),eq=J[0],ej=J[1],eZ=J[2],eY=J[3],(eq!==K[0]||ej!==K[1]||eZ!==K[2]||eY!==K[3])&&(z.stencilOpSeparate(eq,ej,eZ,eY),K[0]=eq,K[1]=ej,K[2]=eZ,K[3]=eY),e$=ee[0],eX=ee[1],eU=ee[2],eQ=ee[3],(e$!==et[0]||eX!==et[1]||eU!==et[2]||eQ!==et[3])&&(z.stencilOpSeparate(e$,eX,eU,eQ),et[0]=e$,et[1]=eX,et[2]=eU,et[3]=eQ),(eJ=A.scissor_enable)!==k.scissor_enable&&(eJ?z.enable(3089):z.disable(3089),k.scissor_enable=eJ)),_=F.framebufferWidth,v=F.framebufferHeight,y=F.viewportWidth,F.viewportWidth=_,w=F.viewportHeight,F.viewportHeight=v,z.viewport(0,0,_,v),ea[0]=0,ea[1]=0,ea[2]=_,ea[3]=v,x=F.framebufferWidth,S=F.framebufferHeight,z.scissor(0,0,x,S),er[0]=0,er[1]=0,er[2]=x,er[3]=S,(H=k.profile)&&(P=performance.now(),t.count+=u),z.useProgram(r.program),ei=T.angle_instanced_arrays,I.setVAO(null),(e0=B[eK=a.location]).buffer||z.enableVertexAttribArray(eK),(5126!==e0.type||2!==e0.size||e0.buffer!==n||!1!==e0.normalized||0!==e0.offset||0!==e0.stride)&&(z.bindBuffer(34962,n.buffer),z.vertexAttribPointer(eK,2,5126,!1,0,0),e0.type=5126,e0.size=2,e0.buffer=n,e0.normalized=!1,e0.offset=0,e0.stride=0),0!==e0.divisor&&(ei.vertexAttribDivisorANGLE(eK,0),e0.divisor=0),e1=(e2=s.call(this,F,el,en))[0],e3=e2[1],z.uniform2f(l.location,e1,e3),(e4=f.call(this,F,el,en))&&"framebuffer"===e4._reglType&&(e4=e4.color[0]),e6=e4._texture,z.uniform1i(o.location,e6.bind()),e9=d.call(this,F,el,en),z.uniform1f(c.location,e9),(e8=W.elements)?z.bindBuffer(34963,e8.buffer.buffer):I.currentVAO&&(e8=O.getElements(I.currentVAO.elements))&&z.bindBuffer(34963,e8.buffer.buffer),e5=W.offset,e7=W.instances,en=0;en<u;++en)el=e[en],e7>0?e8?ei.drawElementsInstancedANGLE(5,4,e8.type,e5<<(e8.type-5121>>1),e7):ei.drawArraysInstancedANGLE(5,e5,4,e7):e7<0&&(e8?z.drawElements(5,4,e8.type,e5<<(e8.type-5121>>1)):z.drawArrays(5,e5,4));e6.unbind(),k.dirty=!0,I.setVAO(null),E.next=p,F.framebufferWidth=m,F.framebufferHeight=g,F.viewportWidth=y,F.viewportHeight=w,H&&(t.cpuTime+=performance.now()-P)}}},a078ac08badcbb8d92ee14097c5aa87a7d715adc669508e1f2527db65d2020a6:function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h){var p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X;return p=e.gl,m=e.context,e.strings,g=e.next,_=e.current,v=e.draw,y=e.elements,e.buffer,w=e.shader,x=e.attributes,S=e.vao,e.uniforms,z=e.framebuffer,F=e.extensions,e.timer,e.isBufferArgs,A=g.blend_color,k=_.blend_color,W=g.blend_equation,O=_.blend_equation,H=g.blend_func,B=_.blend_func,I=g.depth_range,P=_.depth_range,E=g.colorMask,T=_.colorMask,M=g.polygonOffset_offset,N=_.polygonOffset_offset,L=g.sample_coverage,C=_.sample_coverage,V=g.stencil_func,D=_.stencil_func,G=g.stencil_opFront,R=_.stencil_opFront,q=g.stencil_opBack,j=_.stencil_opBack,Z=g.scissor_box,Y=_.scissor_box,$=g.viewport,X=_.viewport,{draw:function(e){var l,s,o,f,c,d,u,b,h,w,Z,$,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$;F.angle_instanced_arrays,l=i.call(this,m,e,0),s=z.getFramebuffer(l),o=z.next,z.next=s,f=m.framebufferWidth,m.framebufferWidth=s?s.width:m.drawingBufferWidth,c=m.framebufferHeight,m.framebufferHeight=s?s.height:m.drawingBufferHeight,s!==z.cur&&(s?p.bindFramebuffer(36160,s.framebuffer):p.bindFramebuffer(36160,null),z.cur=s),_.dirty&&((er=g.dither)!==_.dither&&(er?p.enable(3024):p.disable(3024),_.dither=er),(en=g.blend_enable)!==_.blend_enable&&(en?p.enable(3042):p.disable(3042),_.blend_enable=en),ea=A[0],el=A[1],es=A[2],eo=A[3],(ea!==k[0]||el!==k[1]||es!==k[2]||eo!==k[3])&&(p.blendColor(ea,el,es,eo),k[0]=ea,k[1]=el,k[2]=es,k[3]=eo),ef=W[0],ec=W[1],(ef!==O[0]||ec!==O[1])&&(p.blendEquationSeparate(ef,ec),O[0]=ef,O[1]=ec),ed=H[0],eu=H[1],eb=H[2],eh=H[3],(ed!==B[0]||eu!==B[1]||eb!==B[2]||eh!==B[3])&&(p.blendFuncSeparate(ed,eu,eb,eh),B[0]=ed,B[1]=eu,B[2]=eb,B[3]=eh),(ep=g.depth_enable)!==_.depth_enable&&(ep?p.enable(2929):p.disable(2929),_.depth_enable=ep),(em=g.depth_func)!==_.depth_func&&(p.depthFunc(em),_.depth_func=em),eg=I[0],e_=I[1],(eg!==P[0]||e_!==P[1])&&(p.depthRange(eg,e_),P[0]=eg,P[1]=e_),(ev=g.depth_mask)!==_.depth_mask&&(p.depthMask(ev),_.depth_mask=ev),ey=E[0],ew=E[1],ex=E[2],eS=E[3],(ey!==T[0]||ew!==T[1]||ex!==T[2]||eS!==T[3])&&(p.colorMask(ey,ew,ex,eS),T[0]=ey,T[1]=ew,T[2]=ex,T[3]=eS),(ez=g.cull_enable)!==_.cull_enable&&(ez?p.enable(2884):p.disable(2884),_.cull_enable=ez),(eF=g.cull_face)!==_.cull_face&&(p.cullFace(eF),_.cull_face=eF),(eA=g.frontFace)!==_.frontFace&&(p.frontFace(eA),_.frontFace=eA),(ek=g.lineWidth)!==_.lineWidth&&(p.lineWidth(ek),_.lineWidth=ek),(eW=g.polygonOffset_enable)!==_.polygonOffset_enable&&(eW?p.enable(32823):p.disable(32823),_.polygonOffset_enable=eW),eO=M[0],eH=M[1],(eO!==N[0]||eH!==N[1])&&(p.polygonOffset(eO,eH),N[0]=eO,N[1]=eH),(eB=g.sample_alpha)!==_.sample_alpha&&(eB?p.enable(32926):p.disable(32926),_.sample_alpha=eB),(eI=g.sample_enable)!==_.sample_enable&&(eI?p.enable(32928):p.disable(32928),_.sample_enable=eI),eP=L[0],eE=L[1],(eP!==C[0]||eE!==C[1])&&(p.sampleCoverage(eP,eE),C[0]=eP,C[1]=eE),(eT=g.stencil_enable)!==_.stencil_enable&&(eT?p.enable(2960):p.disable(2960),_.stencil_enable=eT),(eM=g.stencil_mask)!==_.stencil_mask&&(p.stencilMask(eM),_.stencil_mask=eM),eN=V[0],eL=V[1],eC=V[2],(eN!==D[0]||eL!==D[1]||eC!==D[2])&&(p.stencilFunc(eN,eL,eC),D[0]=eN,D[1]=eL,D[2]=eC),eV=G[0],eD=G[1],eG=G[2],eR=G[3],(eV!==R[0]||eD!==R[1]||eG!==R[2]||eR!==R[3])&&(p.stencilOpSeparate(eV,eD,eG,eR),R[0]=eV,R[1]=eD,R[2]=eG,R[3]=eR),eq=q[0],ej=q[1],eZ=q[2],eY=q[3],(eq!==j[0]||ej!==j[1]||eZ!==j[2]||eY!==j[3])&&(p.stencilOpSeparate(eq,ej,eZ,eY),j[0]=eq,j[1]=ej,j[2]=eZ,j[3]=eY),(e$=g.scissor_enable)!==_.scissor_enable&&(e$?p.enable(3089):p.disable(3089),_.scissor_enable=e$)),d=m.framebufferWidth,u=m.framebufferHeight,b=m.viewportWidth,m.viewportWidth=d,h=m.viewportHeight,m.viewportHeight=u,p.viewport(0,0,d,u),X[0]=0,X[1]=0,X[2]=d,X[3]=u,w=m.framebufferWidth,Z=m.framebufferHeight,p.scissor(0,0,w,Z),Y[0]=0,Y[1]=0,Y[2]=w,Y[3]=Z,($=_.profile)&&(U=performance.now(),t.count++),p.useProgram(r.program),Q=F.angle_instanced_arrays,S.setVAO(null),(K=x[J=a.location]).buffer||p.enableVertexAttribArray(J),(5126!==K.type||2!==K.size||K.buffer!==n||!1!==K.normalized||0!==K.offset||0!==K.stride)&&(p.bindBuffer(34962,n.buffer),p.vertexAttribPointer(J,2,5126,!1,0,0),K.type=5126,K.size=2,K.buffer=n,K.normalized=!1,K.offset=0,K.stride=0),0!==K.divisor&&(Q.vertexAttribDivisorANGLE(J,0),K.divisor=0),(ee=v.elements)?p.bindBuffer(34963,ee.buffer.buffer):S.currentVAO&&(ee=y.getElements(S.currentVAO.elements))&&p.bindBuffer(34963,ee.buffer.buffer),et=v.offset,(ei=v.instances)>0?ee?Q.drawElementsInstancedANGLE(5,4,ee.type,et<<(ee.type-5121>>1),ei):Q.drawArraysInstancedANGLE(5,et,4,ei):ei<0&&(ee?p.drawElements(5,4,ee.type,et<<(ee.type-5121>>1)):p.drawArrays(5,et,4)),_.dirty=!0,S.setVAO(null),z.next=o,m.framebufferWidth=f,m.framebufferHeight=c,m.viewportWidth=b,m.viewportHeight=h,$&&(t.cpuTime+=performance.now()-U)},scope:function(e,r,a){var p,g,y,x,S,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Y,X,U,Q,J,K,ee,et,ei,er,en;p=i.call(this,m,e,a),g=z.getFramebuffer(p),y=z.next,z.next=g,x=m.framebufferWidth,m.framebufferWidth=g?g.width:m.drawingBufferWidth,S=m.framebufferHeight,m.framebufferHeight=g?g.height:m.drawingBufferHeight,F=m.framebufferWidth,A=m.framebufferHeight,k=m.viewportWidth,m.viewportWidth=F,W=m.viewportHeight,m.viewportHeight=A,O=$[0],$[0]=l,H=$[1],$[1]=s,B=$[2],$[2]=F,I=$[3],$[3]=A,P=m.framebufferWidth,E=m.framebufferHeight,T=Z[0],Z[0]=o,M=Z[1],Z[1]=f,N=Z[2],Z[2]=P,L=Z[3],Z[3]=E,(C=_.profile)&&(V=performance.now(),t.count++),D=v.count,v.count=c,G=v.primitive,v.primitive=d,R=u.state,u.state=1,q=u.x,u.x=0,j=u.y,u.y=0,Y=u.z,u.z=0,X=u.w,u.w=0,U=u.buffer,u.buffer=n,Q=u.size,u.size=2,J=u.normalized,u.normalized=!1,K=u.type,u.type=5126,ee=u.offset,u.offset=0,et=u.stride,u.stride=0,ei=u.divisor,u.divisor=0,er=w.vert,w.vert=b,en=w.frag,w.frag=h,_.dirty=!0,r(m,e,a),z.next=y,m.framebufferWidth=x,m.framebufferHeight=S,m.viewportWidth=k,m.viewportHeight=W,$[0]=O,$[1]=H,$[2]=B,$[3]=I,Z[0]=T,Z[1]=M,Z[2]=N,Z[3]=L,C&&(t.cpuTime+=performance.now()-V),v.count=D,v.primitive=G,u.state=R,u.x=q,u.y=j,u.z=Y,u.w=X,u.buffer=U,u.size=Q,u.normalized=J,u.type=K,u.offset=ee,u.stride=et,u.divisor=ei,w.vert=er,w.frag=en,_.dirty=!0},batch:function(e,l){var s,o,f,c,d,u,b,h,w,Z,$,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ;for(F.angle_instanced_arrays,_.dirty&&((u=g.dither)!==_.dither&&(u?p.enable(3024):p.disable(3024),_.dither=u),(b=g.blend_enable)!==_.blend_enable&&(b?p.enable(3042):p.disable(3042),_.blend_enable=b),h=A[0],w=A[1],Z=A[2],$=A[3],(h!==k[0]||w!==k[1]||Z!==k[2]||$!==k[3])&&(p.blendColor(h,w,Z,$),k[0]=h,k[1]=w,k[2]=Z,k[3]=$),U=W[0],Q=W[1],(U!==O[0]||Q!==O[1])&&(p.blendEquationSeparate(U,Q),O[0]=U,O[1]=Q),J=H[0],K=H[1],ee=H[2],et=H[3],(J!==B[0]||K!==B[1]||ee!==B[2]||et!==B[3])&&(p.blendFuncSeparate(J,K,ee,et),B[0]=J,B[1]=K,B[2]=ee,B[3]=et),(ei=g.depth_enable)!==_.depth_enable&&(ei?p.enable(2929):p.disable(2929),_.depth_enable=ei),(er=g.depth_func)!==_.depth_func&&(p.depthFunc(er),_.depth_func=er),en=I[0],ea=I[1],(en!==P[0]||ea!==P[1])&&(p.depthRange(en,ea),P[0]=en,P[1]=ea),(el=g.depth_mask)!==_.depth_mask&&(p.depthMask(el),_.depth_mask=el),es=E[0],eo=E[1],ef=E[2],ec=E[3],(es!==T[0]||eo!==T[1]||ef!==T[2]||ec!==T[3])&&(p.colorMask(es,eo,ef,ec),T[0]=es,T[1]=eo,T[2]=ef,T[3]=ec),(ed=g.cull_enable)!==_.cull_enable&&(ed?p.enable(2884):p.disable(2884),_.cull_enable=ed),(eu=g.cull_face)!==_.cull_face&&(p.cullFace(eu),_.cull_face=eu),(eb=g.frontFace)!==_.frontFace&&(p.frontFace(eb),_.frontFace=eb),(eh=g.lineWidth)!==_.lineWidth&&(p.lineWidth(eh),_.lineWidth=eh),(ep=g.polygonOffset_enable)!==_.polygonOffset_enable&&(ep?p.enable(32823):p.disable(32823),_.polygonOffset_enable=ep),em=M[0],eg=M[1],(em!==N[0]||eg!==N[1])&&(p.polygonOffset(em,eg),N[0]=em,N[1]=eg),(e_=g.sample_alpha)!==_.sample_alpha&&(e_?p.enable(32926):p.disable(32926),_.sample_alpha=e_),(ev=g.sample_enable)!==_.sample_enable&&(ev?p.enable(32928):p.disable(32928),_.sample_enable=ev),ey=L[0],ew=L[1],(ey!==C[0]||ew!==C[1])&&(p.sampleCoverage(ey,ew),C[0]=ey,C[1]=ew),(ex=g.stencil_enable)!==_.stencil_enable&&(ex?p.enable(2960):p.disable(2960),_.stencil_enable=ex),(eS=g.stencil_mask)!==_.stencil_mask&&(p.stencilMask(eS),_.stencil_mask=eS),ez=V[0],eF=V[1],eA=V[2],(ez!==D[0]||eF!==D[1]||eA!==D[2])&&(p.stencilFunc(ez,eF,eA),D[0]=ez,D[1]=eF,D[2]=eA),ek=G[0],eW=G[1],eO=G[2],eH=G[3],(ek!==R[0]||eW!==R[1]||eO!==R[2]||eH!==R[3])&&(p.stencilOpSeparate(ek,eW,eO,eH),R[0]=ek,R[1]=eW,R[2]=eO,R[3]=eH),eB=q[0],eI=q[1],eP=q[2],eE=q[3],(eB!==j[0]||eI!==j[1]||eP!==j[2]||eE!==j[3])&&(p.stencilOpSeparate(eB,eI,eP,eE),j[0]=eB,j[1]=eI,j[2]=eP,j[3]=eE),(eT=g.scissor_enable)!==_.scissor_enable&&(eT?p.enable(3089):p.disable(3089),_.scissor_enable=eT)),(s=_.profile)&&(o=performance.now(),t.count+=l),p.useProgram(r.program),f=F.angle_instanced_arrays,S.setVAO(null),(eN=x[eM=a.location]).buffer||p.enableVertexAttribArray(eM),(5126!==eN.type||2!==eN.size||eN.buffer!==n||!1!==eN.normalized||0!==eN.offset||0!==eN.stride)&&(p.bindBuffer(34962,n.buffer),p.vertexAttribPointer(eM,2,5126,!1,0,0),eN.type=5126,eN.size=2,eN.buffer=n,eN.normalized=!1,eN.offset=0,eN.stride=0),0!==eN.divisor&&(f.vertexAttribDivisorANGLE(eM,0),eN.divisor=0),(eL=v.elements)?p.bindBuffer(34963,eL.buffer.buffer):S.currentVAO&&(eL=y.getElements(S.currentVAO.elements))&&p.bindBuffer(34963,eL.buffer.buffer),eC=v.offset,eV=v.instances,c=0;c<l;++c)d=e[c],eD=i.call(this,m,d,c),eG=z.getFramebuffer(eD),eR=z.next,z.next=eG,eq=m.framebufferWidth,m.framebufferWidth=eG?eG.width:m.drawingBufferWidth,ej=m.framebufferHeight,m.framebufferHeight=eG?eG.height:m.drawingBufferHeight,eG!==z.cur&&(eG?p.bindFramebuffer(36160,eG.framebuffer):p.bindFramebuffer(36160,null),z.cur=eG),eZ=m.framebufferWidth,eY=m.framebufferHeight,e$=m.viewportWidth,m.viewportWidth=eZ,eX=m.viewportHeight,m.viewportHeight=eY,p.viewport(0,0,eZ,eY),X[0]=0,X[1]=0,X[2]=eZ,X[3]=eY,eU=m.framebufferWidth,eQ=m.framebufferHeight,p.scissor(0,0,eU,eQ),Y[0]=0,Y[1]=0,Y[2]=eU,Y[3]=eQ,eV>0?eL?f.drawElementsInstancedANGLE(5,4,eL.type,eC<<(eL.type-5121>>1),eV):f.drawArraysInstancedANGLE(5,eC,4,eV):eV<0&&(eL?p.drawElements(5,4,eL.type,eC<<(eL.type-5121>>1)):p.drawArrays(5,eC,4)),z.next=eR,m.framebufferWidth=eq,m.framebufferHeight=ej,m.viewportWidth=e$,m.viewportHeight=eX;_.dirty=!0,S.setVAO(null),s&&(t.cpuTime+=performance.now()-o)}}},"0313f92b852b73f25a96e0578ae69b31e2d4866f1f8cfd75345ecb3cf4ca66c6":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q){var j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA;return j=e.gl,Z=e.context,e.strings,Y=e.next,$=e.current,X=e.draw,U=e.elements,e.buffer,Q=e.shader,J=e.attributes,K=e.vao,ee=e.uniforms,et=e.framebuffer,ei=e.extensions,e.timer,e.isBufferArgs,er=Y.blend_color,en=$.blend_color,ea=Y.blend_equation,el=$.blend_equation,es=Y.blend_func,eo=$.blend_func,ef=Y.depth_range,ec=$.depth_range,ed=Y.colorMask,eu=$.colorMask,eb=Y.polygonOffset_offset,eh=$.polygonOffset_offset,ep=Y.sample_coverage,em=$.sample_coverage,eg=Y.stencil_func,e_=$.stencil_func,ev=Y.stencil_opFront,ey=$.stencil_opFront,ew=Y.stencil_opBack,ex=$.stencil_opBack,eS=Y.scissor_box,ez=$.scissor_box,eF=Y.viewport,eA=$.viewport,{draw:function(e){var v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,Q,ee,ea,es,eS,eF,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2;ei.angle_instanced_arrays,v=i.call(this,Z,e,0),y=et.getFramebuffer(v),w=et.next,et.next=y,x=Z.framebufferWidth,Z.framebufferWidth=y?y.width:Z.drawingBufferWidth,S=Z.framebufferHeight,Z.framebufferHeight=y?y.height:Z.drawingBufferHeight,y!==et.cur&&(y?j.bindFramebuffer(36160,y.framebuffer):j.bindFramebuffer(36160,null),et.cur=y),$.dirty&&((q=Y.dither)!==$.dither&&(q?j.enable(3024):j.disable(3024),$.dither=q),Q=er[0],ee=er[1],ea=er[2],es=er[3],(Q!==en[0]||ee!==en[1]||ea!==en[2]||es!==en[3])&&(j.blendColor(Q,ee,ea,es),en[0]=Q,en[1]=ee,en[2]=ea,en[3]=es),(eS=Y.depth_func)!==$.depth_func&&(j.depthFunc(eS),$.depth_func=eS),eF=ef[0],ek=ef[1],(eF!==ec[0]||ek!==ec[1])&&(j.depthRange(eF,ek),ec[0]=eF,ec[1]=ek),eW=ed[0],eO=ed[1],eH=ed[2],eB=ed[3],(eW!==eu[0]||eO!==eu[1]||eH!==eu[2]||eB!==eu[3])&&(j.colorMask(eW,eO,eH,eB),eu[0]=eW,eu[1]=eO,eu[2]=eH,eu[3]=eB),(eI=Y.cull_enable)!==$.cull_enable&&(eI?j.enable(2884):j.disable(2884),$.cull_enable=eI),(eP=Y.cull_face)!==$.cull_face&&(j.cullFace(eP),$.cull_face=eP),(eE=Y.frontFace)!==$.frontFace&&(j.frontFace(eE),$.frontFace=eE),(eT=Y.lineWidth)!==$.lineWidth&&(j.lineWidth(eT),$.lineWidth=eT),(eM=Y.polygonOffset_enable)!==$.polygonOffset_enable&&(eM?j.enable(32823):j.disable(32823),$.polygonOffset_enable=eM),eN=eb[0],eL=eb[1],(eN!==eh[0]||eL!==eh[1])&&(j.polygonOffset(eN,eL),eh[0]=eN,eh[1]=eL),(eC=Y.sample_alpha)!==$.sample_alpha&&(eC?j.enable(32926):j.disable(32926),$.sample_alpha=eC),(eV=Y.sample_enable)!==$.sample_enable&&(eV?j.enable(32928):j.disable(32928),$.sample_enable=eV),eD=ep[0],eG=ep[1],(eD!==em[0]||eG!==em[1])&&(j.sampleCoverage(eD,eG),em[0]=eD,em[1]=eG),(eR=Y.stencil_mask)!==$.stencil_mask&&(j.stencilMask(eR),$.stencil_mask=eR),eq=eg[0],ej=eg[1],eZ=eg[2],(eq!==e_[0]||ej!==e_[1]||eZ!==e_[2])&&(j.stencilFunc(eq,ej,eZ),e_[0]=eq,e_[1]=ej,e_[2]=eZ),eY=ev[0],e$=ev[1],eX=ev[2],eU=ev[3],(eY!==ey[0]||e$!==ey[1]||eX!==ey[2]||eU!==ey[3])&&(j.stencilOpSeparate(eY,e$,eX,eU),ey[0]=eY,ey[1]=e$,ey[2]=eX,ey[3]=eU),eQ=ew[0],eJ=ew[1],eK=ew[2],e0=ew[3],(eQ!==ex[0]||eJ!==ex[1]||eK!==ex[2]||e0!==ex[3])&&(j.stencilOpSeparate(eQ,eJ,eK,e0),ex[0]=eQ,ex[1]=eJ,ex[2]=eK,ex[3]=e0),(e2=Y.scissor_enable)!==$.scissor_enable&&(e2?j.enable(3089):j.disable(3089),$.scissor_enable=e2)),z=Z.framebufferWidth,F=Z.framebufferHeight,A=Z.viewportWidth,Z.viewportWidth=z,k=Z.viewportHeight,Z.viewportHeight=F,j.viewport(0,0,z,F),eA[0]=0,eA[1]=0,eA[2]=z,eA[3]=F,r?j.enable(3042):j.disable(3042),$.blend_enable=r,j.blendEquationSeparate(32774,32774),el[0]=32774,el[1]=32774,j.blendFuncSeparate(1,1,1,1),eo[0]=1,eo[1]=1,eo[2]=1,eo[3]=1,n?j.enable(2929):j.disable(2929),$.depth_enable=n,j.depthMask(a),$.depth_mask=a,W=Z.framebufferWidth,O=Z.framebufferHeight,j.scissor(0,0,W,O),ez[0]=0,ez[1]=0,ez[2]=W,ez[3]=O,l?j.enable(2960):j.disable(2960),$.stencil_enable=l,(H=$.profile)&&(B=performance.now(),t.count++),j.useProgram(s.program),I=ei.angle_instanced_arrays,K.setVAO(null),(E=J[P=f.location]).buffer||j.enableVertexAttribArray(P),(5126!==E.type||2!==E.size||E.buffer!==o||!1!==E.normalized||0!==E.offset||0!==E.stride)&&(j.bindBuffer(34962,o.buffer),j.vertexAttribPointer(P,2,5126,!1,0,0),E.type=5126,E.size=2,E.buffer=o,E.normalized=!1,E.offset=0,E.stride=0),0!==E.divisor&&(I.vertexAttribDivisorANGLE(P,0),E.divisor=0),T=d.call(this,Z,e,0),j.uniform1f(c.location,T),M=b.call(this,Z,e,0),j.uniform1f(u.location,M),N=p.call(this,Z,e,0),j.uniform1f(h.location,N),(L=g.call(this,Z,e,0))&&"framebuffer"===L._reglType&&(L=L.color[0]),C=L._texture,j.uniform1i(m.location,C.bind()),(V=X.elements)?j.bindBuffer(34963,V.buffer.buffer):K.currentVAO&&(V=U.getElements(K.currentVAO.elements))&&j.bindBuffer(34963,V.buffer.buffer),D=X.offset,(G=_.call(this,Z,e,0))&&((R=X.instances)>0?V?I.drawElementsInstancedANGLE(0,G,V.type,D<<(V.type-5121>>1),R):I.drawArraysInstancedANGLE(0,D,G,R):R<0&&(V?j.drawElements(0,G,V.type,D<<(V.type-5121>>1)):j.drawArrays(0,D,G)),$.dirty=!0,K.setVAO(null),et.next=w,Z.framebufferWidth=x,Z.framebufferHeight=S,Z.viewportWidth=A,Z.viewportHeight=k,H&&(t.cpuTime+=performance.now()-B),C.unbind())},scope:function(e,r,n){var a,l,s,f,c,u,h,m,D,G,R,q,j,U,J,K,ei,er,en,el,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,ez,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej;a=i.call(this,Z,e,n),l=et.getFramebuffer(a),s=et.next,et.next=l,f=Z.framebufferWidth,Z.framebufferWidth=l?l.width:Z.drawingBufferWidth,c=Z.framebufferHeight,Z.framebufferHeight=l?l.height:Z.drawingBufferHeight,u=Z.framebufferWidth,h=Z.framebufferHeight,m=Z.viewportWidth,Z.viewportWidth=u,D=Z.viewportHeight,Z.viewportHeight=h,G=eF[0],eF[0]=v,R=eF[1],eF[1]=y,q=eF[2],eF[2]=u,j=eF[3],eF[3]=h,U=Y.blend_enable,Y.blend_enable=w,J=ea[0],ea[0]=x,K=ea[1],ea[1]=S,ei=es[0],es[0]=z,er=es[1],es[1]=F,en=es[2],es[2]=A,el=es[3],es[3]=k,eo=Y.depth_enable,Y.depth_enable=W,ef=Y.depth_mask,Y.depth_mask=O,ec=Z.framebufferWidth,ed=Z.framebufferHeight,eu=eS[0],eS[0]=H,eb=eS[1],eS[1]=B,eh=eS[2],eS[2]=ec,ep=eS[3],eS[3]=ed,em=Y.stencil_enable,Y.stencil_enable=I,(eg=$.profile)&&(e_=performance.now(),t.count++),ev=_.call(this,Z,e,n),ey=X.count,X.count=ev,ew=X.primitive,X.primitive=P,ex=g.call(this,Z,e,n),ez=ee[E],ee[E]=ex,eA=p.call(this,Z,e,n),ek=ee[T],ee[T]=eA,eW=b.call(this,Z,e,n),eO=ee[M],ee[M]=eW,eH=d.call(this,Z,e,n),eB=ee[N],ee[N]=eH,eI=L.state,L.state=1,eP=L.x,L.x=0,eE=L.y,L.y=0,eT=L.z,L.z=0,eM=L.w,L.w=0,eN=L.buffer,L.buffer=o,eL=L.size,L.size=2,eC=L.normalized,L.normalized=!1,eV=L.type,L.type=5126,eD=L.offset,L.offset=0,eG=L.stride,L.stride=0,eR=L.divisor,L.divisor=0,eq=Q.vert,Q.vert=C,ej=Q.frag,Q.frag=V,$.dirty=!0,r(Z,e,n),et.next=s,Z.framebufferWidth=f,Z.framebufferHeight=c,Z.viewportWidth=m,Z.viewportHeight=D,eF[0]=G,eF[1]=R,eF[2]=q,eF[3]=j,Y.blend_enable=U,ea[0]=J,ea[1]=K,es[0]=ei,es[1]=er,es[2]=en,es[3]=el,Y.depth_enable=eo,Y.depth_mask=ef,eS[0]=eu,eS[1]=eb,eS[2]=eh,eS[3]=ep,Y.stencil_enable=em,eg&&(t.cpuTime+=performance.now()-e_),X.count=ey,X.primitive=ew,ee[E]=ez,ee[T]=ek,ee[M]=eO,ee[N]=eB,L.state=eI,L.x=eP,L.y=eE,L.z=eT,L.w=eM,L.buffer=eN,L.size=eL,L.normalized=eC,L.type=eV,L.offset=eD,L.stride=eG,L.divisor=eR,Q.vert=eq,Q.frag=ej,$.dirty=!0},batch:function(e,r){var n,a,l,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,Q,ee,ea,es,eS,eF,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9;for(ei.angle_instanced_arrays,$.dirty&&((w=Y.dither)!==$.dither&&(w?j.enable(3024):j.disable(3024),$.dither=w),x=er[0],S=er[1],z=er[2],F=er[3],(x!==en[0]||S!==en[1]||z!==en[2]||F!==en[3])&&(j.blendColor(x,S,z,F),en[0]=x,en[1]=S,en[2]=z,en[3]=F),(A=Y.depth_func)!==$.depth_func&&(j.depthFunc(A),$.depth_func=A),k=ef[0],W=ef[1],(k!==ec[0]||W!==ec[1])&&(j.depthRange(k,W),ec[0]=k,ec[1]=W),O=ed[0],H=ed[1],B=ed[2],I=ed[3],(O!==eu[0]||H!==eu[1]||B!==eu[2]||I!==eu[3])&&(j.colorMask(O,H,B,I),eu[0]=O,eu[1]=H,eu[2]=B,eu[3]=I),(P=Y.cull_enable)!==$.cull_enable&&(P?j.enable(2884):j.disable(2884),$.cull_enable=P),(E=Y.cull_face)!==$.cull_face&&(j.cullFace(E),$.cull_face=E),(T=Y.frontFace)!==$.frontFace&&(j.frontFace(T),$.frontFace=T),(M=Y.lineWidth)!==$.lineWidth&&(j.lineWidth(M),$.lineWidth=M),(N=Y.polygonOffset_enable)!==$.polygonOffset_enable&&(N?j.enable(32823):j.disable(32823),$.polygonOffset_enable=N),L=eb[0],C=eb[1],(L!==eh[0]||C!==eh[1])&&(j.polygonOffset(L,C),eh[0]=L,eh[1]=C),(V=Y.sample_alpha)!==$.sample_alpha&&(V?j.enable(32926):j.disable(32926),$.sample_alpha=V),(Q=Y.sample_enable)!==$.sample_enable&&(Q?j.enable(32928):j.disable(32928),$.sample_enable=Q),ee=ep[0],ea=ep[1],(ee!==em[0]||ea!==em[1])&&(j.sampleCoverage(ee,ea),em[0]=ee,em[1]=ea),(es=Y.stencil_mask)!==$.stencil_mask&&(j.stencilMask(es),$.stencil_mask=es),eS=eg[0],eF=eg[1],ek=eg[2],(eS!==e_[0]||eF!==e_[1]||ek!==e_[2])&&(j.stencilFunc(eS,eF,ek),e_[0]=eS,e_[1]=eF,e_[2]=ek),eW=ev[0],eO=ev[1],eH=ev[2],eB=ev[3],(eW!==ey[0]||eO!==ey[1]||eH!==ey[2]||eB!==ey[3])&&(j.stencilOpSeparate(eW,eO,eH,eB),ey[0]=eW,ey[1]=eO,ey[2]=eH,ey[3]=eB),eI=ew[0],eP=ew[1],eE=ew[2],eT=ew[3],(eI!==ex[0]||eP!==ex[1]||eE!==ex[2]||eT!==ex[3])&&(j.stencilOpSeparate(eI,eP,eE,eT),ex[0]=eI,ex[1]=eP,ex[2]=eE,ex[3]=eT),(eM=Y.scissor_enable)!==$.scissor_enable&&(eM?j.enable(3089):j.disable(3089),$.scissor_enable=eM)),D?j.enable(3042):j.disable(3042),$.blend_enable=D,j.blendEquationSeparate(32774,32774),el[0]=32774,el[1]=32774,j.blendFuncSeparate(1,1,1,1),eo[0]=1,eo[1]=1,eo[2]=1,eo[3]=1,G?j.enable(2929):j.disable(2929),$.depth_enable=G,j.depthMask(R),$.depth_mask=R,q?j.enable(2960):j.disable(2960),$.stencil_enable=q,(n=$.profile)&&(a=performance.now(),t.count+=r),j.useProgram(s.program),l=ei.angle_instanced_arrays,K.setVAO(null),(eL=J[eN=f.location]).buffer||j.enableVertexAttribArray(eN),(5126!==eL.type||2!==eL.size||eL.buffer!==o||!1!==eL.normalized||0!==eL.offset||0!==eL.stride)&&(j.bindBuffer(34962,o.buffer),j.vertexAttribPointer(eN,2,5126,!1,0,0),eL.type=5126,eL.size=2,eL.buffer=o,eL.normalized=!1,eL.offset=0,eL.stride=0),0!==eL.divisor&&(l.vertexAttribDivisorANGLE(eN,0),eL.divisor=0),eC=p.call(this,Z,y,v),j.uniform1f(h.location,eC),(eV=g.call(this,Z,y,v))&&"framebuffer"===eV._reglType&&(eV=eV.color[0]),eD=eV._texture,j.uniform1i(m.location,eD.bind()),(eG=X.elements)?j.bindBuffer(34963,eG.buffer.buffer):K.currentVAO&&(eG=U.getElements(K.currentVAO.elements))&&j.bindBuffer(34963,eG.buffer.buffer),eR=X.offset,eq=_.call(this,Z,y,v),ej=X.instances,v=0;v<r;++v)y=e[v],eZ=i.call(this,Z,y,v),eY=et.getFramebuffer(eZ),e$=et.next,et.next=eY,eX=Z.framebufferWidth,Z.framebufferWidth=eY?eY.width:Z.drawingBufferWidth,eU=Z.framebufferHeight,Z.framebufferHeight=eY?eY.height:Z.drawingBufferHeight,eY!==et.cur&&(eY?j.bindFramebuffer(36160,eY.framebuffer):j.bindFramebuffer(36160,null),et.cur=eY),eQ=Z.framebufferWidth,eJ=Z.framebufferHeight,eK=Z.viewportWidth,Z.viewportWidth=eQ,e0=Z.viewportHeight,Z.viewportHeight=eJ,j.viewport(0,0,eQ,eJ),eA[0]=0,eA[1]=0,eA[2]=eQ,eA[3]=eJ,e2=Z.framebufferWidth,e1=Z.framebufferHeight,j.scissor(0,0,e2,e1),ez[0]=0,ez[1]=0,ez[2]=e2,ez[3]=e1,e3=d.call(this,Z,y,v),v&&e4===e3||(e4=e3,j.uniform1f(c.location,e3)),e6=b.call(this,Z,y,v),v&&e9===e6||(e9=e6,j.uniform1f(u.location,e6)),eq&&(ej>0?eG?l.drawElementsInstancedANGLE(0,eq,eG.type,eR<<(eG.type-5121>>1),ej):l.drawArraysInstancedANGLE(0,eR,eq,ej):ej<0&&(eG?j.drawElements(0,eq,eG.type,eR<<(eG.type-5121>>1)):j.drawArrays(0,eR,eq)),et.next=e$,Z.framebufferWidth=eX,Z.framebufferHeight=eU,Z.viewportWidth=eK,Z.viewportHeight=e0);eD.unbind(),$.dirty=!0,K.setVAO(null),n&&(t.cpuTime+=performance.now()-a)}}},bcafcc30f5fd1e9f176e7deb4f9067870505d786fa0f2b66a991174be81e4f1a:function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en){var ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV;return ea=e.gl,el=e.context,e.strings,es=e.next,eo=e.current,ef=e.draw,ec=e.elements,e.buffer,ed=e.shader,eu=e.attributes,eb=e.vao,eh=e.uniforms,ep=e.framebuffer,em=e.extensions,e.timer,e.isBufferArgs,eg=es.blend_color,e_=eo.blend_color,ev=es.blend_equation,ey=eo.blend_equation,ew=es.blend_func,ex=eo.blend_func,eS=es.depth_range,ez=eo.depth_range,eF=es.colorMask,eA=eo.colorMask,ek=es.polygonOffset_offset,eW=eo.polygonOffset_offset,eO=es.sample_coverage,eH=eo.sample_coverage,eB=es.stencil_func,eI=eo.stencil_func,eP=es.stencil_opFront,eE=eo.stencil_opFront,eT=es.stencil_opBack,eM=eo.stencil_opBack,eN=es.scissor_box,eL=eo.scissor_box,eC=es.viewport,eV=eo.viewport,{draw:function(e){var k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ed,eh,ev,ew,eN,eC,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr;em.angle_instanced_arrays,k=i.call(this,el,e,0),W=ep.getFramebuffer(k),O=ep.next,ep.next=W,H=el.framebufferWidth,el.framebufferWidth=W?W.width:el.drawingBufferWidth,B=el.framebufferHeight,el.framebufferHeight=W?W.height:el.drawingBufferHeight,W!==ep.cur&&(W?ea.bindFramebuffer(36160,W.framebuffer):ea.bindFramebuffer(36160,null),ep.cur=W),eo.dirty&&((ei=es.dither)!==eo.dither&&(ei?ea.enable(3024):ea.disable(3024),eo.dither=ei),er=eg[0],en=eg[1],ed=eg[2],eh=eg[3],(er!==e_[0]||en!==e_[1]||ed!==e_[2]||eh!==e_[3])&&(ea.blendColor(er,en,ed,eh),e_[0]=er,e_[1]=en,e_[2]=ed,e_[3]=eh),(ev=es.depth_func)!==eo.depth_func&&(ea.depthFunc(ev),eo.depth_func=ev),ew=eS[0],eN=eS[1],(ew!==ez[0]||eN!==ez[1])&&(ea.depthRange(ew,eN),ez[0]=ew,ez[1]=eN),eC=eF[0],eD=eF[1],eG=eF[2],eR=eF[3],(eC!==eA[0]||eD!==eA[1]||eG!==eA[2]||eR!==eA[3])&&(ea.colorMask(eC,eD,eG,eR),eA[0]=eC,eA[1]=eD,eA[2]=eG,eA[3]=eR),(eq=es.cull_enable)!==eo.cull_enable&&(eq?ea.enable(2884):ea.disable(2884),eo.cull_enable=eq),(ej=es.cull_face)!==eo.cull_face&&(ea.cullFace(ej),eo.cull_face=ej),(eZ=es.frontFace)!==eo.frontFace&&(ea.frontFace(eZ),eo.frontFace=eZ),(eY=es.lineWidth)!==eo.lineWidth&&(ea.lineWidth(eY),eo.lineWidth=eY),(e$=es.polygonOffset_enable)!==eo.polygonOffset_enable&&(e$?ea.enable(32823):ea.disable(32823),eo.polygonOffset_enable=e$),eX=ek[0],eU=ek[1],(eX!==eW[0]||eU!==eW[1])&&(ea.polygonOffset(eX,eU),eW[0]=eX,eW[1]=eU),(eQ=es.sample_alpha)!==eo.sample_alpha&&(eQ?ea.enable(32926):ea.disable(32926),eo.sample_alpha=eQ),(eJ=es.sample_enable)!==eo.sample_enable&&(eJ?ea.enable(32928):ea.disable(32928),eo.sample_enable=eJ),eK=eO[0],e0=eO[1],(eK!==eH[0]||e0!==eH[1])&&(ea.sampleCoverage(eK,e0),eH[0]=eK,eH[1]=e0),(e2=es.stencil_mask)!==eo.stencil_mask&&(ea.stencilMask(e2),eo.stencil_mask=e2),e1=eB[0],e3=eB[1],e4=eB[2],(e1!==eI[0]||e3!==eI[1]||e4!==eI[2])&&(ea.stencilFunc(e1,e3,e4),eI[0]=e1,eI[1]=e3,eI[2]=e4),e6=eP[0],e9=eP[1],e8=eP[2],e5=eP[3],(e6!==eE[0]||e9!==eE[1]||e8!==eE[2]||e5!==eE[3])&&(ea.stencilOpSeparate(e6,e9,e8,e5),eE[0]=e6,eE[1]=e9,eE[2]=e8,eE[3]=e5),e7=eT[0],te=eT[1],tt=eT[2],ti=eT[3],(e7!==eM[0]||te!==eM[1]||tt!==eM[2]||ti!==eM[3])&&(ea.stencilOpSeparate(e7,te,tt,ti),eM[0]=e7,eM[1]=te,eM[2]=tt,eM[3]=ti),(tr=es.scissor_enable)!==eo.scissor_enable&&(tr?ea.enable(3089):ea.disable(3089),eo.scissor_enable=tr)),I=el.framebufferWidth,P=el.framebufferHeight,E=el.viewportWidth,el.viewportWidth=I,T=el.viewportHeight,el.viewportHeight=P,ea.viewport(0,0,I,P),eV[0]=0,eV[1]=0,eV[2]=I,eV[3]=P,r?ea.enable(3042):ea.disable(3042),eo.blend_enable=r,ea.blendEquationSeparate(32774,32774),ey[0]=32774,ey[1]=32774,ea.blendFuncSeparate(1,1,1,1),ex[0]=1,ex[1]=1,ex[2]=1,ex[3]=1,n?ea.enable(2929):ea.disable(2929),eo.depth_enable=n,ea.depthMask(a),eo.depth_mask=a,M=el.framebufferWidth,N=el.framebufferHeight,ea.scissor(0,0,M,N),eL[0]=0,eL[1]=0,eL[2]=M,eL[3]=N,l?ea.enable(2960):ea.disable(2960),eo.stencil_enable=l,(L=eo.profile)&&(C=performance.now(),t.count++),ea.useProgram(s.program),V=em.angle_instanced_arrays,eb.setVAO(null),(G=eu[D=f.location]).buffer||ea.enableVertexAttribArray(D),(5126!==G.type||2!==G.size||G.buffer!==o||!1!==G.normalized||0!==G.offset||0!==G.stride)&&(ea.bindBuffer(34962,o.buffer),ea.vertexAttribPointer(D,2,5126,!1,0,0),G.type=5126,G.size=2,G.buffer=o,G.normalized=!1,G.offset=0,G.stride=0),0!==G.divisor&&(V.vertexAttribDivisorANGLE(D,0),G.divisor=0),R=d.call(this,el,e,0),ea.uniform1f(c.location,R),q=b.call(this,el,e,0),ea.uniform1f(u.location,q),(j=p.call(this,el,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),Z=j._texture,ea.uniform1i(h.location,Z.bind()),Y=g.call(this,el,e,0),ea.uniform1f(m.location,Y),ea.uniform1f(_.location,12),($=y.call(this,el,e,0))&&"framebuffer"===$._reglType&&($=$.color[0]),X=$._texture,ea.uniform1i(v.location,X.bind()),U=x.call(this,el,e,0),ea.uniform1f(w.location,U),Q=z.call(this,el,e,0),ea.uniform1f(S.location,Q),J=A.call(this,el,e,0),ea.uniform1f(F.location,J),(K=ef.elements)?ea.bindBuffer(34963,K.buffer.buffer):eb.currentVAO&&(K=ec.getElements(eb.currentVAO.elements))&&ea.bindBuffer(34963,K.buffer.buffer),ee=ef.offset,(et=ef.instances)>0?K?V.drawElementsInstancedANGLE(5,4,K.type,ee<<(K.type-5121>>1),et):V.drawArraysInstancedANGLE(5,ee,4,et):et<0&&(K?ea.drawElements(5,4,K.type,ee<<(K.type-5121>>1)):ea.drawArrays(5,ee,4)),eo.dirty=!0,eb.setVAO(null),ep.next=O,el.framebufferWidth=H,el.framebufferHeight=B,el.viewportWidth=E,el.viewportHeight=T,L&&(t.cpuTime+=performance.now()-C),Z.unbind(),X.unbind()},scope:function(e,r,n){var a,l,s,f,c,u,h,m,_,v,w,S,F,et,ei,er,en,ea,ec,eu,eb,em,eg,e_,ey,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eL,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5;a=i.call(this,el,e,n),l=ep.getFramebuffer(a),s=ep.next,ep.next=l,f=el.framebufferWidth,el.framebufferWidth=l?l.width:el.drawingBufferWidth,c=el.framebufferHeight,el.framebufferHeight=l?l.height:el.drawingBufferHeight,u=el.framebufferWidth,h=el.framebufferHeight,m=el.viewportWidth,el.viewportWidth=u,_=el.viewportHeight,el.viewportHeight=h,v=eC[0],eC[0]=k,w=eC[1],eC[1]=W,S=eC[2],eC[2]=u,F=eC[3],eC[3]=h,et=es.blend_enable,es.blend_enable=O,ei=ev[0],ev[0]=H,er=ev[1],ev[1]=B,en=ew[0],ew[0]=I,ea=ew[1],ew[1]=P,ec=ew[2],ew[2]=E,eu=ew[3],ew[3]=T,eb=es.depth_enable,es.depth_enable=M,em=es.depth_mask,es.depth_mask=N,eg=el.framebufferWidth,e_=el.framebufferHeight,ey=eN[0],eN[0]=L,ex=eN[1],eN[1]=C,eS=eN[2],eN[2]=eg,ez=eN[3],eN[3]=e_,eF=es.stencil_enable,es.stencil_enable=V,(eA=eo.profile)&&(ek=performance.now(),t.count++),eW=ef.count,ef.count=D,eO=ef.primitive,ef.primitive=G,eH=eh[R],eh[R]=12,eB=y.call(this,el,e,n),eI=eh[q],eh[q]=eB,eP=b.call(this,el,e,n),eE=eh[j],eh[j]=eP,eT=p.call(this,el,e,n),eM=eh[Z],eh[Z]=eT,eL=g.call(this,el,e,n),eV=eh[Y],eh[Y]=eL,eD=d.call(this,el,e,n),eG=eh[$],eh[$]=eD,eR=x.call(this,el,e,n),eq=eh[X],eh[X]=eR,ej=z.call(this,el,e,n),eZ=eh[U],eh[U]=ej,eY=A.call(this,el,e,n),e$=eh[Q],eh[Q]=eY,eX=J.state,J.state=1,eU=J.x,J.x=0,eQ=J.y,J.y=0,eJ=J.z,J.z=0,eK=J.w,J.w=0,e0=J.buffer,J.buffer=o,e2=J.size,J.size=2,e1=J.normalized,J.normalized=!1,e3=J.type,J.type=5126,e4=J.offset,J.offset=0,e6=J.stride,J.stride=0,e9=J.divisor,J.divisor=0,e8=ed.vert,ed.vert=K,e5=ed.frag,ed.frag=ee,eo.dirty=!0,r(el,e,n),ep.next=s,el.framebufferWidth=f,el.framebufferHeight=c,el.viewportWidth=m,el.viewportHeight=_,eC[0]=v,eC[1]=w,eC[2]=S,eC[3]=F,es.blend_enable=et,ev[0]=ei,ev[1]=er,ew[0]=en,ew[1]=ea,ew[2]=ec,ew[3]=eu,es.depth_enable=eb,es.depth_mask=em,eN[0]=ey,eN[1]=ex,eN[2]=eS,eN[3]=ez,es.stencil_enable=eF,eA&&(t.cpuTime+=performance.now()-ek),ef.count=eW,ef.primitive=eO,eh[R]=eH,eh[q]=eI,eh[j]=eE,eh[Z]=eM,eh[Y]=eV,eh[$]=eG,eh[X]=eq,eh[U]=eZ,eh[Q]=e$,J.state=eX,J.x=eU,J.y=eQ,J.z=eJ,J.w=eK,J.buffer=e0,J.size=e2,J.normalized=e1,J.type=e3,J.offset=e4,J.stride=e6,J.divisor=e9,ed.vert=e8,ed.frag=e5,eo.dirty=!0},batch:function(e,r){var n,a,l,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,ed,eh,ev,ew,eN,eC,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt,ti,tr,tn,ta,tl,ts,to;for(em.angle_instanced_arrays,n=i.call(this,el,e,0),a=ep.getFramebuffer(n),l=ep.next,ep.next=a,k=el.framebufferWidth,el.framebufferWidth=a?a.width:el.drawingBufferWidth,W=el.framebufferHeight,el.framebufferHeight=a?a.height:el.drawingBufferHeight,a!==ep.cur&&(a?ea.bindFramebuffer(36160,a.framebuffer):ea.bindFramebuffer(36160,null),ep.cur=a),eo.dirty&&((V=es.dither)!==eo.dither&&(V?ea.enable(3024):ea.disable(3024),eo.dither=V),D=eg[0],G=eg[1],R=eg[2],q=eg[3],(D!==e_[0]||G!==e_[1]||R!==e_[2]||q!==e_[3])&&(ea.blendColor(D,G,R,q),e_[0]=D,e_[1]=G,e_[2]=R,e_[3]=q),(j=es.depth_func)!==eo.depth_func&&(ea.depthFunc(j),eo.depth_func=j),Z=eS[0],Y=eS[1],(Z!==ez[0]||Y!==ez[1])&&(ea.depthRange(Z,Y),ez[0]=Z,ez[1]=Y),$=eF[0],X=eF[1],U=eF[2],Q=eF[3],($!==eA[0]||X!==eA[1]||U!==eA[2]||Q!==eA[3])&&(ea.colorMask($,X,U,Q),eA[0]=$,eA[1]=X,eA[2]=U,eA[3]=Q),(J=es.cull_enable)!==eo.cull_enable&&(J?ea.enable(2884):ea.disable(2884),eo.cull_enable=J),(K=es.cull_face)!==eo.cull_face&&(ea.cullFace(K),eo.cull_face=K),(ee=es.frontFace)!==eo.frontFace&&(ea.frontFace(ee),eo.frontFace=ee),(ed=es.lineWidth)!==eo.lineWidth&&(ea.lineWidth(ed),eo.lineWidth=ed),(eh=es.polygonOffset_enable)!==eo.polygonOffset_enable&&(eh?ea.enable(32823):ea.disable(32823),eo.polygonOffset_enable=eh),ev=ek[0],ew=ek[1],(ev!==eW[0]||ew!==eW[1])&&(ea.polygonOffset(ev,ew),eW[0]=ev,eW[1]=ew),(eN=es.sample_alpha)!==eo.sample_alpha&&(eN?ea.enable(32926):ea.disable(32926),eo.sample_alpha=eN),(eC=es.sample_enable)!==eo.sample_enable&&(eC?ea.enable(32928):ea.disable(32928),eo.sample_enable=eC),eD=eO[0],eG=eO[1],(eD!==eH[0]||eG!==eH[1])&&(ea.sampleCoverage(eD,eG),eH[0]=eD,eH[1]=eG),(eR=es.stencil_mask)!==eo.stencil_mask&&(ea.stencilMask(eR),eo.stencil_mask=eR),eq=eB[0],ej=eB[1],eZ=eB[2],(eq!==eI[0]||ej!==eI[1]||eZ!==eI[2])&&(ea.stencilFunc(eq,ej,eZ),eI[0]=eq,eI[1]=ej,eI[2]=eZ),eY=eP[0],e$=eP[1],eX=eP[2],eU=eP[3],(eY!==eE[0]||e$!==eE[1]||eX!==eE[2]||eU!==eE[3])&&(ea.stencilOpSeparate(eY,e$,eX,eU),eE[0]=eY,eE[1]=e$,eE[2]=eX,eE[3]=eU),eQ=eT[0],eJ=eT[1],eK=eT[2],e0=eT[3],(eQ!==eM[0]||eJ!==eM[1]||eK!==eM[2]||e0!==eM[3])&&(ea.stencilOpSeparate(eQ,eJ,eK,e0),eM[0]=eQ,eM[1]=eJ,eM[2]=eK,eM[3]=e0),(e2=es.scissor_enable)!==eo.scissor_enable&&(e2?ea.enable(3089):ea.disable(3089),eo.scissor_enable=e2)),O=el.framebufferWidth,H=el.framebufferHeight,B=el.viewportWidth,el.viewportWidth=O,I=el.viewportHeight,el.viewportHeight=H,ea.viewport(0,0,O,H),eV[0]=0,eV[1]=0,eV[2]=O,eV[3]=H,et?ea.enable(3042):ea.disable(3042),eo.blend_enable=et,ea.blendEquationSeparate(32774,32774),ey[0]=32774,ey[1]=32774,ea.blendFuncSeparate(1,1,1,1),ex[0]=1,ex[1]=1,ex[2]=1,ex[3]=1,ei?ea.enable(2929):ea.disable(2929),eo.depth_enable=ei,ea.depthMask(er),eo.depth_mask=er,P=el.framebufferWidth,E=el.framebufferHeight,ea.scissor(0,0,P,E),eL[0]=0,eL[1]=0,eL[2]=P,eL[3]=E,en?ea.enable(2960):ea.disable(2960),eo.stencil_enable=en,(T=eo.profile)&&(M=performance.now(),t.count+=r),ea.useProgram(s.program),N=em.angle_instanced_arrays,eb.setVAO(null),(e3=eu[e1=f.location]).buffer||ea.enableVertexAttribArray(e1),(5126!==e3.type||2!==e3.size||e3.buffer!==o||!1!==e3.normalized||0!==e3.offset||0!==e3.stride)&&(ea.bindBuffer(34962,o.buffer),ea.vertexAttribPointer(e1,2,5126,!1,0,0),e3.type=5126,e3.size=2,e3.buffer=o,e3.normalized=!1,e3.offset=0,e3.stride=0),0!==e3.divisor&&(N.vertexAttribDivisorANGLE(e1,0),e3.divisor=0),e4=d.call(this,el,C,L),ea.uniform1f(c.location,e4),ea.uniform1f(_.location,12),(e6=y.call(this,el,C,L))&&"framebuffer"===e6._reglType&&(e6=e6.color[0]),e9=e6._texture,ea.uniform1i(v.location,e9.bind()),e8=x.call(this,el,C,L),ea.uniform1f(w.location,e8),e5=z.call(this,el,C,L),ea.uniform1f(S.location,e5),e7=A.call(this,el,C,L),ea.uniform1f(F.location,e7),(te=ef.elements)?ea.bindBuffer(34963,te.buffer.buffer):eb.currentVAO&&(te=ec.getElements(eb.currentVAO.elements))&&ea.bindBuffer(34963,te.buffer.buffer),tt=ef.offset,ti=ef.instances,L=0;L<r;++L)C=e[L],tr=b.call(this,el,C,L),L&&tn===tr||(tn=tr,ea.uniform1f(u.location,tr)),(ta=p.call(this,el,C,L))&&"framebuffer"===ta._reglType&&(ta=ta.color[0]),tl=ta._texture,ea.uniform1i(h.location,tl.bind()),ts=g.call(this,el,C,L),L&&to===ts||(to=ts,ea.uniform1f(m.location,ts)),ti>0?te?N.drawElementsInstancedANGLE(5,4,te.type,tt<<(te.type-5121>>1),ti):N.drawArraysInstancedANGLE(5,tt,4,ti):ti<0&&(te?ea.drawElements(5,4,te.type,tt<<(te.type-5121>>1)):ea.drawArrays(5,tt,4)),tl.unbind();e9.unbind(),eo.dirty=!0,eb.setVAO(null),ep.next=l,el.framebufferWidth=k,el.framebufferHeight=W,el.viewportWidth=B,el.viewportHeight=I,T&&(t.cpuTime+=performance.now()-M)}}},"5164528162536a2d3935adfd876eb6915b6448abe41d002329c46590ce9a98e6":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J){var K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE;return K=e.gl,ee=e.context,e.strings,et=e.next,ei=e.current,er=e.draw,en=e.elements,e.buffer,ea=e.shader,el=e.attributes,es=e.vao,eo=e.uniforms,ef=e.framebuffer,ec=e.extensions,e.timer,e.isBufferArgs,ed=et.blend_color,eu=ei.blend_color,eb=et.blend_equation,eh=ei.blend_equation,ep=et.blend_func,em=ei.blend_func,eg=et.depth_range,e_=ei.depth_range,ev=et.colorMask,ey=ei.colorMask,ew=et.polygonOffset_offset,ex=ei.polygonOffset_offset,eS=et.sample_coverage,ez=ei.sample_coverage,eF=et.stencil_func,eA=ei.stencil_func,ek=et.stencil_opFront,eW=ei.stencil_opFront,eO=et.stencil_opBack,eH=ei.stencil_opBack,eB=et.scissor_box,eI=ei.scissor_box,eP=et.viewport,eE=ei.viewport,{draw:function(e){var x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,ea,eo,eb,ep,eB,eP,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8;ec.angle_instanced_arrays,x=i.call(this,ee,e,0),S=ef.getFramebuffer(x),z=ef.next,ef.next=S,F=ee.framebufferWidth,ee.framebufferWidth=S?S.width:ee.drawingBufferWidth,A=ee.framebufferHeight,ee.framebufferHeight=S?S.height:ee.drawingBufferHeight,S!==ef.cur&&(S?K.bindFramebuffer(36160,S.framebuffer):K.bindFramebuffer(36160,null),ef.cur=S),ei.dirty&&((U=et.dither)!==ei.dither&&(U?K.enable(3024):K.disable(3024),ei.dither=U),Q=ed[0],J=ed[1],ea=ed[2],eo=ed[3],(Q!==eu[0]||J!==eu[1]||ea!==eu[2]||eo!==eu[3])&&(K.blendColor(Q,J,ea,eo),eu[0]=Q,eu[1]=J,eu[2]=ea,eu[3]=eo),(eb=et.depth_func)!==ei.depth_func&&(K.depthFunc(eb),ei.depth_func=eb),ep=eg[0],eB=eg[1],(ep!==e_[0]||eB!==e_[1])&&(K.depthRange(ep,eB),e_[0]=ep,e_[1]=eB),eP=ev[0],eT=ev[1],eM=ev[2],eN=ev[3],(eP!==ey[0]||eT!==ey[1]||eM!==ey[2]||eN!==ey[3])&&(K.colorMask(eP,eT,eM,eN),ey[0]=eP,ey[1]=eT,ey[2]=eM,ey[3]=eN),(eL=et.cull_enable)!==ei.cull_enable&&(eL?K.enable(2884):K.disable(2884),ei.cull_enable=eL),(eC=et.cull_face)!==ei.cull_face&&(K.cullFace(eC),ei.cull_face=eC),(eV=et.frontFace)!==ei.frontFace&&(K.frontFace(eV),ei.frontFace=eV),(eD=et.lineWidth)!==ei.lineWidth&&(K.lineWidth(eD),ei.lineWidth=eD),(eG=et.polygonOffset_enable)!==ei.polygonOffset_enable&&(eG?K.enable(32823):K.disable(32823),ei.polygonOffset_enable=eG),eR=ew[0],eq=ew[1],(eR!==ex[0]||eq!==ex[1])&&(K.polygonOffset(eR,eq),ex[0]=eR,ex[1]=eq),(ej=et.sample_alpha)!==ei.sample_alpha&&(ej?K.enable(32926):K.disable(32926),ei.sample_alpha=ej),(eZ=et.sample_enable)!==ei.sample_enable&&(eZ?K.enable(32928):K.disable(32928),ei.sample_enable=eZ),eY=eS[0],e$=eS[1],(eY!==ez[0]||e$!==ez[1])&&(K.sampleCoverage(eY,e$),ez[0]=eY,ez[1]=e$),(eX=et.stencil_mask)!==ei.stencil_mask&&(K.stencilMask(eX),ei.stencil_mask=eX),eU=eF[0],eQ=eF[1],eJ=eF[2],(eU!==eA[0]||eQ!==eA[1]||eJ!==eA[2])&&(K.stencilFunc(eU,eQ,eJ),eA[0]=eU,eA[1]=eQ,eA[2]=eJ),eK=ek[0],e0=ek[1],e2=ek[2],e1=ek[3],(eK!==eW[0]||e0!==eW[1]||e2!==eW[2]||e1!==eW[3])&&(K.stencilOpSeparate(eK,e0,e2,e1),eW[0]=eK,eW[1]=e0,eW[2]=e2,eW[3]=e1),e3=eO[0],e4=eO[1],e6=eO[2],e9=eO[3],(e3!==eH[0]||e4!==eH[1]||e6!==eH[2]||e9!==eH[3])&&(K.stencilOpSeparate(e3,e4,e6,e9),eH[0]=e3,eH[1]=e4,eH[2]=e6,eH[3]=e9),(e8=et.scissor_enable)!==ei.scissor_enable&&(e8?K.enable(3089):K.disable(3089),ei.scissor_enable=e8)),k=ee.framebufferWidth,W=ee.framebufferHeight,O=ee.viewportWidth,ee.viewportWidth=k,H=ee.viewportHeight,ee.viewportHeight=W,K.viewport(0,0,k,W),eE[0]=0,eE[1]=0,eE[2]=k,eE[3]=W,r?K.enable(3042):K.disable(3042),ei.blend_enable=r,K.blendEquationSeparate(32774,32774),eh[0]=32774,eh[1]=32774,K.blendFuncSeparate(1,1,1,1),em[0]=1,em[1]=1,em[2]=1,em[3]=1,n?K.enable(2929):K.disable(2929),ei.depth_enable=n,K.depthMask(a),ei.depth_mask=a,B=ee.framebufferWidth,I=ee.framebufferHeight,K.scissor(0,0,B,I),eI[0]=0,eI[1]=0,eI[2]=B,eI[3]=I,l?K.enable(2960):K.disable(2960),ei.stencil_enable=l,(P=ei.profile)&&(E=performance.now(),t.count++),K.useProgram(s.program),T=ec.angle_instanced_arrays,es.setVAO(null),(N=el[M=f.location]).buffer||K.enableVertexAttribArray(M),(5126!==N.type||2!==N.size||N.buffer!==o||!1!==N.normalized||0!==N.offset||0!==N.stride)&&(K.bindBuffer(34962,o.buffer),K.vertexAttribPointer(M,2,5126,!1,0,0),N.type=5126,N.size=2,N.buffer=o,N.normalized=!1,N.offset=0,N.stride=0),0!==N.divisor&&(T.vertexAttribDivisorANGLE(M,0),N.divisor=0),L=d.call(this,ee,e,0),K.uniform1f(c.location,L),(C=b.call(this,ee,e,0))&&"framebuffer"===C._reglType&&(C=C.color[0]),V=C._texture,K.uniform1i(u.location,V.bind()),D=p.call(this,ee,e,0),K.uniform1f(h.location,D),(G=g.call(this,ee,e,0))&&"framebuffer"===G._reglType&&(G=G.color[0]),R=G._texture,K.uniform1i(m.location,R.bind()),(q=v.call(this,ee,e,0))&&"framebuffer"===q._reglType&&(q=q.color[0]),j=q._texture,K.uniform1i(_.location,j.bind()),Z=w.call(this,ee,e,0),K.uniform1f(y.location,Z),(Y=er.elements)?K.bindBuffer(34963,Y.buffer.buffer):es.currentVAO&&(Y=en.getElements(es.currentVAO.elements))&&K.bindBuffer(34963,Y.buffer.buffer),$=er.offset,(X=er.instances)>0?Y?T.drawElementsInstancedANGLE(5,4,Y.type,$<<(Y.type-5121>>1),X):T.drawArraysInstancedANGLE(5,$,4,X):X<0&&(Y?K.drawElements(5,4,Y.type,$<<(Y.type-5121>>1)):K.drawArrays(5,$,4)),ei.dirty=!0,es.setVAO(null),ef.next=z,ee.framebufferWidth=F,ee.framebufferHeight=A,ee.viewportWidth=O,ee.viewportHeight=H,P&&(t.cpuTime+=performance.now()-E),V.unbind(),R.unbind(),j.unbind()},scope:function(e,r,n){var a,l,s,f,c,u,h,m,_,y,X,U,Q,J,K,en,el,es,ec,ed,eu,eh,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eI,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1;a=i.call(this,ee,e,n),l=ef.getFramebuffer(a),s=ef.next,ef.next=l,f=ee.framebufferWidth,ee.framebufferWidth=l?l.width:ee.drawingBufferWidth,c=ee.framebufferHeight,ee.framebufferHeight=l?l.height:ee.drawingBufferHeight,u=ee.framebufferWidth,h=ee.framebufferHeight,m=ee.viewportWidth,ee.viewportWidth=u,_=ee.viewportHeight,ee.viewportHeight=h,y=eP[0],eP[0]=x,X=eP[1],eP[1]=S,U=eP[2],eP[2]=u,Q=eP[3],eP[3]=h,J=et.blend_enable,et.blend_enable=z,K=eb[0],eb[0]=F,en=eb[1],eb[1]=A,el=ep[0],ep[0]=k,es=ep[1],ep[1]=W,ec=ep[2],ep[2]=O,ed=ep[3],ep[3]=H,eu=et.depth_enable,et.depth_enable=B,eh=et.depth_mask,et.depth_mask=I,em=ee.framebufferWidth,eg=ee.framebufferHeight,e_=eB[0],eB[0]=P,ev=eB[1],eB[1]=E,ey=eB[2],eB[2]=em,ew=eB[3],eB[3]=eg,ex=et.stencil_enable,et.stencil_enable=T,(eS=ei.profile)&&(ez=performance.now(),t.count++),eF=er.count,er.count=M,eA=er.primitive,er.primitive=N,ek=g.call(this,ee,e,n),eW=eo[L],eo[L]=ek,eO=v.call(this,ee,e,n),eH=eo[C],eo[C]=eO,eI=b.call(this,ee,e,n),eE=eo[V],eo[V]=eI,eT=p.call(this,ee,e,n),eM=eo[D],eo[D]=eT,eN=d.call(this,ee,e,n),eL=eo[G],eo[G]=eN,eC=w.call(this,ee,e,n),eV=eo[R],eo[R]=eC,eD=q.call(this,ee,e,n),eG=eo[j],eo[j]=eD,eR=Z.state,Z.state=1,eq=Z.x,Z.x=0,ej=Z.y,Z.y=0,eZ=Z.z,Z.z=0,eY=Z.w,Z.w=0,e$=Z.buffer,Z.buffer=o,eX=Z.size,Z.size=2,eU=Z.normalized,Z.normalized=!1,eQ=Z.type,Z.type=5126,eJ=Z.offset,Z.offset=0,eK=Z.stride,Z.stride=0,e0=Z.divisor,Z.divisor=0,e2=ea.vert,ea.vert=Y,e1=ea.frag,ea.frag=$,ei.dirty=!0,r(ee,e,n),ef.next=s,ee.framebufferWidth=f,ee.framebufferHeight=c,ee.viewportWidth=m,ee.viewportHeight=_,eP[0]=y,eP[1]=X,eP[2]=U,eP[3]=Q,et.blend_enable=J,eb[0]=K,eb[1]=en,ep[0]=el,ep[1]=es,ep[2]=ec,ep[3]=ed,et.depth_enable=eu,et.depth_mask=eh,eB[0]=e_,eB[1]=ev,eB[2]=ey,eB[3]=ew,et.stencil_enable=ex,eS&&(t.cpuTime+=performance.now()-ez),er.count=eF,er.primitive=eA,eo[L]=eW,eo[C]=eH,eo[V]=eE,eo[D]=eM,eo[G]=eL,eo[R]=eV,eo[j]=eG,Z.state=eR,Z.x=eq,Z.y=ej,Z.z=eZ,Z.w=eY,Z.buffer=e$,Z.size=eX,Z.normalized=eU,Z.type=eQ,Z.offset=eJ,Z.stride=eK,Z.divisor=e0,ea.vert=e2,ea.frag=e1,ei.dirty=!0},batch:function(e,r){var n,a,l,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,ea,eo,eb,ep,eB,eP,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt;for(ec.angle_instanced_arrays,n=i.call(this,ee,e,0),a=ef.getFramebuffer(n),l=ef.next,ef.next=a,x=ee.framebufferWidth,ee.framebufferWidth=a?a.width:ee.drawingBufferWidth,S=ee.framebufferHeight,ee.framebufferHeight=a?a.height:ee.drawingBufferHeight,a!==ef.cur&&(a?K.bindFramebuffer(36160,a.framebuffer):K.bindFramebuffer(36160,null),ef.cur=a),ei.dirty&&((T=et.dither)!==ei.dither&&(T?K.enable(3024):K.disable(3024),ei.dither=T),M=ed[0],N=ed[1],L=ed[2],C=ed[3],(M!==eu[0]||N!==eu[1]||L!==eu[2]||C!==eu[3])&&(K.blendColor(M,N,L,C),eu[0]=M,eu[1]=N,eu[2]=L,eu[3]=C),(V=et.depth_func)!==ei.depth_func&&(K.depthFunc(V),ei.depth_func=V),D=eg[0],G=eg[1],(D!==e_[0]||G!==e_[1])&&(K.depthRange(D,G),e_[0]=D,e_[1]=G),R=ev[0],q=ev[1],j=ev[2],Z=ev[3],(R!==ey[0]||q!==ey[1]||j!==ey[2]||Z!==ey[3])&&(K.colorMask(R,q,j,Z),ey[0]=R,ey[1]=q,ey[2]=j,ey[3]=Z),(Y=et.cull_enable)!==ei.cull_enable&&(Y?K.enable(2884):K.disable(2884),ei.cull_enable=Y),($=et.cull_face)!==ei.cull_face&&(K.cullFace($),ei.cull_face=$),(ea=et.frontFace)!==ei.frontFace&&(K.frontFace(ea),ei.frontFace=ea),(eo=et.lineWidth)!==ei.lineWidth&&(K.lineWidth(eo),ei.lineWidth=eo),(eb=et.polygonOffset_enable)!==ei.polygonOffset_enable&&(eb?K.enable(32823):K.disable(32823),ei.polygonOffset_enable=eb),ep=ew[0],eB=ew[1],(ep!==ex[0]||eB!==ex[1])&&(K.polygonOffset(ep,eB),ex[0]=ep,ex[1]=eB),(eP=et.sample_alpha)!==ei.sample_alpha&&(eP?K.enable(32926):K.disable(32926),ei.sample_alpha=eP),(eT=et.sample_enable)!==ei.sample_enable&&(eT?K.enable(32928):K.disable(32928),ei.sample_enable=eT),eM=eS[0],eN=eS[1],(eM!==ez[0]||eN!==ez[1])&&(K.sampleCoverage(eM,eN),ez[0]=eM,ez[1]=eN),(eL=et.stencil_mask)!==ei.stencil_mask&&(K.stencilMask(eL),ei.stencil_mask=eL),eC=eF[0],eV=eF[1],eD=eF[2],(eC!==eA[0]||eV!==eA[1]||eD!==eA[2])&&(K.stencilFunc(eC,eV,eD),eA[0]=eC,eA[1]=eV,eA[2]=eD),eG=ek[0],eR=ek[1],eq=ek[2],ej=ek[3],(eG!==eW[0]||eR!==eW[1]||eq!==eW[2]||ej!==eW[3])&&(K.stencilOpSeparate(eG,eR,eq,ej),eW[0]=eG,eW[1]=eR,eW[2]=eq,eW[3]=ej),eZ=eO[0],eY=eO[1],e$=eO[2],eX=eO[3],(eZ!==eH[0]||eY!==eH[1]||e$!==eH[2]||eX!==eH[3])&&(K.stencilOpSeparate(eZ,eY,e$,eX),eH[0]=eZ,eH[1]=eY,eH[2]=e$,eH[3]=eX),(eU=et.scissor_enable)!==ei.scissor_enable&&(eU?K.enable(3089):K.disable(3089),ei.scissor_enable=eU)),z=ee.framebufferWidth,F=ee.framebufferHeight,A=ee.viewportWidth,ee.viewportWidth=z,k=ee.viewportHeight,ee.viewportHeight=F,K.viewport(0,0,z,F),eE[0]=0,eE[1]=0,eE[2]=z,eE[3]=F,X?K.enable(3042):K.disable(3042),ei.blend_enable=X,K.blendEquationSeparate(32774,32774),eh[0]=32774,eh[1]=32774,K.blendFuncSeparate(1,1,1,1),em[0]=1,em[1]=1,em[2]=1,em[3]=1,U?K.enable(2929):K.disable(2929),ei.depth_enable=U,K.depthMask(Q),ei.depth_mask=Q,W=ee.framebufferWidth,O=ee.framebufferHeight,K.scissor(0,0,W,O),eI[0]=0,eI[1]=0,eI[2]=W,eI[3]=O,J?K.enable(2960):K.disable(2960),ei.stencil_enable=J,(H=ei.profile)&&(B=performance.now(),t.count+=r),K.useProgram(s.program),I=ec.angle_instanced_arrays,es.setVAO(null),(eJ=el[eQ=f.location]).buffer||K.enableVertexAttribArray(eQ),(5126!==eJ.type||2!==eJ.size||eJ.buffer!==o||!1!==eJ.normalized||0!==eJ.offset||0!==eJ.stride)&&(K.bindBuffer(34962,o.buffer),K.vertexAttribPointer(eQ,2,5126,!1,0,0),eJ.type=5126,eJ.size=2,eJ.buffer=o,eJ.normalized=!1,eJ.offset=0,eJ.stride=0),0!==eJ.divisor&&(I.vertexAttribDivisorANGLE(eQ,0),eJ.divisor=0),eK=d.call(this,ee,E,P),K.uniform1f(c.location,eK),(e0=g.call(this,ee,E,P))&&"framebuffer"===e0._reglType&&(e0=e0.color[0]),e2=e0._texture,K.uniform1i(m.location,e2.bind()),(e1=v.call(this,ee,E,P))&&"framebuffer"===e1._reglType&&(e1=e1.color[0]),e3=e1._texture,K.uniform1i(_.location,e3.bind()),e4=w.call(this,ee,E,P),K.uniform1f(y.location,e4),(e6=er.elements)?K.bindBuffer(34963,e6.buffer.buffer):es.currentVAO&&(e6=en.getElements(es.currentVAO.elements))&&K.bindBuffer(34963,e6.buffer.buffer),e9=er.offset,e8=er.instances,P=0;P<r;++P)E=e[P],(e5=b.call(this,ee,E,P))&&"framebuffer"===e5._reglType&&(e5=e5.color[0]),e7=e5._texture,K.uniform1i(u.location,e7.bind()),te=p.call(this,ee,E,P),P&&tt===te||(tt=te,K.uniform1f(h.location,te)),e8>0?e6?I.drawElementsInstancedANGLE(5,4,e6.type,e9<<(e6.type-5121>>1),e8):I.drawArraysInstancedANGLE(5,e9,4,e8):e8<0&&(e6?K.drawElements(5,4,e6.type,e9<<(e6.type-5121>>1)):K.drawArrays(5,e9,4)),e7.unbind();e2.unbind(),e3.unbind(),ei.dirty=!0,es.setVAO(null),ef.next=l,ee.framebufferWidth=x,ee.framebufferHeight=S,ee.viewportWidth=A,ee.viewportHeight=k,H&&(t.cpuTime+=performance.now()-B)}}},"4c49c9fbc540a4c73ceaba3ffddb6429d780830bc23a82ffeb3dbfe550c35fdb":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L){var C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey;return C=e.gl,V=e.context,e.strings,D=e.next,G=e.current,R=e.draw,q=e.elements,e.buffer,j=e.shader,Z=e.attributes,Y=e.vao,$=e.uniforms,X=e.framebuffer,U=e.extensions,e.timer,e.isBufferArgs,Q=D.blend_color,J=G.blend_color,K=D.blend_equation,ee=G.blend_equation,et=D.blend_func,ei=G.blend_func,er=D.depth_range,en=G.depth_range,ea=D.colorMask,el=G.colorMask,es=D.polygonOffset_offset,eo=G.polygonOffset_offset,ef=D.sample_coverage,ec=G.sample_coverage,ed=D.stencil_func,eu=G.stencil_func,eb=D.stencil_opFront,eh=G.stencil_opFront,ep=D.stencil_opBack,em=G.stencil_opBack,eg=D.scissor_box,e_=G.scissor_box,ev=D.viewport,ey=G.viewport,{draw:function(e){var p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,j,$,K,et,eg,ev,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX;U.angle_instanced_arrays,p=i.call(this,V,e,0),m=X.getFramebuffer(p),g=X.next,X.next=m,_=V.framebufferWidth,V.framebufferWidth=m?m.width:V.drawingBufferWidth,v=V.framebufferHeight,V.framebufferHeight=m?m.height:V.drawingBufferHeight,m!==X.cur&&(m?C.bindFramebuffer(36160,m.framebuffer):C.bindFramebuffer(36160,null),X.cur=m),G.dirty&&((L=D.dither)!==G.dither&&(L?C.enable(3024):C.disable(3024),G.dither=L),j=Q[0],$=Q[1],K=Q[2],et=Q[3],(j!==J[0]||$!==J[1]||K!==J[2]||et!==J[3])&&(C.blendColor(j,$,K,et),J[0]=j,J[1]=$,J[2]=K,J[3]=et),(eg=D.depth_func)!==G.depth_func&&(C.depthFunc(eg),G.depth_func=eg),ev=er[0],ew=er[1],(ev!==en[0]||ew!==en[1])&&(C.depthRange(ev,ew),en[0]=ev,en[1]=ew),ex=ea[0],eS=ea[1],ez=ea[2],eF=ea[3],(ex!==el[0]||eS!==el[1]||ez!==el[2]||eF!==el[3])&&(C.colorMask(ex,eS,ez,eF),el[0]=ex,el[1]=eS,el[2]=ez,el[3]=eF),(eA=D.cull_enable)!==G.cull_enable&&(eA?C.enable(2884):C.disable(2884),G.cull_enable=eA),(ek=D.cull_face)!==G.cull_face&&(C.cullFace(ek),G.cull_face=ek),(eW=D.frontFace)!==G.frontFace&&(C.frontFace(eW),G.frontFace=eW),(eO=D.lineWidth)!==G.lineWidth&&(C.lineWidth(eO),G.lineWidth=eO),(eH=D.polygonOffset_enable)!==G.polygonOffset_enable&&(eH?C.enable(32823):C.disable(32823),G.polygonOffset_enable=eH),eB=es[0],eI=es[1],(eB!==eo[0]||eI!==eo[1])&&(C.polygonOffset(eB,eI),eo[0]=eB,eo[1]=eI),(eP=D.sample_alpha)!==G.sample_alpha&&(eP?C.enable(32926):C.disable(32926),G.sample_alpha=eP),(eE=D.sample_enable)!==G.sample_enable&&(eE?C.enable(32928):C.disable(32928),G.sample_enable=eE),eT=ef[0],eM=ef[1],(eT!==ec[0]||eM!==ec[1])&&(C.sampleCoverage(eT,eM),ec[0]=eT,ec[1]=eM),(eN=D.stencil_mask)!==G.stencil_mask&&(C.stencilMask(eN),G.stencil_mask=eN),eL=ed[0],eC=ed[1],eV=ed[2],(eL!==eu[0]||eC!==eu[1]||eV!==eu[2])&&(C.stencilFunc(eL,eC,eV),eu[0]=eL,eu[1]=eC,eu[2]=eV),eD=eb[0],eG=eb[1],eR=eb[2],eq=eb[3],(eD!==eh[0]||eG!==eh[1]||eR!==eh[2]||eq!==eh[3])&&(C.stencilOpSeparate(eD,eG,eR,eq),eh[0]=eD,eh[1]=eG,eh[2]=eR,eh[3]=eq),ej=ep[0],eZ=ep[1],eY=ep[2],e$=ep[3],(ej!==em[0]||eZ!==em[1]||eY!==em[2]||e$!==em[3])&&(C.stencilOpSeparate(ej,eZ,eY,e$),em[0]=ej,em[1]=eZ,em[2]=eY,em[3]=e$),(eX=D.scissor_enable)!==G.scissor_enable&&(eX?C.enable(3089):C.disable(3089),G.scissor_enable=eX)),y=V.framebufferWidth,w=V.framebufferHeight,x=V.viewportWidth,V.viewportWidth=y,S=V.viewportHeight,V.viewportHeight=w,C.viewport(0,0,y,w),ey[0]=0,ey[1]=0,ey[2]=y,ey[3]=w,r?C.enable(3042):C.disable(3042),G.blend_enable=r,C.blendEquationSeparate(32774,32774),ee[0]=32774,ee[1]=32774,C.blendFuncSeparate(1,1,1,1),ei[0]=1,ei[1]=1,ei[2]=1,ei[3]=1,n?C.enable(2929):C.disable(2929),G.depth_enable=n,C.depthMask(a),G.depth_mask=a,z=V.framebufferWidth,F=V.framebufferHeight,C.scissor(0,0,z,F),e_[0]=0,e_[1]=0,e_[2]=z,e_[3]=F,l?C.enable(2960):C.disable(2960),G.stencil_enable=l,(A=G.profile)&&(k=performance.now(),t.count++),C.useProgram(s.program),W=U.angle_instanced_arrays,Y.setVAO(null),(H=Z[O=f.location]).buffer||C.enableVertexAttribArray(O),(5126!==H.type||2!==H.size||H.buffer!==o||!1!==H.normalized||0!==H.offset||0!==H.stride)&&(C.bindBuffer(34962,o.buffer),C.vertexAttribPointer(O,2,5126,!1,0,0),H.type=5126,H.size=2,H.buffer=o,H.normalized=!1,H.offset=0,H.stride=0),0!==H.divisor&&(W.vertexAttribDivisorANGLE(O,0),H.divisor=0),B=d.call(this,V,e,0),C.uniform1f(c.location,B),(I=b.call(this,V,e,0))&&"framebuffer"===I._reglType&&(I=I.color[0]),P=I._texture,C.uniform1i(u.location,P.bind()),(E=R.elements)?C.bindBuffer(34963,E.buffer.buffer):Y.currentVAO&&(E=q.getElements(Y.currentVAO.elements))&&C.bindBuffer(34963,E.buffer.buffer),T=R.offset,(M=h.call(this,V,e,0))&&((N=R.instances)>0?E?W.drawElementsInstancedANGLE(0,M,E.type,T<<(E.type-5121>>1),N):W.drawArraysInstancedANGLE(0,T,M,N):N<0&&(E?C.drawElements(0,M,E.type,T<<(E.type-5121>>1)):C.drawArrays(0,T,M)),G.dirty=!0,Y.setVAO(null),X.next=g,V.framebufferWidth=_,V.framebufferHeight=v,V.viewportWidth=x,V.viewportHeight=S,A&&(t.cpuTime+=performance.now()-k),P.unbind())},scope:function(e,r,n){var a,l,s,f,c,u,T,M,N,L,C,q,Z,Y,U,Q,J,ee,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,e_,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN;a=i.call(this,V,e,n),l=X.getFramebuffer(a),s=X.next,X.next=l,f=V.framebufferWidth,V.framebufferWidth=l?l.width:V.drawingBufferWidth,c=V.framebufferHeight,V.framebufferHeight=l?l.height:V.drawingBufferHeight,u=V.framebufferWidth,T=V.framebufferHeight,M=V.viewportWidth,V.viewportWidth=u,N=V.viewportHeight,V.viewportHeight=T,L=ev[0],ev[0]=p,C=ev[1],ev[1]=m,q=ev[2],ev[2]=u,Z=ev[3],ev[3]=T,Y=D.blend_enable,D.blend_enable=g,U=K[0],K[0]=_,Q=K[1],K[1]=v,J=et[0],et[0]=y,ee=et[1],et[1]=w,ei=et[2],et[2]=x,er=et[3],et[3]=S,en=D.depth_enable,D.depth_enable=z,ea=D.depth_mask,D.depth_mask=F,el=V.framebufferWidth,es=V.framebufferHeight,eo=eg[0],eg[0]=A,ef=eg[1],eg[1]=k,ec=eg[2],eg[2]=el,ed=eg[3],eg[3]=es,eu=D.stencil_enable,D.stencil_enable=W,(eb=G.profile)&&(eh=performance.now(),t.count++),ep=h.call(this,V,e,n),em=R.count,R.count=ep,e_=R.primitive,R.primitive=O,ey=b.call(this,V,e,n),ew=$[H],$[H]=ey,ex=d.call(this,V,e,n),eS=$[B],$[B]=ex,ez=I.state,I.state=1,eF=I.x,I.x=0,eA=I.y,I.y=0,ek=I.z,I.z=0,eW=I.w,I.w=0,eO=I.buffer,I.buffer=o,eH=I.size,I.size=2,eB=I.normalized,I.normalized=!1,eI=I.type,I.type=5126,eP=I.offset,I.offset=0,eE=I.stride,I.stride=0,eT=I.divisor,I.divisor=0,eM=j.vert,j.vert=P,eN=j.frag,j.frag=E,G.dirty=!0,r(V,e,n),X.next=s,V.framebufferWidth=f,V.framebufferHeight=c,V.viewportWidth=M,V.viewportHeight=N,ev[0]=L,ev[1]=C,ev[2]=q,ev[3]=Z,D.blend_enable=Y,K[0]=U,K[1]=Q,et[0]=J,et[1]=ee,et[2]=ei,et[3]=er,D.depth_enable=en,D.depth_mask=ea,eg[0]=eo,eg[1]=ef,eg[2]=ec,eg[3]=ed,D.stencil_enable=eu,eb&&(t.cpuTime+=performance.now()-eh),R.count=em,R.primitive=e_,$[H]=ew,$[B]=eS,I.state=ez,I.x=eF,I.y=eA,I.z=ek,I.w=eW,I.buffer=eO,I.size=eH,I.normalized=eB,I.type=eI,I.offset=eP,I.stride=eE,I.divisor=eT,j.vert=eM,j.frag=eN,G.dirty=!0},batch:function(e,r){var n,a,l,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,j,$,K,et,eg,ev,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ;for(U.angle_instanced_arrays,n=i.call(this,V,e,0),a=X.getFramebuffer(n),l=X.next,X.next=a,p=V.framebufferWidth,V.framebufferWidth=a?a.width:V.drawingBufferWidth,m=V.framebufferHeight,V.framebufferHeight=a?a.height:V.drawingBufferHeight,a!==X.cur&&(a?C.bindFramebuffer(36160,a.framebuffer):C.bindFramebuffer(36160,null),X.cur=a),G.dirty&&((W=D.dither)!==G.dither&&(W?C.enable(3024):C.disable(3024),G.dither=W),O=Q[0],H=Q[1],B=Q[2],I=Q[3],(O!==J[0]||H!==J[1]||B!==J[2]||I!==J[3])&&(C.blendColor(O,H,B,I),J[0]=O,J[1]=H,J[2]=B,J[3]=I),(P=D.depth_func)!==G.depth_func&&(C.depthFunc(P),G.depth_func=P),E=er[0],j=er[1],(E!==en[0]||j!==en[1])&&(C.depthRange(E,j),en[0]=E,en[1]=j),$=ea[0],K=ea[1],et=ea[2],eg=ea[3],($!==el[0]||K!==el[1]||et!==el[2]||eg!==el[3])&&(C.colorMask($,K,et,eg),el[0]=$,el[1]=K,el[2]=et,el[3]=eg),(ev=D.cull_enable)!==G.cull_enable&&(ev?C.enable(2884):C.disable(2884),G.cull_enable=ev),(ew=D.cull_face)!==G.cull_face&&(C.cullFace(ew),G.cull_face=ew),(ex=D.frontFace)!==G.frontFace&&(C.frontFace(ex),G.frontFace=ex),(eS=D.lineWidth)!==G.lineWidth&&(C.lineWidth(eS),G.lineWidth=eS),(ez=D.polygonOffset_enable)!==G.polygonOffset_enable&&(ez?C.enable(32823):C.disable(32823),G.polygonOffset_enable=ez),eF=es[0],eA=es[1],(eF!==eo[0]||eA!==eo[1])&&(C.polygonOffset(eF,eA),eo[0]=eF,eo[1]=eA),(ek=D.sample_alpha)!==G.sample_alpha&&(ek?C.enable(32926):C.disable(32926),G.sample_alpha=ek),(eW=D.sample_enable)!==G.sample_enable&&(eW?C.enable(32928):C.disable(32928),G.sample_enable=eW),eO=ef[0],eH=ef[1],(eO!==ec[0]||eH!==ec[1])&&(C.sampleCoverage(eO,eH),ec[0]=eO,ec[1]=eH),(eB=D.stencil_mask)!==G.stencil_mask&&(C.stencilMask(eB),G.stencil_mask=eB),eI=ed[0],eP=ed[1],eE=ed[2],(eI!==eu[0]||eP!==eu[1]||eE!==eu[2])&&(C.stencilFunc(eI,eP,eE),eu[0]=eI,eu[1]=eP,eu[2]=eE),eT=eb[0],eM=eb[1],eN=eb[2],eL=eb[3],(eT!==eh[0]||eM!==eh[1]||eN!==eh[2]||eL!==eh[3])&&(C.stencilOpSeparate(eT,eM,eN,eL),eh[0]=eT,eh[1]=eM,eh[2]=eN,eh[3]=eL),eC=ep[0],eV=ep[1],eD=ep[2],eG=ep[3],(eC!==em[0]||eV!==em[1]||eD!==em[2]||eG!==em[3])&&(C.stencilOpSeparate(eC,eV,eD,eG),em[0]=eC,em[1]=eV,em[2]=eD,em[3]=eG),(eR=D.scissor_enable)!==G.scissor_enable&&(eR?C.enable(3089):C.disable(3089),G.scissor_enable=eR)),g=V.framebufferWidth,_=V.framebufferHeight,v=V.viewportWidth,V.viewportWidth=g,y=V.viewportHeight,V.viewportHeight=_,C.viewport(0,0,g,_),ey[0]=0,ey[1]=0,ey[2]=g,ey[3]=_,T?C.enable(3042):C.disable(3042),G.blend_enable=T,C.blendEquationSeparate(32774,32774),ee[0]=32774,ee[1]=32774,C.blendFuncSeparate(1,1,1,1),ei[0]=1,ei[1]=1,ei[2]=1,ei[3]=1,M?C.enable(2929):C.disable(2929),G.depth_enable=M,C.depthMask(N),G.depth_mask=N,w=V.framebufferWidth,x=V.framebufferHeight,C.scissor(0,0,w,x),e_[0]=0,e_[1]=0,e_[2]=w,e_[3]=x,L?C.enable(2960):C.disable(2960),G.stencil_enable=L,(S=G.profile)&&(z=performance.now(),t.count+=r),C.useProgram(s.program),F=U.angle_instanced_arrays,Y.setVAO(null),(ej=Z[eq=f.location]).buffer||C.enableVertexAttribArray(eq),(5126!==ej.type||2!==ej.size||ej.buffer!==o||!1!==ej.normalized||0!==ej.offset||0!==ej.stride)&&(C.bindBuffer(34962,o.buffer),C.vertexAttribPointer(eq,2,5126,!1,0,0),ej.type=5126,ej.size=2,ej.buffer=o,ej.normalized=!1,ej.offset=0,ej.stride=0),0!==ej.divisor&&(F.vertexAttribDivisorANGLE(eq,0),ej.divisor=0),eZ=d.call(this,V,k,A),C.uniform1f(c.location,eZ),(eY=b.call(this,V,k,A))&&"framebuffer"===eY._reglType&&(eY=eY.color[0]),e$=eY._texture,C.uniform1i(u.location,e$.bind()),(eX=R.elements)?C.bindBuffer(34963,eX.buffer.buffer):Y.currentVAO&&(eX=q.getElements(Y.currentVAO.elements))&&C.bindBuffer(34963,eX.buffer.buffer),eU=R.offset,eQ=h.call(this,V,k,A),eJ=R.instances,A=0;A<r;++A)k=e[A],eQ&&(eJ>0?eX?F.drawElementsInstancedANGLE(0,eQ,eX.type,eU<<(eX.type-5121>>1),eJ):F.drawArraysInstancedANGLE(0,eU,eQ,eJ):eJ<0&&(eX?C.drawElements(0,eQ,eX.type,eU<<(eX.type-5121>>1)):C.drawArrays(0,eU,eQ)));e$.unbind(),G.dirty=!0,Y.setVAO(null),X.next=l,V.framebufferWidth=p,V.framebufferHeight=m,V.viewportWidth=v,V.viewportHeight=y,S&&(t.cpuTime+=performance.now()-z)}}},"21f35e0b5f6b6b998967928bf1cb4872a9803004bf6455ca860fe126500cf347":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A){var k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo;return k=e.gl,W=e.context,e.strings,O=e.next,H=e.current,B=e.draw,I=e.elements,e.buffer,P=e.shader,E=e.attributes,T=e.vao,M=e.uniforms,N=e.framebuffer,L=e.extensions,e.timer,e.isBufferArgs,C=O.blend_color,V=H.blend_color,D=O.blend_equation,G=H.blend_equation,R=O.blend_func,q=H.blend_func,j=O.depth_range,Z=H.depth_range,Y=O.colorMask,$=H.colorMask,X=O.polygonOffset_offset,U=H.polygonOffset_offset,Q=O.sample_coverage,J=H.sample_coverage,K=O.stencil_func,ee=H.stencil_func,et=O.stencil_opFront,ei=H.stencil_opFront,er=O.stencil_opBack,en=H.stencil_opBack,ea=O.scissor_box,el=H.scissor_box,es=O.viewport,eo=H.viewport,{draw:function(e){var h,p,m,g,_,v,y,w,x,S,z,F,A,P,M,ea,es,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5;L.angle_instanced_arrays,h=i.call(this,W,e,0),p=N.getFramebuffer(h),m=N.next,N.next=p,g=W.framebufferWidth,W.framebufferWidth=p?p.width:W.drawingBufferWidth,_=W.framebufferHeight,W.framebufferHeight=p?p.height:W.drawingBufferHeight,p!==N.cur&&(p?k.bindFramebuffer(36160,p.framebuffer):k.bindFramebuffer(36160,null),N.cur=p),H.dirty&&((eg=O.dither)!==H.dither&&(eg?k.enable(3024):k.disable(3024),H.dither=eg),(e_=O.blend_enable)!==H.blend_enable&&(e_?k.enable(3042):k.disable(3042),H.blend_enable=e_),ev=C[0],ey=C[1],ew=C[2],ex=C[3],(ev!==V[0]||ey!==V[1]||ew!==V[2]||ex!==V[3])&&(k.blendColor(ev,ey,ew,ex),V[0]=ev,V[1]=ey,V[2]=ew,V[3]=ex),eS=D[0],ez=D[1],(eS!==G[0]||ez!==G[1])&&(k.blendEquationSeparate(eS,ez),G[0]=eS,G[1]=ez),eF=R[0],eA=R[1],ek=R[2],eW=R[3],(eF!==q[0]||eA!==q[1]||ek!==q[2]||eW!==q[3])&&(k.blendFuncSeparate(eF,eA,ek,eW),q[0]=eF,q[1]=eA,q[2]=ek,q[3]=eW),(eO=O.depth_enable)!==H.depth_enable&&(eO?k.enable(2929):k.disable(2929),H.depth_enable=eO),(eH=O.depth_func)!==H.depth_func&&(k.depthFunc(eH),H.depth_func=eH),eB=j[0],eI=j[1],(eB!==Z[0]||eI!==Z[1])&&(k.depthRange(eB,eI),Z[0]=eB,Z[1]=eI),(eP=O.depth_mask)!==H.depth_mask&&(k.depthMask(eP),H.depth_mask=eP),eE=Y[0],eT=Y[1],eM=Y[2],eN=Y[3],(eE!==$[0]||eT!==$[1]||eM!==$[2]||eN!==$[3])&&(k.colorMask(eE,eT,eM,eN),$[0]=eE,$[1]=eT,$[2]=eM,$[3]=eN),(eL=O.cull_enable)!==H.cull_enable&&(eL?k.enable(2884):k.disable(2884),H.cull_enable=eL),(eC=O.cull_face)!==H.cull_face&&(k.cullFace(eC),H.cull_face=eC),(eV=O.frontFace)!==H.frontFace&&(k.frontFace(eV),H.frontFace=eV),(eD=O.lineWidth)!==H.lineWidth&&(k.lineWidth(eD),H.lineWidth=eD),(eG=O.polygonOffset_enable)!==H.polygonOffset_enable&&(eG?k.enable(32823):k.disable(32823),H.polygonOffset_enable=eG),eR=X[0],eq=X[1],(eR!==U[0]||eq!==U[1])&&(k.polygonOffset(eR,eq),U[0]=eR,U[1]=eq),(ej=O.sample_alpha)!==H.sample_alpha&&(ej?k.enable(32926):k.disable(32926),H.sample_alpha=ej),(eZ=O.sample_enable)!==H.sample_enable&&(eZ?k.enable(32928):k.disable(32928),H.sample_enable=eZ),eY=Q[0],e$=Q[1],(eY!==J[0]||e$!==J[1])&&(k.sampleCoverage(eY,e$),J[0]=eY,J[1]=e$),(eX=O.stencil_enable)!==H.stencil_enable&&(eX?k.enable(2960):k.disable(2960),H.stencil_enable=eX),(eU=O.stencil_mask)!==H.stencil_mask&&(k.stencilMask(eU),H.stencil_mask=eU),eQ=K[0],eJ=K[1],eK=K[2],(eQ!==ee[0]||eJ!==ee[1]||eK!==ee[2])&&(k.stencilFunc(eQ,eJ,eK),ee[0]=eQ,ee[1]=eJ,ee[2]=eK),e0=et[0],e2=et[1],e1=et[2],e3=et[3],(e0!==ei[0]||e2!==ei[1]||e1!==ei[2]||e3!==ei[3])&&(k.stencilOpSeparate(e0,e2,e1,e3),ei[0]=e0,ei[1]=e2,ei[2]=e1,ei[3]=e3),e4=er[0],e6=er[1],e9=er[2],e8=er[3],(e4!==en[0]||e6!==en[1]||e9!==en[2]||e8!==en[3])&&(k.stencilOpSeparate(e4,e6,e9,e8),en[0]=e4,en[1]=e6,en[2]=e9,en[3]=e8),(e5=O.scissor_enable)!==H.scissor_enable&&(e5?k.enable(3089):k.disable(3089),H.scissor_enable=e5)),v=W.framebufferWidth,y=W.framebufferHeight,w=W.viewportWidth,W.viewportWidth=v,x=W.viewportHeight,W.viewportHeight=y,k.viewport(0,0,v,y),eo[0]=0,eo[1]=0,eo[2]=v,eo[3]=y,S=W.framebufferWidth,z=W.framebufferHeight,k.scissor(0,0,S,z),el[0]=0,el[1]=0,el[2]=S,el[3]=z,(F=H.profile)&&(A=performance.now(),t.count++),k.useProgram(r.program),P=L.angle_instanced_arrays,T.setVAO(null),(ea=E[M=a.location]).buffer||k.enableVertexAttribArray(M),(5126!==ea.type||2!==ea.size||ea.buffer!==n||!1!==ea.normalized||0!==ea.offset||0!==ea.stride)&&(k.bindBuffer(34962,n.buffer),k.vertexAttribPointer(M,2,5126,!1,0,0),ea.type=5126,ea.size=2,ea.buffer=n,ea.normalized=!1,ea.offset=0,ea.stride=0),0!==ea.divisor&&(P.vertexAttribDivisorANGLE(M,0),ea.divisor=0),es=s.call(this,W,e,0),k.uniform1f(l.location,es),ef=f.call(this,W,e,0),k.uniform1f(o.location,ef),(ec=d.call(this,W,e,0))&&"framebuffer"===ec._reglType&&(ec=ec.color[0]),ed=ec._texture,k.uniform1i(c.location,ed.bind()),(eu=b.call(this,W,e,0))&&"framebuffer"===eu._reglType&&(eu=eu.color[0]),eb=eu._texture,k.uniform1i(u.location,eb.bind()),(eh=B.elements)?k.bindBuffer(34963,eh.buffer.buffer):T.currentVAO&&(eh=I.getElements(T.currentVAO.elements))&&k.bindBuffer(34963,eh.buffer.buffer),ep=B.offset,(em=B.instances)>0?eh?P.drawElementsInstancedANGLE(5,4,eh.type,ep<<(eh.type-5121>>1),em):P.drawArraysInstancedANGLE(5,ep,4,em):em<0&&(eh?k.drawElements(5,4,eh.type,ep<<(eh.type-5121>>1)):k.drawArrays(5,ep,4)),H.dirty=!0,T.setVAO(null),N.next=m,W.framebufferWidth=g,W.framebufferHeight=_,W.viewportWidth=w,W.viewportHeight=x,F&&(t.cpuTime+=performance.now()-A),ed.unbind(),eb.unbind()},scope:function(e,r,a){var l,o,c,u,k,O,I,E,T,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,el,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew;l=i.call(this,W,e,a),o=N.getFramebuffer(l),c=N.next,N.next=o,u=W.framebufferWidth,W.framebufferWidth=o?o.width:W.drawingBufferWidth,k=W.framebufferHeight,W.framebufferHeight=o?o.height:W.drawingBufferHeight,O=W.framebufferWidth,I=W.framebufferHeight,E=W.viewportWidth,W.viewportWidth=O,T=W.viewportHeight,W.viewportHeight=I,L=es[0],es[0]=h,C=es[1],es[1]=p,V=es[2],es[2]=O,D=es[3],es[3]=I,G=W.framebufferWidth,R=W.framebufferHeight,q=ea[0],ea[0]=m,j=ea[1],ea[1]=g,Z=ea[2],ea[2]=G,Y=ea[3],ea[3]=R,($=H.profile)&&(X=performance.now(),t.count++),U=B.count,B.count=_,Q=B.primitive,B.primitive=v,J=b.call(this,W,e,a),K=M[y],M[y]=J,ee=d.call(this,W,e,a),et=M[w],M[w]=ee,ei=f.call(this,W,e,a),er=M[x],M[x]=ei,en=s.call(this,W,e,a),el=M[S],M[S]=en,eo=z.state,z.state=1,ef=z.x,z.x=0,ec=z.y,z.y=0,ed=z.z,z.z=0,eu=z.w,z.w=0,eb=z.buffer,z.buffer=n,eh=z.size,z.size=2,ep=z.normalized,z.normalized=!1,em=z.type,z.type=5126,eg=z.offset,z.offset=0,e_=z.stride,z.stride=0,ev=z.divisor,z.divisor=0,ey=P.vert,P.vert=F,ew=P.frag,P.frag=A,H.dirty=!0,r(W,e,a),N.next=c,W.framebufferWidth=u,W.framebufferHeight=k,W.viewportWidth=E,W.viewportHeight=T,es[0]=L,es[1]=C,es[2]=V,es[3]=D,ea[0]=q,ea[1]=j,ea[2]=Z,ea[3]=Y,$&&(t.cpuTime+=performance.now()-X),B.count=U,B.primitive=Q,M[y]=K,M[w]=et,M[x]=er,M[S]=el,z.state=eo,z.x=ef,z.y=ec,z.z=ed,z.w=eu,z.buffer=eb,z.size=eh,z.normalized=ep,z.type=em,z.offset=eg,z.stride=e_,z.divisor=ev,P.vert=ey,P.frag=ew,H.dirty=!0},batch:function(e,h){var p,m,g,_,v,y,w,x,S,z,F,A,P,M,ea,es,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR,eq,ej,eZ,eY,e$,eX,eU,eQ,eJ,eK,e0,e2,e1,e3,e4,e6,e9,e8,e5,e7,te,tt;for(L.angle_instanced_arrays,p=i.call(this,W,e,0),m=N.getFramebuffer(p),g=N.next,N.next=m,_=W.framebufferWidth,W.framebufferWidth=m?m.width:W.drawingBufferWidth,v=W.framebufferHeight,W.framebufferHeight=m?m.height:W.drawingBufferHeight,m!==N.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),N.cur=m),H.dirty&&((ef=O.dither)!==H.dither&&(ef?k.enable(3024):k.disable(3024),H.dither=ef),(ec=O.blend_enable)!==H.blend_enable&&(ec?k.enable(3042):k.disable(3042),H.blend_enable=ec),ed=C[0],eu=C[1],eb=C[2],eh=C[3],(ed!==V[0]||eu!==V[1]||eb!==V[2]||eh!==V[3])&&(k.blendColor(ed,eu,eb,eh),V[0]=ed,V[1]=eu,V[2]=eb,V[3]=eh),ep=D[0],em=D[1],(ep!==G[0]||em!==G[1])&&(k.blendEquationSeparate(ep,em),G[0]=ep,G[1]=em),eg=R[0],e_=R[1],ev=R[2],ey=R[3],(eg!==q[0]||e_!==q[1]||ev!==q[2]||ey!==q[3])&&(k.blendFuncSeparate(eg,e_,ev,ey),q[0]=eg,q[1]=e_,q[2]=ev,q[3]=ey),(ew=O.depth_enable)!==H.depth_enable&&(ew?k.enable(2929):k.disable(2929),H.depth_enable=ew),(ex=O.depth_func)!==H.depth_func&&(k.depthFunc(ex),H.depth_func=ex),eS=j[0],ez=j[1],(eS!==Z[0]||ez!==Z[1])&&(k.depthRange(eS,ez),Z[0]=eS,Z[1]=ez),(eF=O.depth_mask)!==H.depth_mask&&(k.depthMask(eF),H.depth_mask=eF),eA=Y[0],ek=Y[1],eW=Y[2],eO=Y[3],(eA!==$[0]||ek!==$[1]||eW!==$[2]||eO!==$[3])&&(k.colorMask(eA,ek,eW,eO),$[0]=eA,$[1]=ek,$[2]=eW,$[3]=eO),(eH=O.cull_enable)!==H.cull_enable&&(eH?k.enable(2884):k.disable(2884),H.cull_enable=eH),(eB=O.cull_face)!==H.cull_face&&(k.cullFace(eB),H.cull_face=eB),(eI=O.frontFace)!==H.frontFace&&(k.frontFace(eI),H.frontFace=eI),(eP=O.lineWidth)!==H.lineWidth&&(k.lineWidth(eP),H.lineWidth=eP),(eE=O.polygonOffset_enable)!==H.polygonOffset_enable&&(eE?k.enable(32823):k.disable(32823),H.polygonOffset_enable=eE),eT=X[0],eM=X[1],(eT!==U[0]||eM!==U[1])&&(k.polygonOffset(eT,eM),U[0]=eT,U[1]=eM),(eN=O.sample_alpha)!==H.sample_alpha&&(eN?k.enable(32926):k.disable(32926),H.sample_alpha=eN),(eL=O.sample_enable)!==H.sample_enable&&(eL?k.enable(32928):k.disable(32928),H.sample_enable=eL),eC=Q[0],eV=Q[1],(eC!==J[0]||eV!==J[1])&&(k.sampleCoverage(eC,eV),J[0]=eC,J[1]=eV),(eD=O.stencil_enable)!==H.stencil_enable&&(eD?k.enable(2960):k.disable(2960),H.stencil_enable=eD),(eG=O.stencil_mask)!==H.stencil_mask&&(k.stencilMask(eG),H.stencil_mask=eG),eR=K[0],eq=K[1],ej=K[2],(eR!==ee[0]||eq!==ee[1]||ej!==ee[2])&&(k.stencilFunc(eR,eq,ej),ee[0]=eR,ee[1]=eq,ee[2]=ej),eZ=et[0],eY=et[1],e$=et[2],eX=et[3],(eZ!==ei[0]||eY!==ei[1]||e$!==ei[2]||eX!==ei[3])&&(k.stencilOpSeparate(eZ,eY,e$,eX),ei[0]=eZ,ei[1]=eY,ei[2]=e$,ei[3]=eX),eU=er[0],eQ=er[1],eJ=er[2],eK=er[3],(eU!==en[0]||eQ!==en[1]||eJ!==en[2]||eK!==en[3])&&(k.stencilOpSeparate(eU,eQ,eJ,eK),en[0]=eU,en[1]=eQ,en[2]=eJ,en[3]=eK),(e0=O.scissor_enable)!==H.scissor_enable&&(e0?k.enable(3089):k.disable(3089),H.scissor_enable=e0)),y=W.framebufferWidth,w=W.framebufferHeight,x=W.viewportWidth,W.viewportWidth=y,S=W.viewportHeight,W.viewportHeight=w,k.viewport(0,0,y,w),eo[0]=0,eo[1]=0,eo[2]=y,eo[3]=w,z=W.framebufferWidth,F=W.framebufferHeight,k.scissor(0,0,z,F),el[0]=0,el[1]=0,el[2]=z,el[3]=F,(A=H.profile)&&(P=performance.now(),t.count+=h),k.useProgram(r.program),M=L.angle_instanced_arrays,T.setVAO(null),(e1=E[e2=a.location]).buffer||k.enableVertexAttribArray(e2),(5126!==e1.type||2!==e1.size||e1.buffer!==n||!1!==e1.normalized||0!==e1.offset||0!==e1.stride)&&(k.bindBuffer(34962,n.buffer),k.vertexAttribPointer(e2,2,5126,!1,0,0),e1.type=5126,e1.size=2,e1.buffer=n,e1.normalized=!1,e1.offset=0,e1.stride=0),0!==e1.divisor&&(M.vertexAttribDivisorANGLE(e2,0),e1.divisor=0),e3=s.call(this,W,es,ea),k.uniform1f(l.location,e3),e4=f.call(this,W,es,ea),k.uniform1f(o.location,e4),(e6=d.call(this,W,es,ea))&&"framebuffer"===e6._reglType&&(e6=e6.color[0]),e9=e6._texture,k.uniform1i(c.location,e9.bind()),(e8=b.call(this,W,es,ea))&&"framebuffer"===e8._reglType&&(e8=e8.color[0]),e5=e8._texture,k.uniform1i(u.location,e5.bind()),(e7=B.elements)?k.bindBuffer(34963,e7.buffer.buffer):T.currentVAO&&(e7=I.getElements(T.currentVAO.elements))&&k.bindBuffer(34963,e7.buffer.buffer),te=B.offset,tt=B.instances,ea=0;ea<h;++ea)es=e[ea],tt>0?e7?M.drawElementsInstancedANGLE(5,4,e7.type,te<<(e7.type-5121>>1),tt):M.drawArraysInstancedANGLE(5,te,4,tt):tt<0&&(e7?k.drawElements(5,4,e7.type,te<<(e7.type-5121>>1)):k.drawArrays(5,te,4));e9.unbind(),e5.unbind(),H.dirty=!0,T.setVAO(null),N.next=g,W.framebufferWidth=_,W.framebufferHeight=v,W.viewportWidth=x,W.viewportHeight=S,A&&(t.cpuTime+=performance.now()-P)}}},"1596bccf6b7a59d3fe8f9b73749b6b4f7e0e856d9694b6958aec3c25433b26b6":function(e,t,i,r,n,a,l,s,o,f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z){var F,A,k,W,O,H,B,I,P;return F=e.gl,A=e.context,e.strings,k=e.next,W=e.current,O=e.draw,H=e.elements,e.buffer,e.shader,B=e.attributes,I=e.vao,e.uniforms,e.framebuffer,P=e.extensions,e.timer,e.isBufferArgs,k.blend_color,W.blend_color,k.blend_equation,W.blend_equation,k.blend_func,W.blend_func,k.depth_range,W.depth_range,k.colorMask,W.colorMask,k.polygonOffset_offset,W.polygonOffset_offset,k.sample_coverage,W.sample_coverage,k.stencil_func,W.stencil_func,k.stencil_opFront,W.stencil_opFront,k.stencil_opBack,W.stencil_opBack,k.scissor_box,W.scissor_box,k.viewport,W.viewport,{body:function(e){var k,W,E,T,M,N,L,C,V,D,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et;P.angle_instanced_arrays,k=P.angle_instanced_arrays,I.setVAO(null),(E=B[W=i.location]).buffer||F.enableVertexAttribArray(W),(5126!==E.type||2!==E.size||E.buffer!==t||!1!==E.normalized||0!==E.offset||0!==E.stride)&&(F.bindBuffer(34962,t.buffer),F.vertexAttribPointer(W,2,5126,!1,0,0),E.type=5126,E.size=2,E.buffer=t,E.normalized=!1,E.offset=0,E.stride=0),0!==E.divisor&&(k.vertexAttribDivisorANGLE(W,0),E.divisor=0),T=n.call(this,A,e,0),F.uniform1f(r.location,T),M=l.call(this,A,e,0),F.uniform1f(a.location,M),L=(N=o.call(this,A,e,0))[0],C=N[1],F.uniform2f(s.location,L,C),V=c.call(this,A,e,0),F.uniform1f(f.location,V),D=u.call(this,A,e,0),F.uniform1f(d.location,D),G=h.call(this,A,e,0),F.uniform1f(b.location,G),(R=m.call(this,A,e,0))&&"framebuffer"===R._reglType&&(R=R.color[0]),q=R._texture,F.uniform1i(p.location,q.bind()),(j=_.call(this,A,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),Z=j._texture,F.uniform1i(g.location,Z.bind()),(Y=y.call(this,A,e,0))&&"framebuffer"===Y._reglType&&(Y=Y.color[0]),$=Y._texture,F.uniform1i(v.location,$.bind()),(X=x.call(this,A,e,0))&&"framebuffer"===X._reglType&&(X=X.color[0]),U=X._texture,F.uniform1i(w.location,U.bind()),(Q=z.call(this,A,e,0))&&"framebuffer"===Q._reglType&&(Q=Q.color[0]),J=Q._texture,F.uniform1i(S.location,J.bind()),(K=O.elements)?F.bindBuffer(34963,K.buffer.buffer):I.currentVAO&&(K=H.getElements(I.currentVAO.elements))&&F.bindBuffer(34963,K.buffer.buffer),ee=O.offset,(et=O.instances)>0?K?k.drawElementsInstancedANGLE(5,4,K.type,ee<<(K.type-5121>>1),et):k.drawArraysInstancedANGLE(5,ee,4,et):et<0&&(K?F.drawElements(5,4,K.type,ee<<(K.type-5121>>1)):F.drawArrays(5,ee,4)),q.unbind(),Z.unbind(),$.unbind(),U.unbind(),J.unbind()}}},a05bf3c1b12ac6d06248a1605bddec766ce3c5beca448738b9fcb95625273f0b:function(e,t,i,r,n,a,l,s,o){var f,c,d,u,b,h,p,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H,B,I,P,E,T,M,N,L,C,V,D,G;return f=e.gl,c=e.context,e.strings,d=e.next,u=e.current,e.draw,e.elements,e.buffer,b=e.shader,e.attributes,h=e.vao,e.uniforms,p=e.framebuffer,m=e.extensions,e.timer,e.isBufferArgs,g=d.blend_color,_=u.blend_color,v=d.blend_equation,y=u.blend_equation,w=d.blend_func,x=u.blend_func,S=d.depth_range,z=u.depth_range,F=d.colorMask,A=u.colorMask,k=d.polygonOffset_offset,W=u.polygonOffset_offset,O=d.sample_coverage,H=u.sample_coverage,B=d.stencil_func,I=u.stencil_func,P=d.stencil_opFront,E=u.stencil_opFront,T=d.stencil_opBack,M=u.stencil_opBack,N=d.scissor_box,L=u.scissor_box,C=d.viewport,V=u.viewport,D={},G={},{draw:function(e){var n,a,l,s,o,N,C,G,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG;m.angle_instanced_arrays,n=p.next,p.next=i,a=c.framebufferWidth,c.framebufferWidth=i.width,l=c.framebufferHeight,c.framebufferHeight=i.height,i!==p.cur&&(i?f.bindFramebuffer(36160,i.framebuffer):f.bindFramebuffer(36160,null),p.cur=i),u.dirty&&((Q=d.dither)!==u.dither&&(Q?f.enable(3024):f.disable(3024),u.dither=Q),(J=d.blend_enable)!==u.blend_enable&&(J?f.enable(3042):f.disable(3042),u.blend_enable=J),K=g[0],ee=g[1],et=g[2],ei=g[3],(K!==_[0]||ee!==_[1]||et!==_[2]||ei!==_[3])&&(f.blendColor(K,ee,et,ei),_[0]=K,_[1]=ee,_[2]=et,_[3]=ei),er=v[0],en=v[1],(er!==y[0]||en!==y[1])&&(f.blendEquationSeparate(er,en),y[0]=er,y[1]=en),ea=w[0],el=w[1],es=w[2],eo=w[3],(ea!==x[0]||el!==x[1]||es!==x[2]||eo!==x[3])&&(f.blendFuncSeparate(ea,el,es,eo),x[0]=ea,x[1]=el,x[2]=es,x[3]=eo),(ef=d.depth_enable)!==u.depth_enable&&(ef?f.enable(2929):f.disable(2929),u.depth_enable=ef),(ec=d.depth_func)!==u.depth_func&&(f.depthFunc(ec),u.depth_func=ec),ed=S[0],eu=S[1],(ed!==z[0]||eu!==z[1])&&(f.depthRange(ed,eu),z[0]=ed,z[1]=eu),(eb=d.depth_mask)!==u.depth_mask&&(f.depthMask(eb),u.depth_mask=eb),eh=F[0],ep=F[1],em=F[2],eg=F[3],(eh!==A[0]||ep!==A[1]||em!==A[2]||eg!==A[3])&&(f.colorMask(eh,ep,em,eg),A[0]=eh,A[1]=ep,A[2]=em,A[3]=eg),(e_=d.cull_enable)!==u.cull_enable&&(e_?f.enable(2884):f.disable(2884),u.cull_enable=e_),(ev=d.cull_face)!==u.cull_face&&(f.cullFace(ev),u.cull_face=ev),(ey=d.frontFace)!==u.frontFace&&(f.frontFace(ey),u.frontFace=ey),(ew=d.lineWidth)!==u.lineWidth&&(f.lineWidth(ew),u.lineWidth=ew),(ex=d.polygonOffset_enable)!==u.polygonOffset_enable&&(ex?f.enable(32823):f.disable(32823),u.polygonOffset_enable=ex),eS=k[0],ez=k[1],(eS!==W[0]||ez!==W[1])&&(f.polygonOffset(eS,ez),W[0]=eS,W[1]=ez),(eF=d.sample_alpha)!==u.sample_alpha&&(eF?f.enable(32926):f.disable(32926),u.sample_alpha=eF),(eA=d.sample_enable)!==u.sample_enable&&(eA?f.enable(32928):f.disable(32928),u.sample_enable=eA),ek=O[0],eW=O[1],(ek!==H[0]||eW!==H[1])&&(f.sampleCoverage(ek,eW),H[0]=ek,H[1]=eW),(eO=d.stencil_enable)!==u.stencil_enable&&(eO?f.enable(2960):f.disable(2960),u.stencil_enable=eO),(eH=d.stencil_mask)!==u.stencil_mask&&(f.stencilMask(eH),u.stencil_mask=eH),eB=B[0],eI=B[1],eP=B[2],(eB!==I[0]||eI!==I[1]||eP!==I[2])&&(f.stencilFunc(eB,eI,eP),I[0]=eB,I[1]=eI,I[2]=eP),eE=P[0],eT=P[1],eM=P[2],eN=P[3],(eE!==E[0]||eT!==E[1]||eM!==E[2]||eN!==E[3])&&(f.stencilOpSeparate(eE,eT,eM,eN),E[0]=eE,E[1]=eT,E[2]=eM,E[3]=eN),eL=T[0],eC=T[1],eV=T[2],eD=T[3],(eL!==M[0]||eC!==M[1]||eV!==M[2]||eD!==M[3])&&(f.stencilOpSeparate(eL,eC,eV,eD),M[0]=eL,M[1]=eC,M[2]=eV,M[3]=eD),(eG=d.scissor_enable)!==u.scissor_enable&&(eG?f.enable(3089):f.disable(3089),u.scissor_enable=eG)),s=c.framebufferWidth,o=c.framebufferHeight,N=c.viewportWidth,c.viewportWidth=s,C=c.viewportHeight,c.viewportHeight=o,f.viewport(0,0,s,o),V[0]=0,V[1]=0,V[2]=s,V[3]=o,G=c.framebufferWidth,R=c.framebufferHeight,f.scissor(0,0,G,R),L[0]=0,L[1]=0,L[2]=G,L[3]=R,(q=u.profile)&&(j=performance.now(),t.count++),Z=b.frag,Y=b.vert,$=b.program(Y,Z),f.useProgram($.program),h.setVAO(null),(U=D[X=$.id])?U.call(this,e):(U=D[X]=r($)).call(this,e),u.dirty=!0,h.setVAO(null),p.next=n,c.framebufferWidth=a,c.framebufferHeight=l,c.viewportWidth=N,c.viewportHeight=C,q&&(t.cpuTime+=performance.now()-j)},scope:function(e,r,o){var f,d,b,h,m,g,_,v,y,w,x,S,z,F,A,k,W,O,H;f=p.next,p.next=i,d=c.framebufferWidth,c.framebufferWidth=i.width,b=c.framebufferHeight,c.framebufferHeight=i.height,h=c.framebufferWidth,m=c.framebufferHeight,g=c.viewportWidth,c.viewportWidth=h,_=c.viewportHeight,c.viewportHeight=m,v=C[0],C[0]=n,y=C[1],C[1]=a,w=C[2],C[2]=h,x=C[3],C[3]=m,S=c.framebufferWidth,z=c.framebufferHeight,F=N[0],N[0]=l,A=N[1],N[1]=s,k=N[2],N[2]=S,W=N[3],N[3]=z,(O=u.profile)&&(H=performance.now(),t.count++),u.dirty=!0,r(c,e,o),p.next=f,c.framebufferWidth=d,c.framebufferHeight=b,c.viewportWidth=g,c.viewportHeight=_,C[0]=v,C[1]=y,C[2]=w,C[3]=x,N[0]=F,N[1]=A,N[2]=k,N[3]=W,O&&(t.cpuTime+=performance.now()-H),u.dirty=!0},batch:function(e,r){var n,a,l,s,N,C,D,R,q,j,Z,Y,$,X,U,Q,J,K,ee,et,ei,er,en,ea,el,es,eo,ef,ec,ed,eu,eb,eh,ep,em,eg,e_,ev,ey,ew,ex,eS,ez,eF,eA,ek,eW,eO,eH,eB,eI,eP,eE,eT,eM,eN,eL,eC,eV,eD,eG,eR;m.angle_instanced_arrays,n=p.next,p.next=i,a=c.framebufferWidth,c.framebufferWidth=i.width,l=c.framebufferHeight,c.framebufferHeight=i.height,i!==p.cur&&(i?f.bindFramebuffer(36160,i.framebuffer):f.bindFramebuffer(36160,null),p.cur=i),u.dirty&&((J=d.dither)!==u.dither&&(J?f.enable(3024):f.disable(3024),u.dither=J),(K=d.blend_enable)!==u.blend_enable&&(K?f.enable(3042):f.disable(3042),u.blend_enable=K),ee=g[0],et=g[1],ei=g[2],er=g[3],(ee!==_[0]||et!==_[1]||ei!==_[2]||er!==_[3])&&(f.blendColor(ee,et,ei,er),_[0]=ee,_[1]=et,_[2]=ei,_[3]=er),en=v[0],ea=v[1],(en!==y[0]||ea!==y[1])&&(f.blendEquationSeparate(en,ea),y[0]=en,y[1]=ea),el=w[0],es=w[1],eo=w[2],ef=w[3],(el!==x[0]||es!==x[1]||eo!==x[2]||ef!==x[3])&&(f.blendFuncSeparate(el,es,eo,ef),x[0]=el,x[1]=es,x[2]=eo,x[3]=ef),(ec=d.depth_enable)!==u.depth_enable&&(ec?f.enable(2929):f.disable(2929),u.depth_enable=ec),(ed=d.depth_func)!==u.depth_func&&(f.depthFunc(ed),u.depth_func=ed),eu=S[0],eb=S[1],(eu!==z[0]||eb!==z[1])&&(f.depthRange(eu,eb),z[0]=eu,z[1]=eb),(eh=d.depth_mask)!==u.depth_mask&&(f.depthMask(eh),u.depth_mask=eh),ep=F[0],em=F[1],eg=F[2],e_=F[3],(ep!==A[0]||em!==A[1]||eg!==A[2]||e_!==A[3])&&(f.colorMask(ep,em,eg,e_),A[0]=ep,A[1]=em,A[2]=eg,A[3]=e_),(ev=d.cull_enable)!==u.cull_enable&&(ev?f.enable(2884):f.disable(2884),u.cull_enable=ev),(ey=d.cull_face)!==u.cull_face&&(f.cullFace(ey),u.cull_face=ey),(ew=d.frontFace)!==u.frontFace&&(f.frontFace(ew),u.frontFace=ew),(ex=d.lineWidth)!==u.lineWidth&&(f.lineWidth(ex),u.lineWidth=ex),(eS=d.polygonOffset_enable)!==u.polygonOffset_enable&&(eS?f.enable(32823):f.disable(32823),u.polygonOffset_enable=eS),ez=k[0],eF=k[1],(ez!==W[0]||eF!==W[1])&&(f.polygonOffset(ez,eF),W[0]=ez,W[1]=eF),(eA=d.sample_alpha)!==u.sample_alpha&&(eA?f.enable(32926):f.disable(32926),u.sample_alpha=eA),(ek=d.sample_enable)!==u.sample_enable&&(ek?f.enable(32928):f.disable(32928),u.sample_enable=ek),eW=O[0],eO=O[1],(eW!==H[0]||eO!==H[1])&&(f.sampleCoverage(eW,eO),H[0]=eW,H[1]=eO),(eH=d.stencil_enable)!==u.stencil_enable&&(eH?f.enable(2960):f.disable(2960),u.stencil_enable=eH),(eB=d.stencil_mask)!==u.stencil_mask&&(f.stencilMask(eB),u.stencil_mask=eB),eI=B[0],eP=B[1],eE=B[2],(eI!==I[0]||eP!==I[1]||eE!==I[2])&&(f.stencilFunc(eI,eP,eE),I[0]=eI,I[1]=eP,I[2]=eE),eT=P[0],eM=P[1],eN=P[2],eL=P[3],(eT!==E[0]||eM!==E[1]||eN!==E[2]||eL!==E[3])&&(f.stencilOpSeparate(eT,eM,eN,eL),E[0]=eT,E[1]=eM,E[2]=eN,E[3]=eL),eC=T[0],eV=T[1],eD=T[2],eG=T[3],(eC!==M[0]||eV!==M[1]||eD!==M[2]||eG!==M[3])&&(f.stencilOpSeparate(eC,eV,eD,eG),M[0]=eC,M[1]=eV,M[2]=eD,M[3]=eG),(eR=d.scissor_enable)!==u.scissor_enable&&(eR?f.enable(3089):f.disable(3089),u.scissor_enable=eR)),s=c.framebufferWidth,N=c.framebufferHeight,C=c.viewportWidth,c.viewportWidth=s,D=c.viewportHeight,c.viewportHeight=N,f.viewport(0,0,s,N),V[0]=0,V[1]=0,V[2]=s,V[3]=N,R=c.framebufferWidth,q=c.framebufferHeight,f.scissor(0,0,R,q),L[0]=0,L[1]=0,L[2]=R,L[3]=q,(j=u.profile)&&(Z=performance.now(),t.count+=r),Y=b.frag,$=b.vert,X=b.program($,Y),f.useProgram(X.program),h.setVAO(null),(Q=G[U=X.id])?Q.call(this,e,r):(Q=G[U]=o(X)).call(this,e,r),u.dirty=!0,h.setVAO(null),p.next=n,c.framebufferWidth=a,c.framebufferHeight=l,c.viewportWidth=C,c.viewportHeight=D,j&&(t.cpuTime+=performance.now()-Z)}}}};class K{constructor(e,t){var i,r;this.config=new A,this.graph=new Z,this.requestAnimationFrameId=0,this.isRightClickMouse=!1,this.store=new U,this.zoomInstance=new Q(this.store,this.config),this.hasParticleSystemDestroyed=!1,this._findHoveredPointExecutionCount=0,this._isMouseOnCanvas=!1,this._isFirstDataAfterInit=!0,t&&this.config.init(t);let a=e.clientWidth,s=e.clientHeight;e.width=a*this.config.pixelRatio,e.height=s*this.config.pixelRatio,""===e.style.width&&""===e.style.height&&(0,n.A)(e).style("width","100%").style("height","100%"),this.canvas=e,this.canvasD3Selection=(0,n.A)(e),this.canvasD3Selection.on("mouseenter.cosmos",()=>{this._isMouseOnCanvas=!0}).on("mouseleave.cosmos",()=>{this._isMouseOnCanvas=!1}),this.zoomInstance.behavior.on("start.detect",e=>{this.currentEvent=e}).on("zoom.detect",e=>{e.sourceEvent&&this.updateMousePosition(e.sourceEvent),this.currentEvent=e}).on("end.detect",e=>{this.currentEvent=e}),this.canvasD3Selection.call(this.zoomInstance.behavior).on("click",this.onClick.bind(this)).on("mousemove",this.onMouseMove.bind(this)).on("contextmenu",this.onRightClickMouse.bind(this)),this.config.disableZoom&&this.disableZoom(),this.setZoomLevel(null!=(i=this.config.initialZoomLevel)?i:1),this.reglInstance=l({canvas:this.canvas,attributes:{antialias:!1,preserveDrawingBuffer:!0},extensions:["OES_texture_float","ANGLE_instanced_arrays"],cachedCode:J}),this.store.maxPointSize=(null!=(r=this.reglInstance.limits.pointSizeDims[1])?r:64)/this.config.pixelRatio,this.store.adjustSpaceSize(this.config.spaceSize,this.reglInstance.limits.maxTextureSize),this.store.updateScreenSize(a,s),this.points=new X(this.reglInstance,this.config,this.store,this.graph),this.lines=new $(this.reglInstance,this.config,this.store,this.graph,this.points),this.config.disableSimulation||(this.forceGravity=new T(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceCenter=new E(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceManyBody=this.config.useQuadtree?new V(this.reglInstance,this.config,this.store,this.graph,this.points):new C(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceLinkIncoming=new M(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceLinkOutgoing=new M(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceMouse=new D(this.reglInstance,this.config,this.store,this.graph,this.points)),this.store.backgroundColor=z(this.config.backgroundColor),this.config.highlightedNodeRingColor?(this.store.setHoveredNodeRingColor(this.config.highlightedNodeRingColor),this.store.setFocusedNodeRingColor(this.config.highlightedNodeRingColor)):(this.config.hoveredNodeRingColor&&this.store.setHoveredNodeRingColor(this.config.hoveredNodeRingColor),this.config.focusedNodeRingColor&&this.store.setFocusedNodeRingColor(this.config.focusedNodeRingColor)),this.config.showFPSMonitor&&(this.fpsMonitor=new j(this.canvas)),void 0!==this.config.randomSeed&&this.store.addRandomSeed(this.config.randomSeed)}get progress(){return this.store.simulationProgress}get isSimulationRunning(){return this.store.isSimulationRunning}get maxPointSize(){return this.store.maxPointSize}setConfig(e){var t,i;let r={...this.config};this.config.init(e),r.linkColor!==this.config.linkColor&&this.lines.updateColor(),r.nodeColor!==this.config.nodeColor&&this.points.updateColor(),r.nodeSize!==this.config.nodeSize&&this.points.updateSize(),r.linkWidth!==this.config.linkWidth&&this.lines.updateWidth(),r.linkArrows!==this.config.linkArrows&&this.lines.updateArrow(),(r.curvedLinkSegments!==this.config.curvedLinkSegments||r.curvedLinks!==this.config.curvedLinks)&&this.lines.updateCurveLineGeometry(),r.backgroundColor!==this.config.backgroundColor&&(this.store.backgroundColor=z(this.config.backgroundColor)),r.highlightedNodeRingColor!==this.config.highlightedNodeRingColor&&(this.store.setHoveredNodeRingColor(this.config.highlightedNodeRingColor),this.store.setFocusedNodeRingColor(this.config.highlightedNodeRingColor)),r.hoveredNodeRingColor!==this.config.hoveredNodeRingColor&&this.store.setHoveredNodeRingColor(this.config.hoveredNodeRingColor),r.focusedNodeRingColor!==this.config.focusedNodeRingColor&&this.store.setFocusedNodeRingColor(this.config.focusedNodeRingColor),(r.spaceSize!==this.config.spaceSize||r.simulation.repulsionQuadtreeLevels!==this.config.simulation.repulsionQuadtreeLevels)&&(this.store.adjustSpaceSize(this.config.spaceSize,this.reglInstance.limits.maxTextureSize),this.resizeCanvas(!0),this.update(this.store.isSimulationRunning)),r.showFPSMonitor!==this.config.showFPSMonitor&&(this.config.showFPSMonitor?this.fpsMonitor=new j(this.canvas):(null==(t=this.fpsMonitor)||t.destroy(),this.fpsMonitor=void 0)),r.pixelRatio!==this.config.pixelRatio&&(this.store.maxPointSize=(null!=(i=this.reglInstance.limits.pointSizeDims[1])?i:64)/this.config.pixelRatio),r.disableZoom!==this.config.disableZoom&&(this.config.disableZoom?this.disableZoom():this.enableZoom())}setData(e,t,i=!0){let{fitViewOnInit:r,fitViewDelay:n,fitViewByNodesInRect:a,initialZoomLevel:l}=this.config;if(!e.length&&!t.length){this.destroyParticleSystem(),this.reglInstance.clear({color:this.store.backgroundColor,depth:1,stencil:0});return}this.graph.setData(e,t),this._isFirstDataAfterInit&&r&&void 0===l&&(this._fitViewOnInitTimeoutID=window.setTimeout(()=>{a?this.setZoomTransformByNodePositions(a,void 0,void 0,0):this.fitView()},n)),this._isFirstDataAfterInit=!1,this.update(i)}zoomToNodeById(e,t=700,i=3,r=!0){let n=this.graph.getNodeById(e);n&&this.zoomToNode(n,t,i,r)}zoomToNodeByIndex(e,t=700,i=3,r=!0){let n=this.graph.getNodeByIndex(e);n&&this.zoomToNode(n,t,i,r)}zoom(e,t=0){this.setZoomLevel(e,t)}setZoomLevel(e,t=0){0===t?this.canvasD3Selection.call(this.zoomInstance.behavior.scaleTo,e):this.canvasD3Selection.transition().duration(t).call(this.zoomInstance.behavior.scaleTo,e)}getZoomLevel(){return this.zoomInstance.eventTransform.k}getNodePositions(){if(this.hasParticleSystemDestroyed)return{};let e=F(this.reglInstance,this.points.currentPositionFbo);return this.graph.nodes.reduce((t,i)=>{let r=this.graph.getSortedIndexById(i.id),n=e[4*r+0],a=e[4*r+1];return void 0!==n&&void 0!==a&&(t[i.id]={x:n,y:a}),t},{})}getNodePositionsMap(){let e=new Map;if(this.hasParticleSystemDestroyed)return e;let t=F(this.reglInstance,this.points.currentPositionFbo);return this.graph.nodes.reduce((e,i)=>{let r=this.graph.getSortedIndexById(i.id),n=t[4*r+0],a=t[4*r+1];return void 0!==n&&void 0!==a&&e.set(i.id,[n,a]),e},e)}getNodePositionsArray(){let e=[];if(this.hasParticleSystemDestroyed)return[];let t=F(this.reglInstance,this.points.currentPositionFbo);e.length=this.graph.nodes.length;for(let i=0;i<this.graph.nodes.length;i+=1){let r=this.graph.getSortedIndexByInputIndex(i),n=t[4*r+0],a=t[4*r+1];void 0!==n&&void 0!==a&&(e[i]=[n,a])}return e}fitView(e=250,t=.1){this.setZoomTransformByNodePositions(this.getNodePositionsArray(),e,void 0,t)}fitViewByNodeIds(e,t=250,i=.1){let r=this.getNodePositionsMap(),n=e.map(e=>r.get(e)).filter(e=>void 0!==e);this.setZoomTransformByNodePositions(n,t,void 0,i)}selectNodesInRange(e){if(e){let t=this.store.screenSize[1];this.store.selectedArea=[[e[0][0],t-e[1][1]],[e[1][0],t-e[0][1]]],this.points.findPointsOnAreaSelection();let i=F(this.reglInstance,this.points.selectedFbo);this.store.selectedIndices=i.map((e,t)=>t%4==0&&0!==e?t/4:-1).filter(e=>-1!==e)}else this.store.selectedIndices=null;this.points.updateGreyoutStatus()}selectNodeById(e,t=!1){var i;if(t){let t=null!=(i=this.graph.getAdjacentNodes(e))?i:[];this.selectNodesByIds([e,...t.map(e=>e.id)])}else this.selectNodesByIds([e])}selectNodeByIndex(e,t=!1){let i=this.graph.getNodeByIndex(e);i&&this.selectNodeById(i.id,t)}selectNodesByIds(e){this.selectNodesByIndices(null==e?void 0:e.map(e=>this.graph.getSortedIndexById(e)))}selectNodesByIndices(e){e?0===e.length?this.store.selectedIndices=new Float32Array:this.store.selectedIndices=new Float32Array(e.filter(e=>void 0!==e)):this.store.selectedIndices=null,this.points.updateGreyoutStatus()}unselectNodes(){this.store.selectedIndices=null,this.points.updateGreyoutStatus()}getSelectedNodes(){let{selectedIndices:e}=this.store;if(!e)return null;let t=Array(e.length);for(let[i,r]of e.entries())if(void 0!==r){let e=this.graph.getInputIndexBySortedIndex(r);void 0!==e&&(t[i]=this.graph.nodes[e])}return t}getAdjacentNodes(e){return this.graph.getAdjacentNodes(e)}setFocusedNodeById(e){void 0===e?this.store.setFocusedNode():this.store.setFocusedNode(this.graph.getNodeById(e),this.graph.getSortedIndexById(e))}setFocusedNodeByIndex(e){void 0===e?this.store.setFocusedNode():this.store.setFocusedNode(this.graph.getNodeByIndex(e),e)}spaceToScreenPosition(e){return this.zoomInstance.convertSpaceToScreenPosition(e)}spaceToScreenRadius(e){return this.zoomInstance.convertSpaceToScreenRadius(e)}getNodeRadiusByIndex(e){return this.points.getNodeRadiusByIndex(e)}getNodeRadiusById(e){let t=this.graph.getInputIndexById(e);if(void 0!==t)return this.points.getNodeRadiusByIndex(t)}trackNodePositionsByIds(e){this.points.trackNodesByIds(e)}trackNodePositionsByIndices(e){this.points.trackNodesByIds(e.map(e=>this.graph.getNodeByIndex(e)).filter(e=>void 0!==e).map(e=>e.id))}getTrackedNodePositionsMap(){return this.points.getTrackedPositions()}getSampledNodePositionsMap(){return this.points.getSampledNodePositionsMap()}start(e=1){var t,i;this.graph.nodes.length&&(this.store.isSimulationRunning=!0,this.store.alpha=e,this.store.simulationProgress=0,null==(i=(t=this.config.simulation).onStart)||i.call(t),this.stopFrames(),this.frame())}pause(){var e,t;this.store.isSimulationRunning=!1,null==(t=(e=this.config.simulation).onPause)||t.call(e)}restart(){var e,t;this.store.isSimulationRunning=!0,null==(t=(e=this.config.simulation).onRestart)||t.call(e)}step(){this.store.isSimulationRunning=!1,this.stopFrames(),this.frame()}destroy(){var e,t;window.clearTimeout(this._fitViewOnInitTimeoutID),this.stopFrames(),this.destroyParticleSystem(),null==(e=this.fpsMonitor)||e.destroy(),null==(t=document.getElementById("gl-bench-style"))||t.remove()}create(){var e,t,i,n;this.points.create(),this.lines.create(),null==(e=this.forceManyBody)||e.create(),null==(t=this.forceLinkIncoming)||t.create(r.INCOMING),null==(i=this.forceLinkOutgoing)||i.create(r.OUTGOING),null==(n=this.forceCenter)||n.create(),this.hasParticleSystemDestroyed=!1}destroyParticleSystem(){var e,t,i,r;this.hasParticleSystemDestroyed||(this.points.destroy(),this.lines.destroy(),null==(e=this.forceCenter)||e.destroy(),null==(t=this.forceLinkIncoming)||t.destroy(),null==(i=this.forceLinkOutgoing)||i.destroy(),null==(r=this.forceManyBody)||r.destroy(),this.reglInstance.destroy(),this.hasParticleSystemDestroyed=!0)}update(e){let{graph:t}=this;this.store.pointsTextureSize=Math.ceil(Math.sqrt(t.nodes.length)),this.store.linksTextureSize=Math.ceil(Math.sqrt(2*t.linksNumber)),this.destroyParticleSystem(),this.create(),this.initPrograms(),this.setFocusedNodeById(),this.store.hoveredNode=void 0,e?this.start():this.step()}initPrograms(){var e,t,i,r,n,a;this.points.initPrograms(),this.lines.initPrograms(),null==(e=this.forceGravity)||e.initPrograms(),null==(t=this.forceLinkIncoming)||t.initPrograms(),null==(i=this.forceLinkOutgoing)||i.initPrograms(),null==(r=this.forceMouse)||r.initPrograms(),null==(n=this.forceManyBody)||n.initPrograms(),null==(a=this.forceCenter)||a.initPrograms()}frame(){let{config:{simulation:e,renderLinks:t,disableSimulation:i},store:{alpha:r,isSimulationRunning:n}}=this;r<.001&&n&&this.end(),this.store.pointsTextureSize&&(this.requestAnimationFrameId=window.requestAnimationFrame(r=>{var a,l,s,o,f,c,d,u,b,h,p,m,_;null==(a=this.fpsMonitor)||a.begin(),this.resizeCanvas(),this.findHoveredPoint(),i||(this.isRightClickMouse&&(n||this.start(.1),null==(l=this.forceMouse)||l.run(),this.points.updatePosition()),n&&!this.zoomInstance.isRunning&&(e.gravity&&(null==(s=this.forceGravity)||s.run(),this.points.updatePosition()),e.center&&(null==(o=this.forceCenter)||o.run(),this.points.updatePosition()),null==(f=this.forceManyBody)||f.run(),this.points.updatePosition(),this.store.linksTextureSize&&(null==(c=this.forceLinkIncoming)||c.run(),this.points.updatePosition(),null==(d=this.forceLinkOutgoing)||d.run(),this.points.updatePosition()),this.store.alpha+=this.store.addAlpha(null!=(u=this.config.simulation.decay)?u:g.simulation.decay),this.isRightClickMouse&&(this.store.alpha=Math.max(this.store.alpha,.1)),this.store.simulationProgress=Math.sqrt(Math.min(1,.001/this.store.alpha)),null==(h=(b=this.config.simulation).onTick)||h.call(b,this.store.alpha,null==(p=this.store.hoveredNode)?void 0:p.node,this.store.hoveredNode?this.graph.getInputIndexBySortedIndex(this.store.hoveredNode.index):void 0,null==(m=this.store.hoveredNode)?void 0:m.position)),this.points.trackPoints()),this.reglInstance.clear({color:this.store.backgroundColor,depth:1,stencil:0}),t&&this.store.linksTextureSize&&this.lines.draw(),this.points.draw(),null==(_=this.fpsMonitor)||_.end(r),this.currentEvent=void 0,this.frame()}))}stopFrames(){this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId)}end(){var e,t;this.store.isSimulationRunning=!1,this.store.simulationProgress=1,null==(t=(e=this.config.simulation).onEnd)||t.call(e)}onClick(e){var t,i,r,n;null==(i=(t=this.config.events).onClick)||i.call(t,null==(r=this.store.hoveredNode)?void 0:r.node,this.store.hoveredNode?this.graph.getInputIndexBySortedIndex(this.store.hoveredNode.index):void 0,null==(n=this.store.hoveredNode)?void 0:n.position,e)}updateMousePosition(e){if(!e||void 0===e.offsetX||void 0===e.offsetY)return;let t=e.offsetX,i=e.offsetY;this.store.mousePosition=this.zoomInstance.convertScreenToSpacePosition([t,i]),this.store.screenMousePosition=[t,this.store.screenSize[1]-i]}onMouseMove(e){var t,i,r,n;this.currentEvent=e,this.updateMousePosition(e),this.isRightClickMouse=3===e.which,null==(i=(t=this.config.events).onMouseMove)||i.call(t,null==(r=this.store.hoveredNode)?void 0:r.node,this.store.hoveredNode?this.graph.getInputIndexBySortedIndex(this.store.hoveredNode.index):void 0,null==(n=this.store.hoveredNode)?void 0:n.position,this.currentEvent)}onRightClickMouse(e){e.preventDefault()}resizeCanvas(e=!1){let t=this.canvas.width,i=this.canvas.height,r=this.canvas.clientWidth,n=this.canvas.clientHeight;if(e||t!==r*this.config.pixelRatio||i!==n*this.config.pixelRatio){let[e,t]=this.store.screenSize,{k:i}=this.zoomInstance.eventTransform,a=this.zoomInstance.convertScreenToSpacePosition([e/2,t/2]);this.store.updateScreenSize(r,n),this.canvas.width=r*this.config.pixelRatio,this.canvas.height=n*this.config.pixelRatio,this.reglInstance.poll(),this.canvasD3Selection.call(this.zoomInstance.behavior.transform,this.zoomInstance.getTransform([a],i)),this.points.updateSampledNodesGrid()}}setZoomTransformByNodePositions(e,t=250,i,r){this.resizeCanvas();let n=this.zoomInstance.getTransform(e,i,r);this.canvasD3Selection.transition().ease(a.T_).duration(t).call(this.zoomInstance.behavior.transform,n)}zoomToNode(e,t,i,r){let{graph:n,store:{screenSize:l}}=this,s=F(this.reglInstance,this.points.currentPositionFbo),o=n.getSortedIndexById(e.id);if(void 0===o)return;let f=s[4*o+0],c=s[4*o+1];if(void 0===f||void 0===c)return;let d=this.zoomInstance.getDistanceToPoint([f,c]),u=r?i:Math.max(this.getZoomLevel(),i);if(d<Math.min(l[0],l[1]))this.setZoomTransformByNodePositions([[f,c]],t,u);else{let e=this.zoomInstance.getTransform([[f,c]],u),i=this.zoomInstance.getMiddlePointTransform([f,c]);this.canvasD3Selection.transition().ease(a.bl).duration(t/2).call(this.zoomInstance.behavior.transform,i).transition().ease(a.yv).duration(t/2).call(this.zoomInstance.behavior.transform,e)}}disableZoom(){this.canvasD3Selection.call(this.zoomInstance.behavior).on("wheel.zoom",null)}enableZoom(){this.canvasD3Selection.call(this.zoomInstance.behavior)}findHoveredPoint(){var e,t,i,r,n;if(!this._isMouseOnCanvas)return;if(this._findHoveredPointExecutionCount<2){this._findHoveredPointExecutionCount+=1;return}this._findHoveredPointExecutionCount=0,this.points.findHoveredPoint();let a=!1,l=!1,s=F(this.reglInstance,this.points.hoveredFbo);if(s[1]){let t=s[0],i=this.graph.getInputIndexBySortedIndex(t),r=void 0!==i?this.graph.getNodeByIndex(i):void 0;(null==(e=this.store.hoveredNode)?void 0:e.node)!==r&&(a=!0);let n=s[2],l=s[3];this.store.hoveredNode=r&&{node:r,index:t,position:[n,l]}}else this.store.hoveredNode&&(l=!0),this.store.hoveredNode=void 0;a&&this.store.hoveredNode&&(null==(i=(t=this.config.events).onNodeMouseOver)||i.call(t,this.store.hoveredNode.node,this.graph.getInputIndexBySortedIndex(this.graph.getSortedIndexById(this.store.hoveredNode.node.id)),this.store.hoveredNode.position,this.currentEvent)),l&&(null==(n=(r=this.config.events).onNodeMouseOut)||n.call(r,this.currentEvent))}}}}]);